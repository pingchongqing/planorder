webpackJsonp([2],{"+4G4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-email",use:"icon-email-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-email"><defs><style type="text/css"></style></defs><path d="M938.666667 853.333333 85.333333 853.333333c-47.061333 0-85.333333-38.272-85.333333-85.333333L0 256c0-47.061333 38.272-85.333333 85.333333-85.333333l853.333333 0c47.061333 0 85.333333 38.272 85.333333 85.333333l0 512C1024 815.061333 985.728 853.333333 938.666667 853.333333zM85.333333 213.333333c-23.530667 0-42.666667 19.136-42.666667 42.666667l0 512c0 23.530667 19.136 42.666667 42.666667 42.666667l853.333333 0c23.530667 0 42.666667-19.136 42.666667-42.666667L981.333333 256c0-23.530667-19.136-42.666667-42.666667-42.666667L85.333333 213.333333z" p-id="7264" /><path d="M512 622.741333 137.749333 380.586667c-9.898667-6.421333-12.736-19.605333-6.336-29.504s19.605333-12.714667 29.504-6.336L512 571.925333 863.082667 344.746667c9.898667-6.378667 23.104-3.562667 29.504 6.336s3.562667 23.082667-6.336 29.504L512 622.741333z" p-id="7265" /><path d="M128.021333 725.333333c-6.890667 0-13.674667-3.328-17.770667-9.493333-6.549333-9.813333-3.904-23.04 5.909333-29.589333l192-128c9.813333-6.549333 23.061333-3.904 29.589333 5.909333 6.549333 9.813333 3.904 23.04-5.909333 29.589333l-192 128C136.192 724.16 132.074667 725.333333 128.021333 725.333333z" p-id="7266" /><path d="M895.978667 725.333333c-4.053333 0-8.170667-1.173333-11.818667-3.584l-192-128c-9.813333-6.549333-12.458667-19.776-5.909333-29.589333 6.528-9.813333 19.754667-12.458667 29.589333-5.909333l192 128c9.813333 6.549333 12.458667 19.776 5.909333 29.589333C909.653333 722.005333 902.869333 725.333333 895.978667 725.333333z" p-id="7267" /></symbol>'});i.a.add(l);t.default=l},"+FKn":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("j+mQ"),i=a("NYxO"),l=a("0xDb"),s=a("vHhr"),c=a("8hSj"),u={components:{Sticky:s.a},data:function(){return{planform:{payment:{createuser:"",enclosure:"",enterprise:"",enterprisename:"",fundnature:"",memos:"",payamount:"",paydate:"",payer:"",payername:"",purchorder:"",receivables:"",receivablesname:"",settlementmethod:"",status:"",checkdate:"",checkuser:"",createdate:""}},list:[],pagesize:10,pageindex:1,total:0,currentPage:1,fundnature:l.a,settlementmethod:l.d,fetchSuccess:!0}},computed:r()({getEntName:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.payment.enterprise&&(t=a.name)}),t},getCusname:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.payment.receivables&&(t=a.name)}),t}},Object(i.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:l.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getDetail()},methods:{Modify:c.a,downloadFile:l.f,getDetail:function(){var e=this;Object(o.c)({pagesize:this.pagesize,pageindex:this.pageindex,ticketno:this.$route.params.ticketno}).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.planform.payment=e.list[0],console.log(t)}).catch(function(t){e.fetchSuccess=!1,console.log(t)})},needfresh:function(){this.getDetail()},Edit:function(){this.$router.push({name:"newpayment",query:{id:this.$route.params.ticketno}})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{staticStyle:{"margin-bottom":"20px"},attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[-1==e.planform.payment.status||-2==e.planform.payment.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"payment")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.payment.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"payment",!0)}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"payment",!0)}}},[e._v("驳回")])]:[a("el-tag",[e._v("暂无操作")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款单号",prop:"payment.ticketno"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.payment.ticketno,callback:function(t){e.$set(e.planform.payment,"ticketno",t)},expression:"planform.payment.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方",prop:"payment.payername"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.payment.payername,callback:function(t){e.$set(e.planform.payment,"payername",t)},expression:"planform.payment.payername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"本次实付金额",prop:"payment.payamount"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.payment.payamount,callback:function(t){e.$set(e.planform.payment,"payamount",t)},expression:"planform.payment.payamount"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款方",prop:"payment.receivablesname"}},[a("el-input",{attrs:{type:"text",value:e.planform.payment.receivablesname,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"款项类型",prop:"payment.fundnature"}},[a("el-input",{attrs:{type:"text",value:e._f("fundnatureFilter")(e.planform.payment.fundnature),disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"结算方式",prop:"payment.settlementmethod"}},[a("el-input",{attrs:{type:"text",value:e._f("settlementmethodFilter")(e.planform.payment.settlementmethod),disabled:""}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核人",prop:"payment.checkuser"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.payment.checkuser,callback:function(t){e.$set(e.planform.payment,"checkuser",t)},expression:"planform.payment.checkuser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核日期",prop:"payment.checkdate"}},[a("el-input",{attrs:{type:"text",value:e.planform.payment.checkdate,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核结果",prop:"payment.status"}},[a("el-input",{attrs:{type:"text",value:e._f("statusFilter")(e.planform.payment.status),disabled:""}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单人",prop:"payment.createuser"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.payment.createuser,callback:function(t){e.$set(e.planform.payment,"createuser",t)},expression:"planform.payment.createuser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单日期",prop:"payment.createdate"}},[a("el-input",{attrs:{type:"text",value:e.planform.payment.createdate,disabled:""}})],1)],1),e._v(" "),e.planform.payment.enclosure?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"附件",prop:"payment.enclosure"}},[a("a",{attrs:{type:"text",href:e.downloadFile(e.planform.payment.enclosure),target:"_blank"}},[e._v("下载附件")])])],1):e._e()],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注",prop:"payment.memos"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.payment.memos,callback:function(t){e.$set(e.planform.payment,"memos",t)},expression:"planform.payment.memos"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款日期",prop:"payment.paydate"}},[a("el-input",{attrs:{type:"text",value:e.planform.payment.paydate,disabled:""}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("PejS")},"data-v-3355eac3",null);t.default=p.exports},"+H76":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("9wLW"),r=a.n(n),o=a("VD6r"),i=a.n(o),l={data:function(){return{img_404:r.a,img_404_cloud:i.a}},computed:{message:function(){return"特朗普说这个页面你不能进......"}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{background:"#f0f2f5","margin-top":"-20px"}},[a("div",{staticClass:"wscn-http404"},[a("div",{staticClass:"pic-404"},[a("img",{staticClass:"pic-404__parent",attrs:{src:e.img_404,alt:"404"}}),e._v(" "),a("img",{staticClass:"pic-404__child left",attrs:{src:e.img_404_cloud,alt:"404"}}),e._v(" "),a("img",{staticClass:"pic-404__child mid",attrs:{src:e.img_404_cloud,alt:"404"}}),e._v(" "),a("img",{staticClass:"pic-404__child right",attrs:{src:e.img_404_cloud,alt:"404"}})]),e._v(" "),a("div",{staticClass:"bullshit"},[a("div",{staticClass:"bullshit__oops"},[e._v("OOPS!")]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"bullshit__headline"},[e._v(e._s(e.message))]),e._v(" "),a("div",{staticClass:"bullshit__info"},[e._v("请检查您输入的网址是否正确，请点击以下按钮返回主页或者发送错误报告")]),e._v(" "),a("a",{staticClass:"bullshit__return-home",attrs:{href:"/"}},[e._v("返回首页")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bullshit__info"},[this._v("版权所有"),t("a",{staticClass:"link-type",attrs:{href:"https://wallstreetcn.com",target:"_blank"}},[this._v("华尔街见闻")])])}]};var c=a("VU/8")(l,s,!1,function(e){a("8Wpd")},"data-v-55779f4f",null);t.default=c.exports},"+Ihy":function(e,t){},0:function(e,t){},"0Ex+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-plan",use:"icon-plan-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-plan"><defs><style type="text/css"></style></defs><path d="M225.984 381.952 353.152 381.952 353.152 478.272 225.984 478.272 225.984 381.952Z" p-id="3895" /><path d="M225.984 702.656 353.152 702.656 353.152 798.848 225.984 798.848 225.984 702.656Z" p-id="3896" /><path d="M448.512 542.4 575.68 542.4 575.68 638.656 448.512 638.656 448.512 542.4Z" p-id="3897" /><path d="M225.984 542.4 353.152 542.4 353.152 638.656 225.984 638.656 225.984 542.4Z" p-id="3898" /><path d="M448.512 702.656 575.68 702.656 575.68 798.848 448.512 798.848 448.512 702.656Z" p-id="3899" /><path d="M670.848 542.4 798.016 542.4 798.016 638.656 670.848 638.656 670.848 542.4Z" p-id="3900" /><path d="M670.848 381.952 798.016 381.952 798.016 478.272 670.848 478.272 670.848 381.952Z" p-id="3901" /><path d="M670.848 702.656 798.016 702.656 798.016 798.848 670.848 798.848 670.848 702.656Z" p-id="3902" /><path d="M448.512 381.952 575.68 381.952 575.68 478.272 448.512 478.272 448.512 381.952Z" p-id="3903" /><path d="M917.504 82.88l-152.256 0L765.248 25.664C765.248 11.52 753.728 0 739.84 0c-14.016 0-25.408 11.52-25.408 25.664l0 57.28L537.472 82.944 537.472 25.664C537.472 11.52 526.144 0 512.128 0S486.656 11.52 486.656 25.664l0 57.28L307.392 82.944 307.392 25.664C307.392 11.52 295.936 0 281.92 0S256.512 11.52 256.512 25.664l0 57.28L106.56 82.944C47.808 82.88 0 131.072 0 190.4l0 726.208C0 975.808 47.68 1024 106.56 1024l810.944 0C976.192 1024 1024 975.936 1024 916.608L1024 190.4C1024 131.072 976.32 82.88 917.504 82.88L917.504 82.88zM973.184 916.608c0 30.784-25.024 56.064-55.68 56.064L106.56 972.672c-30.656 0-55.68-25.28-55.68-56.064L50.88 190.4c0-30.912 25.024-56.128 55.68-56.128l149.952 0 0 57.28c0 14.144 11.456 25.664 25.408 25.664s25.408-11.52 25.408-25.664L307.328 134.272l179.328 0 0 57.28c0 14.144 11.456 25.664 25.408 25.664s25.344-11.52 25.344-25.664L537.408 134.272l176.96 0 0 57.28c0 14.144 11.456 25.664 25.408 25.664s25.408-11.52 25.408-25.664L765.184 134.272l152.32 0c30.656 0 55.68 25.216 55.68 56.128l0 726.208L973.184 916.608 973.184 916.608z" p-id="3904" /></symbol>'});i.a.add(l);t.default=l},"0Fni":function(e,t){},"0JdX":function(e,t){},"0TzL":function(e,t,a){"use strict";t.f=function(e){return Object(n.a)({url:"/api/etpOrder/getProductInfo",method:"post",data:e})},t.b=function(e){return Object(n.a)({url:"/api/etpOrder/addOrUpdateEtpOrder",method:"post",data:e})},t.h=function(e){return Object(n.a)({url:"/api/etpOrder/orderList",method:"post",data:e})},t.g=function(e){return Object(n.a)({url:"/api/etpOrder/orderDetail",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/api/etpBid/bidList",method:"post",data:e})},t.j=function(e){return Object(n.a)({url:"/api/etpBid/setWinBid",method:"post",data:e})},t.l=function(e){return Object(n.a)({url:"/api/etpOrder/startEtpOrder",method:"post",data:e})},t.i=function(e){return Object(n.a)({url:"/api/pay/queryBail",method:"post",data:e})},t.a=function(e){return Object(n.a)({url:"/api/etpBid/addOrUpdateEtpBid",method:"post",data:e})},t.d=function(e){return Object(n.a)({url:"/api/etpOrder/delayEtpOrderTime",method:"post",data:e})},t.k=function(e){return Object(n.a)({url:"/api/etpBid/setWinDetailBid",method:"post",data:e})},t.e=function(e){return Object(n.a)({url:"/api/etpOrder/deleteEtpOrder",method:"post",data:e})};var n=a("vLgD")},"0xDb":function(e,t,a){"use strict";t.h=o,t.g=function(e,t){e&&!e.includes("Z")&&(e=e.replace(new RegExp(/-/gm),"/"));var a=new Date(e),n=(Date.now()-a)/1e3;if(n<30)return"刚刚";if(n<3600)return Math.ceil(n/60)+"分钟前";if(n<86400)return Math.ceil(n/3600)+"小时前";if(n<172800)return"1天前";return t?o(e,t):a.getMonth()+1+"月"+a.getDate()+"日"+a.getHours()+"时"+a.getMinutes()+"分"},t.i=function(e,t){return"http://nb.csjscm.com:9999/WebReport/ReportServer?reportlet=/HALL_TEST/"+e+".cpt&ticketno="+t},t.j=function(e){return"http://nb.csjscm.com:9999/WebReport/ReportServer?reportlet=/HALL_TEST/"+e+".cpt"},a.d(t,"c",function(){return i}),a.d(t,"a",function(){return l}),a.d(t,"d",function(){return s}),a.d(t,"b",function(){return c}),a.d(t,"e",function(){return u}),t.f=function(e){return"http://testscm.csjmro.com/file"+e};var n=a("pFYg"),r=a.n(n);function o(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===e?"undefined":r()(e))?n=e:(10===(""+e).length&&(e=1e3*parseInt(e)),e&&"string"==typeof e&&!e.includes("Z")&&(e=e.replace(new RegExp(/-/gm),"/")),n=new Date(e));var o={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=o[t];return"a"===t?["一","二","三","四","五","六","日"][a-1]:(e.length>0&&a<10&&(a="0"+a),a||0)})}var i="http://sso.csjscm.com",l=[{name:"货款",value:1},{name:"服务费",value:2},{name:"投标保证金",value:3}],s=[{name:"现金",value:1},{name:"银行转账",value:2},{name:"银行承兑",value:3},{name:"商业承兑",value:4},{name:"支票",value:5}],c=[{name:"增值税专用发票",value:"1"},{name:"增值税普通发票",value:"2"},{name:"普通发票",value:"3"},{name:"无票收入",value:"4"}],u=[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}]},1:function(e,t){},"1UuX":function(e,t,a){e.exports=function(e){return a("EtAD")("./"+e+".vue").default}},2:function(e,t){},"2/o9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("0TzL"),i=a("NYxO"),l=a("vHhr"),s=a("0xDb"),c={components:{Sticky:l.a},data:function(){return{form:{etpOrderMain:{},items:[]},fetchSuccess:!0,loading:!1,jbloading:!1,topShow:!0}},computed:r()({totalAmount:function(){var e=0;return this.form.items.forEach(function(t){e+=t.pdtprice*t.pdtnumber}),e}},Object(i.b)(["company","companyId","visitedViews"])),filters:{parseTime:s.h,parseType:function(e){return 0===e||"0"===e?"明细招标":1===e||"1"===e?"品类招标":e}},created:function(){this.getDetail(),"etpdetailsale"===this.$route.name&&(this.topShow=!1)},methods:{getDetail:function(){var e=this;Object(o.g)({id:this.$route.params.id}).then(function(t){console.log(t),e.form=t.data}).catch(function(t){console.log(t),e.fetchSuccess=!1})},doStartEtpOrder:function(){var e=this;this.jbloading=!0,Object(o.l)({id:this.$route.params.id}).then(function(t){console.log(t),e.jbloading=!1,e.$message({message:t.message,type:"success"}),e.$set(e.form.etpOrderMain,"status","正在竞标")}).catch(function(t){e.jbloading=!1})},doDeleteEtpOrder:function(){var e=this;console.log(this.$store.state.tagsView.visitedViews),this.loading=!0,Object(o.e)({id:this.$route.params.id}).then(function(t){console.log(t),e.loading=!1,e.$message({message:t.message,type:"success"});var a=e.visitedViews.filter(function(t){return t.path===e.$route.path});e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push("/")})}).catch(function(t){e.loading=!1,e.$message({message:t.message,type:"error"})})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.topShow?a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?["正在招标"===e.form.etpOrderMain.status?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.jbloading,expression:"jbloading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.doStartEtpOrder}},[e._v("开始竞标\r\n      ")]):e._e(),e._v(" "),"正在招标"===e.form.etpOrderMain.status?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"warning"},on:{click:e.doDeleteEtpOrder}},[e._v("删除记录")]):e._e(),e._v(" "),a("div",{staticStyle:{height:"50px"}})]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"招标标题"}},[e._v("\r\n        "+e._s(e.form.etpOrderMain.title)+"\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"竞标时间",prop:"etpOrderMain.jbtime"}},[e._v("\r\n        "+e._s(e._f("parseTime")(e.form.etpOrderMain.starttime))+"至"+e._s(e._f("parseTime")(e.form.etpOrderMain.endtime))+"\r\n      ")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"招标类型",prop:"etpOrderMain.tptype"}},[e._v("\r\n            "+e._s(e._f("parseType")(e.form.etpOrderMain.tptype))+"\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"应缴保证金",prop:"etpOrderMain.bidbailamount"}},[e._v("\r\n            "+e._s(e.form.etpOrderMain.bidbailamount)+"元\r\n          ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"招标总金额"}},[e._v("\r\n            "+e._s(e.totalAmount)+"元\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发标时间"}},[e._v("\r\n            "+e._s(e._f("parseTime")(e.form.etpOrderMain.subtime))+"\r\n          ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发标单位"}},[e._v("\r\n            "+e._s(e.form.etpOrderMain.customname)+"\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参标方要求",prop:"etpOrderMain.registeramount"}},[e._v("\r\n            注册资本不低于"+e._s(e.form.etpOrderMain.registeramount)+"万元\r\n          ")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详细说明"}},[e._v("\r\n        "+e._s(e.form.etpOrderMain.smcontent)+"\r\n      ")]),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("招标物品明细")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.items,border:""}},[a("el-table-column",{attrs:{label:"小分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.thirdlevno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdlev",label:"小分类名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品编号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtno,callback:function(a){e.$set(t.row,"pdtno",a)},expression:"scope.row.pdtno"}})]:a("span",[e._v(e._s(t.row.pdtno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtname,callback:function(a){e.$set(t.row,"pdtname",a)},expression:"scope.row.pdtname"}})]:a("span",[e._v(e._s(t.row.pdtname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtbrand,callback:function(a){e.$set(t.row,"pdtbrand",a)},expression:"scope.row.pdtbrand"}})]:a("span",[e._v(e._s(t.row.pdtbrand))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtmodel,callback:function(a){e.$set(t.row,"pdtmodel",a)},expression:"scope.row.pdtmodel"}})]:a("span",[e._v(e._s(t.row.pdtmodel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtsize,callback:function(a){e.$set(t.row,"pdtsize",a)},expression:"scope.row.pdtsize"}})]:a("span",[e._v(e._s(t.row.pdtsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtnumber,callback:function(a){e.$set(t.row,"pdtnumber",a)},expression:"scope.row.pdtnumber"}})]:a("span",[e._v(e._s(t.row.pdtnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtunit,callback:function(a){e.$set(t.row,"pdtunit",a)},expression:"scope.row.pdtunit"}})]:a("span",[e._v(e._s(t.row.pdtunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtprice,callback:function(a){e.$set(t.row,"pdtprice",a)},expression:"scope.row.pdtprice"}})]:a("span",[e._v(e._s(t.row.pdtprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1e3*t.row.pdtprice*t.row.pdtnumber/1e3))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.beizhu,callback:function(a){e.$set(t.row,"beizhu",a)},expression:"scope.row.beizhu"}})]:a("span",[e._v(e._s(t.row.beizhu))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("Ft6E")},"data-v-d98094ee",null);t.default=d.exports},"2hbZ":function(e,t){},"2z3A":function(e,t){},"3eCm":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-tree",use:"icon-tree-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-tree"><defs><style type="text/css"></style></defs><path d="M1013.703 693.345c6.865 6.865 10.297 14.874 10.297 24.027l0 205.944c0 9.916-3.432 18.115-10.297 24.599-6.865 6.483-15.255 9.725-25.171 9.725L782.588 957.64c-9.153 0-17.162-3.242-24.027-9.725-6.865-6.483-10.297-14.683-10.297-24.599L748.264 717.372c0-6.102 1.526-11.823 4.577-17.162s7.246-9.534 12.586-12.586 11.06-4.577 17.162-4.577l77.801 0L860.39 546.896c0-4.577-1.144-8.772-3.432-12.586s-5.339-6.865-9.153-9.153-8.009-3.432-12.585-3.432L543.464 521.725l0 161.323 77.801 0c9.153 0 17.162 3.432 24.027 10.297s10.297 14.874 10.297 24.027l0 205.944c0 6.102-1.526 11.823-4.577 17.162s-7.246 9.534-12.585 12.585-11.06 4.577-17.162 4.577L415.321 957.64c-6.102 0-11.823-1.526-17.162-4.577s-9.725-7.246-13.158-12.585-5.149-11.06-5.149-17.162L379.852 717.372c0-9.153 3.432-17.162 10.297-24.027s15.255-10.297 25.171-10.297l76.657 0L491.977 521.725 188.782 521.725c-7.628 0-13.92 2.479-18.878 7.437-4.958 4.958-7.437 10.869-7.437 17.734l0 136.152 77.801 0c9.916 0 18.115 3.432 24.599 10.297s9.725 14.874 9.725 24.027l0 205.944c0 9.916-3.242 18.115-9.725 24.599-6.483 6.483-14.683 9.725-24.599 9.725L34.324 957.64c-3.814 0-7.437-0.572-10.869-1.716-3.432-1.144-6.483-2.67-9.153-4.577-2.67-1.907-5.149-4.386-7.437-7.437-2.288-3.051-4.004-6.293-5.149-9.725C0.572 930.753 0 927.13 0 923.316L0 717.372c0-3.051 0.381-6.102 1.144-9.153s1.907-5.721 3.432-8.009 3.432-4.577 5.721-6.865 4.577-4.195 6.865-5.721 4.958-2.67 8.009-3.432 6.102-1.144 9.153-1.144l77.801 0L112.125 495.41c0-6.865 2.479-12.776 7.437-17.734s10.869-7.437 17.734-7.437l354.682 0L491.978 342.096l-76.657 0c-9.916 0-18.306-3.432-25.171-10.297s-10.297-14.874-10.297-24.027L379.853 101.828c0-9.916 3.432-18.306 10.297-25.171s15.255-10.297 25.171-10.297l205.944 0c6.102 0 11.823 1.716 17.162 5.149 5.339 3.432 9.534 7.818 12.585 13.158 3.051 5.339 4.577 11.06 4.577 17.162l0 205.944c0 9.153-3.432 17.162-10.297 24.027s-14.874 10.297-24.027 10.297l-77.801 0 0 128.143L885.56 470.24c7.628 0 13.92 2.479 18.878 7.437s7.437 10.869 7.437 17.734l0 187.638 76.657 0C998.448 683.048 1006.838 686.48 1013.703 693.345z" p-id="3508" /></symbol>'});i.a.add(l);t.default=l},"4wdf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-eye",use:"icon-eye-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-eye"><defs><style type="text/css"></style></defs><path d="M941.677063 391.710356c9.337669-14.005992 6.224772-32.68133-6.224772-43.575447-14.005992-10.894118-32.68133-7.78122-43.575447 6.224771-1.556449 1.556449-174.300768 205.426673-379.727441 205.426673-199.200878 0-379.727441-205.426673-381.28389-206.982098-10.894118-12.450567-31.124881-14.005992-43.575448-3.112898-12.450567 10.894118-14.005992 31.124881-3.112897 43.575448 3.112897 4.668323 40.46255 46.687322 99.600439 93.375667l-79.369676 82.48155c-12.450567 12.450567-10.894118 32.68133 1.556449 43.575448 3.112897 6.224772 10.894118 9.337669 18.675338 9.337669 7.78122 0 15.562441-3.112897 21.787213-9.337669l85.594447-88.706321c40.46255 28.013007 88.706321 54.469566 141.619438 73.14388L340.959485 707.631586c-4.668323 17.118889 4.669346 34.237779 21.787213 38.906101h9.337669c14.005992 0 26.456558-9.337669 29.568432-23.343661l32.68133-110.494556c24.90011 4.668323 51.356668 7.78122 77.813227 7.78122s52.913117-3.112897 77.813227-7.78122l32.68133 108.938108c3.112897 14.005992 17.118889 23.343661 29.569456 23.343661 3.112897 0 6.224772 0 7.78122-1.556449 17.118889-4.669346 26.456558-21.787212 21.788236-38.906102l-32.68133-108.938108c52.913117-18.675338 101.156888-45.131897 141.619438-73.14388l84.037998 87.150896c6.224772 6.224772 14.005992 9.337669 21.787212 9.337669 7.78122 0 15.562441-3.112897 21.787212-9.337669 12.450567-12.450567 12.450567-31.124881 1.556449-43.575448l-79.369675-82.48155c63.808258-46.688345 101.158934-91.820242 101.158934-91.820242z" p-id="7879" /></symbol>'});i.a.add(l);t.default=l},"5irT":function(e,t){},"5mLW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("0xDb"),i=a("NYxO"),l={props:["list","loading"],filters:{parseTime:o.h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},computed:r()({},Object(i.b)({isallow:"isallow",isallownew:"isallownew"})),methods:{viewRow:function(e){this.$router.push({name:"quotationorderdetail",params:{ticketno:e.ticketno}})},viewRowPlan:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.fromorderno}})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,loading:e.loading,border:""}},[a("el-table-column",{attrs:{label:"报价单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRow(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联计划单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRowPlan(t.row)}}},[e._v(e._s(t.row.fromorderno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单据状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"询价企业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报价日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.quotationdate?a("span",[e._v(e._s(e._f("parseTime")(t.row.quotationdate)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"报价企业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.enterpricename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"160",label:"审核日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.quotationflag&&e.isallownew&&1===t.row.status?a("router-link",{attrs:{to:{name:"newsaleorder",params:{enquiryorder:t.row.fromorderno}}}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("登记销售单")])],1):e._e(),e._v(" "),1===t.row.quotationflag&&e.isallownew&&1===t.row.status?a("router-link",{attrs:{to:{name:"newpurchaseorder",params:{enquiryorder:t.row.fromorderno}}}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("登记采购单")])],1):e._e()]}}])})],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("hlem")},null,null);t.default=c.exports},"5zLW":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("Dd8w"),i=a.n(o),l=a("E7jB"),s=a("0xDb"),c=a("NYxO"),u={data:function(){return{tableData:[],pagesize:10,pageindex:1,formInline:{searchType:"0",searchNumber:"",time:[],customer:{code:"",id:"",name:""}},tbloading:!1,loading:!1,dialogTableVisible:!1,gridData:[],gridLoading:!1,currentRow:{},total:0,currentPage:1,refundLoading:[],refundVisible:!1,refundDetail:{}}},computed:i()({},Object(c.b)(["userInfo"])),filters:{parseTime:s.h},created:function(){this.getBailData({pageFlag:1,pageindex:this.pageindex,pagesize:this.pagesize,buyenterprice:this.userInfo.companyid})},methods:{viewRow:function(e,t){var a=this;this.$set(this.refundLoading,t,!0),Object(l.j)({norefund:e.norefund}).then(function(e){console.log(e),a.$set(a.refundLoading,t,!1),a.refundVisible=!0,a.refundDetail=e.data}).catch(function(e){console.log(e),a.$set(a.refundLoading,t,!1)})},getBailData:function(){var e=this;this.tbloading=!0;var t={pageFlag:1,pageindex:this.pageindex,pagesize:this.pagesize,buyenterprice:this.userInfo.companyid};"0"===this.formInline.searchType&&this.formInline.searchNumber&&(t.tpnumber=this.formInline.searchNumber),"1"===this.formInline.searchType&&this.formInline.searchNumber&&(t.ticketno=this.formInline.searchNumber),this.formInline.customer&&this.formInline.customer.id&&(t.saleenterprice=this.formInline.customer.id),this.formInline.time&&this.formInline.time.length&&(t.startdate=Object(s.h)(this.formInline.time[0],"{y}{m}{d}"),t.enddate=Object(s.h)(this.formInline.time[1],"{y}{m}{d}")),Object(l.a)(t).then(function(t){e.tbloading=!1,e.tableData=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage}).catch(function(t){e.tbloading=!1,console.log(t)})},onSearchSubmit:function(){this.pageindex=1,this.getBailData()},getCustomer:function(){var e=this;this.dialogTableVisible=!0,this.gridData.length||(this.gridLoading=!0,Object(l.e)({ufBidBailBillRequestDTO:{pageFlag:0},buyenterprice:this.userInfo.companyid}).then(function(t){e.gridData=t.data,e.gridLoading=!1}).catch(function(t){console.log(t),e.gridLoading=!1}))},handleCurrentChange:function(e){this.currentRow=e},refund:function(e,t){var a=this;this.$set(this.refundLoading,t,!0),Object(l.i)({ticketno:e.ticketno}).then(function(n){a.$message({message:n.message,type:"success"}),a.$set(a.refundLoading,t,!1),e.paystatus="R"}).catch(function(e){a.$set(a.refundLoading,t,!1)})},handelDialogConfirm:function(){this.dialogTableVisible=!1,this.formInline.customer=JSON.parse(r()(this.currentRow))},handelDialogCancel:function(){this.dialogTableVisible=!1,this.formInline.customer=JSON.parse(r()({code:"",id:"",name:""}))},handleSizeChange:function(e){this.pagesize=e,this.getBailData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getBailData()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-search"},on:{focus:e.getCustomer},model:{value:e.formInline.customer.name,callback:function(t){e.$set(e.formInline.customer,"name",t)},expression:"formInline.customer.name"}})],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入查询号码"},model:{value:e.formInline.searchNumber,callback:function(t){e.$set(e.formInline,"searchNumber",t)},expression:"formInline.searchNumber"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.formInline.searchType,callback:function(t){e.$set(e.formInline,"searchType",t)},expression:"formInline.searchType"}},[a("el-option",{attrs:{label:"招标编号",value:"0",selected:"true"}}),e._v(" "),a("el-option",{attrs:{label:"交易流水号",value:"1"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"支付日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearchSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tbloading,expression:"tbloading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"",label:"招标编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.tpnumber)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交易流水号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.ticketno)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供货企业",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.salename)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交易金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        ￥"+e._s(t.row.bailamount)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"R"===t.row.paystatus?"success":"info"}},[e._v(e._s("S"===t.row.paystatus?"待退款":"已退款"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.paydate)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["S"===t.row.paystatus?a("el-button",{attrs:{type:"primary",loading:e.refundLoading[t.$index],size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.refund(t.row,t.$index)}}},[e._v("\r\n          退款\r\n        ")]):e._e(),e._v(" "),"R"===t.row.paystatus?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewRow(t.row,t.$index)}}},[e._v("\r\n          退款详情\r\n        ")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}}),e._v(" "),a("el-dialog",{attrs:{title:"供应商选择",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.gridLoading,expression:"gridLoading"}],ref:"singleTable",attrs:{data:e.gridData,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"code",label:"企业编号"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"企业名称"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handelDialogCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!Object.keys(e.currentRow).length},on:{click:e.handelDialogConfirm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"退款详情",visible:e.refundVisible},on:{"update:visible":function(t){e.refundVisible=t}}},[a("el-form",{attrs:{model:e.refundDetail,"label-width":"120"}},[a("el-form-item",{attrs:{label:"订单交易流水号"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.ticketno))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款单流水号"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.norefund))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款状态"}},[a("el-tag",{attrs:{size:"medium",type:"S"===e.refundDetail.refundstatus?"success":"info"}},[e._v(e._s("S"===e.refundDetail.refundstatus?"退款成功":"退款失败"))])],1),e._v(" "),a("el-form-item",{attrs:{label:"退款企业"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.buyname))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款账户"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.outaccount))])]),e._v(" "),a("el-form-item",{attrs:{label:"到账企业"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.salename))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款金额"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.refundmoney))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款时间"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.refunddate)+e._s(e.refundDetail.refundtime))])]),e._v(" "),e.refundDetail.actualdate?a("el-form-item",{attrs:{label:"到账日期"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.actualdate))])]):e._e()],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("XjCR")},null,null);t.default=p.exports},"6/3j":function(e,t){},"63v7":function(e,t){},"6Iwp":function(e,t){},"6k2e":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[a("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.levelList,function(t,n){return t.meta.title?a("el-breadcrumb-item",{key:t.path},["noredirect"===t.redirect||n==e.levelList.length-1?a("span",{staticClass:"no-redirect"},[e._v(e._s(t.meta.title))]):a("router-link",{attrs:{to:t.redirect||t.path}},[e._v(e._s(t.meta.title))])],1):e._e()}))],1)},staticRenderFns:[]};var d=a("VU/8")({created:function(){this.getBreadcrumb()},data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},methods:{getBreadcrumb:function(){var e=this.$route.matched.filter(function(e){return e.name}),t=e[0];t&&"dashboard"!==t.name&&(e=[{path:"/dashboard",meta:{title:"主页"}}].concat(e)),this.levelList=e}}},u,!1,function(e){a("U6Bb")},"data-v-23266feb",null).exports,p={name:"hamburger",props:{isActive:{type:Boolean,default:!1},toggleClick:{type:Function,default:null}}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("svg",{staticClass:"svg-icon hamburger",class:{"is-active":this.isActive},attrs:{t:"1492500959545",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1691","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},on:{click:this.toggleClick}},[t("path",{attrs:{d:"M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z","p-id":"1692"}}),this._v(" "),t("path",{attrs:{d:"M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z","p-id":"1693"}}),this._v(" "),t("path",{attrs:{d:"M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z","p-id":"1694"}})])])},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("w8FE")},"data-v-22b4bcb3",null).exports,v=a("0xDb"),h={components:{Breadcrumb:d,Hamburger:f},computed:s()({},Object(c.b)(["sidebar","avatar","company","userInfo"])),methods:{toggleSideBar:function(){this.$store.dispatch("ToggleSideBar")},logout:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$confirm("确定退出吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(t){"confirm"===t&&e.$store.dispatch("LogOut").then(function(){location.href=v.c+"/logout?service="+location.origin+"/csj_login"})});case 1:case"end":return t.stop()}},t,e)}))()}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"navbar",attrs:{mode:"horizontal"}},[a("hamburger",{staticClass:"hamburger-container",attrs:{toggleClick:e.toggleSideBar,isActive:e.sidebar.opened}}),e._v(" "),a("breadcrumb"),e._v(" "),a("div",{staticClass:"usercont"},[a("span",[a("svg-icon",{attrs:{"icon-class":"company"}}),e._v(e._s(e.company))],1),e._v(" "),a("span",[a("svg-icon",{attrs:{"icon-class":"user"}}),e._v(e._s(e.userInfo.truename))],1)]),e._v(" "),a("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[a("div",{staticClass:"avatar-wrapper"},[a("img",{staticClass:"user-avatar",attrs:{src:e.avatar+"?imageView2/1/w/80/h/80"}}),e._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{staticClass:"inlineBlock",attrs:{to:"/"}},[a("el-dropdown-item",[e._v("\n          主页\n        ")])],1),e._v(" "),a("el-dropdown-item",{attrs:{divided:""}},[a("span",{staticStyle:{display:"block"},on:{click:e.logout}},[e._v("退出登录")])])],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(h,b,!1,function(e){a("XQtt")},"data-v-ca4ab488",null);t.default=_.exports},"6x16":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("0xDb"),s=a("vHhr"),c=a("8hSj"),u={components:{Sticky:s.a},data:function(){return{planform:{outOrder:{ticketno:"",enclosure:"",outstore:"",outstorename:"",outdate:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",linkaddress:"",linkuser:"",linktel:"",outorder:"",closed:"",memos:"",outnum:"",isdelete:""},outOrderItems:[]},submitloading:!1,fetchSuccess:!0}},computed:r()({},Object(i.b)(["company","companyId","userInfo","visitedViews","isallow"])),filters:{parseTime:l.h},created:function(){this.getoutOrderDetail()},methods:{Modify:c.a,getoutOrderDetail:function(){var e=this;this.loading=!0,Object(o.p)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t),e.loading=!1,e.planform=t.data}).catch(function(t){console.log(t),e.loading=!1,e.fetchSuccess=!1})},nextpage:function(e){this.$router.push({name:e})},Edit:function(){this.$router.push({name:"newoutstore",params:{ticketno:this.planform.outOrder.outnotice},query:{id:this.$route.params.ticketno}})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[1!=e.planform.outOrder.status?a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[-1==e.planform.outOrder.status||-2==e.planform.outOrder.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"outOrder")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.outOrder.status&&e.isallow?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"outOrder")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"outOrder")}}},[e._v("驳回")])]:[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("详情")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库单号",prop:"outOrder.ticketno"}},[e._v("\r\n          "+e._s(e.planform.outOrder.ticketno)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货企业",prop:"outOrder.enterprisename"}},[e._v("\r\n          "+e._s(e.planform.outOrder.customername)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货通知单号",prop:"outOrder.saleorder"}},[e._v("\r\n          "+e._s(e.planform.outOrder.outnotice)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货仓库",prop:"outOrder.outstore"}},[e._v("\r\n          "+e._s(e.planform.outOrder.outstorename)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库日期",prop:"outOrder.outdate"}},[e._v("\r\n          "+e._s(e.planform.outOrder.outdate)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库数量",prop:"outOrder.sumordernum"}},[e._v("\r\n          "+e._s(e.planform.outOrder.outnum)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库金额",prop:"outOrder.outamount"}},[e._v("\r\n          ￥"+e._s(e.planform.outOrder.outamount)+"\r\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"outOrderItems"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.planform.outOrderItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outnum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.amount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("YH52")},"data-v-8c2cf398",null);t.default=p.exports},"7TAQ":function(e,t){},"7YkZ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("j+mQ"),u=a("NYxO"),d=a("0xDb"),p={data:function(){return{paymentform:{payment:{createuser:"",enclosure:"",enterprise:"",enterprisename:"",fundnature:"",contractno:"",memos:"",payamount:"",paydate:"",payer:"",payername:"",purchorder:"",receivables:"",receivablesname:"",settlementmethod:"",status:"",postpaydate:[]}},paymentStatus:[{name:"货款",value:"0"},{name:"服务费",value:"1"}],fundnature:d.a,settlementmethod:d.d,list:[],pagesize:10,pageindex:1,total:0,currentPage:1,statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}]}},computed:s()({},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this,t=this.paymentform.payment;t.postpaydate&&t.postpaydate.length&&(t.paystartdate=Object(d.h)(t.postpaydate[0]),t.payenddate=Object(d.h)(t.postpaydate[1]),t.paydate="");var a={},n=!0,o=!1,l=void 0;try{for(var u,p=i()(r()(t));!(n=(u=p.next()).done);n=!0){var m=u.value;""!==t[m]&&(a[m]=t[m])}}catch(e){o=!0,l=e}finally{try{!n&&p.return&&p.return()}finally{if(o)throw l}}Object(c.c)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,console.log(t)}).catch(function(e){console.log(e)})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"paymentdetail",params:{ticketno:e.ticketno}})},viewpurchorderRow:function(e){this.$router.push({name:"purchaseorderdetail",params:{ticketno:e.purchorder}})},onCancel:function(){this.paymentform={payment:{}}}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.paymentform,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款单号",prop:"payment.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.paymentform.payment.ticketno,callback:function(t){e.$set(e.paymentform.payment,"ticketno",t)},expression:"paymentform.payment.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"来源单号",prop:"payment.purchorder"}},[a("el-input",{attrs:{type:"text"},model:{value:e.paymentform.payment.purchorder,callback:function(t){e.$set(e.paymentform.payment,"purchorder",t)},expression:"paymentform.payment.purchorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单据状态",prop:"payment.status"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择","prefix-icon":"el-icon-search"},model:{value:e.paymentform.payment.status,callback:function(t){e.$set(e.paymentform.payment,"status",t)},expression:"paymentform.payment.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款方",prop:"payment.receivables"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择供应商","prefix-icon":"el-icon-search"},model:{value:e.paymentform.payment.receivables,callback:function(t){e.$set(e.paymentform.payment,"receivables",t)},expression:"paymentform.payment.receivables"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"款项性质",prop:"payment.fundnature"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择款项性质","prefix-icon":"el-icon-search"},model:{value:e.paymentform.payment.fundnature,callback:function(t){e.$set(e.paymentform.payment,"fundnature",t)},expression:"paymentform.payment.fundnature"}},e._l(e.fundnature,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"结算方式",prop:"payment.settlementmethod"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择结算方式","prefix-icon":"el-icon-search"},model:{value:e.paymentform.payment.settlementmethod,callback:function(t){e.$set(e.paymentform.payment,"settlementmethod",t)},expression:"paymentform.payment.settlementmethod"}},e._l(e.settlementmethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"付款日期",prop:"payment.paydate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.paymentform.payment.postpaydate,callback:function(t){e.$set(e.paymentform.payment,"postpaydate",t)},expression:"paymentform.payment.postpaydate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同编号",prop:"payment.contractno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.paymentform.payment.contractno,callback:function(t){e.$set(e.paymentform.payment,"contractno",t)},expression:"paymentform.payment.contractno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"120px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRow(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"付款日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.paydate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"付款方"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.enterprisename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收款方",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receivablesname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"款项性质"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("fundnatureFilter")(t.row.fundnature)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结算方式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("settlementmethodFilter")(t.row.settlementmethod)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"来源采购订单",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewpurchorderRow(t.row)}}},[e._v(e._s(t.row.purchorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本次实付金额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.payamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单据状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核结果",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkadvice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("VhU1")},"data-v-2787e33c",null);t.default=f.exports},"7pRf":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-phone",use:"icon-phone-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-phone"><defs><style type="text/css"></style></defs><path d="M849.52381 974.048781 296.519747 974.048781C254.7965 974.048781 220.952381 940.537079 220.952381 899.361596L220.952381 24.97561 195.809524 49.951219 748.813585 49.951219C790.518054 49.951219 824.380951 83.595356 824.380951 124.977297L824.380951 877.099467C824.380951 890.893116 835.637792 902.075076 849.52381 902.075076 863.409826 902.075076 874.666667 890.893116 874.666667 877.099467L874.666667 124.977297C874.666667 56.010216 818.292258 0 748.813585 0L195.809524 0 170.666667 0 170.666667 24.97561 170.666667 899.361596C170.666667 968.160181 227.060385 1024 296.519747 1024L849.52381 1024C863.409826 1024 874.666667 1012.818039 874.666667 999.02439 874.666667 985.230741 863.409826 974.048781 849.52381 974.048781L849.52381 974.048781Z" p-id="5972" /><path d="M325.488889 178.210097C325.488889 165.120605 336.197087 154.501897 349.448428 154.501897L686.773794 154.501897C699.931341 154.501897 710.733333 165.242514 710.733333 178.210097L710.733333 752.651691C710.733333 765.741184 700.025135 776.359891 686.773794 776.359891L349.448428 776.359891C336.290881 776.359891 325.488889 765.619275 325.488889 752.651691L325.488889 178.210097 325.488889 178.210097ZM277.333333 178.210097 277.333333 752.651691C277.333333 792.027497 309.684774 824.195121 349.448428 824.195121L686.773794 824.195121C726.60221 824.195121 758.88889 792.178268 758.88889 752.651691L758.88889 178.210097C758.88889 138.834292 726.537449 106.666667 686.773794 106.666667L349.448428 106.666667C309.620012 106.666667 277.333333 138.68352 277.333333 178.210097L277.333333 178.210097Z" p-id="5973" /><path d="M522.666667 949.073171C550.438701 949.073171 572.952382 926.709248 572.952382 899.121952 572.952382 871.534654 550.438701 849.170731 522.666667 849.170731 494.894633 849.170731 472.380951 871.534654 472.380951 899.121952 472.380951 926.709248 494.894633 949.073171 522.666667 949.073171L522.666667 949.073171ZM522.666667 899.121952C522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952 522.666667 899.121952L522.666667 899.121952Z" p-id="5974" /></symbol>'});i.a.add(l);t.default=l},"8RBQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={props:["list","loading","totalorder","totalamount"],filters:{parseTime:a("0xDb").h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}},deliverwayFilter:function(e){switch(parseInt(e)){case 1:return"库发";case 2:return"供应商直发";case 3:return"自提";default:return""}},recmethodFilter:function(e){switch(parseInt(e)){case 1:return"货到收款";case 2:return"预收款";default:return""}},closedFilter:function(e){switch(parseInt(e)){case 0:return"未完结";case 1:return"完结";default:return""}}},methods:{nextpage:function(e){this.$router.push({name:"saleorderdetail",params:{ticketno:e.ticketno}})},nextplanpage:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.enquiryorder}})},getSummaries:function(e){var t=this,a=e.columns,n=[];return n[0]="合计",a.forEach(function(e,a){"订单数量"===e.label?n[a]=t.totalorder:"销售金额"===e.label&&(n[a]=t.totalamount)}),n}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"show-summary":"","summary-method":e.getSummaries,border:""}},[a("el-table-column",{attrs:{label:"状态",fixed:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售订单号",fixed:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpage(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划单号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextplanpage(t.row)}}},[e._v(e._s(t.row.enquiryorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"已出库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumsendnum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"完结状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("closedFilter")(t.row.closed)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划到货日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planarrivedate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交货地址",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiveaddress))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交货方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("deliverwayFilter")(t.row.deliverway)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"客户",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商联系人",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linkusername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商电话",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linktel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumorderamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税金",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumtaxamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收款方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("recmethodFilter")(t.row.recmethod)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.nextpage(t.row)}}},[e._v("操作")])]}}])})],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("nZAF")},null,null);t.default=o.exports},"8Wpd":function(e,t){},"8hSj":function(e,t,a){"use strict";t.a=function(e,t,a){var n=this;0===e?this.$prompt("请输入审核意见","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var l=i.value;console.log(l),Object(o.m)({ticketNo:n.$route.params.ticketno,checkFlag:e,checkUser:n.userInfo.truename,checkAdvice:l}).then(function(e){console.log(e),n.$message({type:"success",message:"审核成功!"}),a?n.needfresh():(n.planform[t].status=1,n.planform=JSON.parse(r()(n.planform)))}).catch(function(e){console.log(e),n.$message({type:"warn",message:"审核失败!"})})}).catch(function(){n.$message({type:"info",message:"取消审核"})}):1===e?this.$confirm("是否确定驳回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.m)({ticketNo:n.$route.params.ticketno,checkFlag:e,checkUser:n.userInfo.truename}).then(function(e){console.log(e),n.planform[t].status=-2,n.planform=JSON.parse(r()(n.planform)),n.$message({type:"success",message:"驳回成功!"})}).catch(function(e){console.log(e),n.$message({type:"error",message:"驳回失败"})})}).catch(function(){n.$message({type:"info",message:"已取消驳回"})}):3===e&&this.$confirm("是否确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.m)({ticketNo:n.$route.params.ticketno,checkFlag:e,checkUser:n.userInfo.truename}).then(function(e){console.log(e);var t=n.visitedViews.filter(function(e){return e.path===n.$route.path});n.$message({type:"success",message:"删除成功!"}),n.$store.dispatch("delVisitedViews",t[0]).then(function(){n.$router.push("/")})}).catch(function(e){console.log(e),n.$message({type:"error",message:"删除失败"})})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})};var n=a("mvHQ"),r=a.n(n),o=a("sJ5/")},"90Fk":function(e,t,a){var n={"./busyness.svg":"MCFZ","./company.svg":"znPN","./email.svg":"+4G4","./example.svg":"OOLB","./eye.svg":"4wdf","./form.svg":"sTIr","./in.svg":"YefL","./money.svg":"ig9B","./out.svg":"s+WH","./password.svg":"QjmH","./phone.svg":"7pRf","./plan.svg":"0Ex+","./purchase.svg":"BM4V","./quotation.svg":"zmj6","./sale.svg":"LguS","./search.svg":"Bx0U","./stock.svg":"t+aG","./table.svg":"oSYw","./tree.svg":"3eCm","./user.svg":"VdD3"};function r(e){return a(o(e))}function o(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="90Fk"},"96He":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Gu7T"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("mvHQ"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("sJ5/"),p=a("NYxO"),m=a("0xDb"),f={data:function(){return{type:this.$route.params.type,planform:{quotation:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprice:"",enterpricename:"",fromorderno:this.$route.params.enquiryorder,isdelete:0,memos:"",quotationdate:"",status:0,sumamount:0,ticketno:""},quotationItems:[]},rules:{quotation:{quotationdate:[{required:!0,message:"请选择到货日期",trigger:"change"}],enterprice:[{required:!0,message:"请选择报价方",trigger:"change"}]},quotationItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("招标物品明细不能空"));setTimeout(function(){t.forEach(function(e){if(!e.price)return a(new Error("请输入报价价格"))}),a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/excel/quotation/custom/export",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,currentRow:{},multipleSelection:[],submitloading:!1,enquiryData:[]}},computed:u()({sumamount:function(){var e=0;return this.planform.quotationItems.forEach(function(t){e+=parseInt(100*t.price)/100}),e},sumordernum:function(){var e=0;return this.planform.quotationItems.forEach(function(t){e+=t.ordernum}),e},enterpricename:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.quotation.enterprise&&(t=a.name)}),t},customername:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.quotation.customer&&(t=a.name)}),t}},Object(p.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:m.h},created:function(){var e=this;this.gridData.length||this.$store.dispatch("GetGysList"),this.$route.params.enquiryorder||this.$alert("请先选择计划单再创建报价单").then(function(t){e.$router.push({name:"planorderlist"})}),0===parseInt(this.$route.params.type)&&(this.uploadUrl="/planapi/api/excel/quotation/custom/export"),1===parseInt(this.$route.params.type)&&(this.uploadUrl="/planapi/api/excel/quotation/service/export"),this.$route.query.id?this.getDetail():this.getEnquiryInfo()},beforeRouteLeave:function(e,t,a){this.$confirm("离开页面后输入内容将不被保存，确定离开吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort(e))},getDetail:function(){var e=this;Object(d.e)({ticketno:this.$route.query.id}).then(function(t){console.log(t),e.planform=t.data}).catch(function(e){console.log(e)})},getEnquiryInfo:function(){var e=this;Object(d.c)({ticketno:this.$route.params.enquiryorder,flag:this.type}).then(function(t){e.planform=t.data}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(console.log(t),!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=JSON.parse(s()(e.planform));a.quotation.customername||(a.quotation.customername=e.customername),a.quotation.createuser=e.userInfo.truename,a.quotation.enterpricename||(a.quotation.enterpricename=e.getservicename(a.quotation.enterprice)),a.quotation.quotationdate=Object(m.h)(e.planform.quotation.quotationdate),a.quotation.sumamount=e.sumamount,Object(d.C)(a).then(function(t){console.log(t);var a=e.visitedViews.filter(function(t){return t.path===e.$route.path});"200"===t.code&&t.data&&e.$confirm("创建报价单成功","提示",{confirmButtonText:"查看详情",cancelButtonText:"关闭",type:"success"}).then(function(n){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"quotationorderdetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push("/")})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},handleUploadSuccess:function(e,t,a){var n=this;"200"===e.code?(this.$confirm(e.message,"提示",{confirmButtonText:"完成",cancelButtonText:"重新导入",type:"success"}).then(function(e){n.dialogVisible=!1}).catch(function(e){}),e.data.map(function(e){e.edit=!1}),this.planform.quotationItems=[].concat(r()(e.data))):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},submitUpload:function(){this.$refs.upload.submit()},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleDelete:function(e,t){this.planform.quotationItems.splice(e,1),this.$message({message:"成功删除一条记录！",type:"success"})},getservicename:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},editRow:function(e){e.edit=!1,e.warrantydate&&(e.warrantydate=Object(m.h)(new Date(e.warrantydate),"{y}-{m}-{d}")),e.supplydate&&(e.supplydate=Object(m.h)(new Date(e.supplydate),"{y}-{m}-{d}")),e.servicername=this.getservicename(e.servicer)},goeditrow:function(e){this.planform.quotationItems[e].edit=!0,this.planform=JSON.parse(s()(this.planform))},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},importEXL:function(){this.dialogVisible=!0},addDetail:function(){this.planform.quotationItems.push({id:"",ticketno:"",itemno:"",custommaterialno:"",materialname:"",materialtag:"",materialrule:"",materialsize:"",orderunit:"",description:"",ordernum:"",price:"",amount:"",categoryno:"",memos:"",department:"",warrantydate:"",supplydate:"",fromitemno:"",materialno:"",material:"",servicer:"",servicername:"",edit:!0})},handleCurrentChange:function(e){this.currentRow=e},handleSelectionChange:function(e){this.multipleSelection=e},onCancel:function(){this.$router.back()},handelDialogConfirm:function(){this.dialogTableVisible=!1,this.planform.quotation.customer=JSON.parse(s()(this.currentRow))},handelDialogCancel:function(){this.dialogTableVisible=!1,this.planform.quotation.customer=JSON.parse(s()({code:"",id:"",name:""}))},delChecked:function(){var e=this,t=this.planform.quotationItems.filter(function(t){return!e.multipleSelection.includes(t)});this.planform.quotationItems=JSON.parse(s()(t))}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价方",prop:"quotation.enterprice"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search",disabled:0==e.type},model:{value:e.planform.quotation.enterprice,callback:function(t){e.$set(e.planform.quotation,"enterprice",t)},expression:"planform.quotation.enterprice"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"企业客户",prop:"quotation.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search",disabled:""},model:{value:e.planform.quotation.customer,callback:function(t){e.$set(e.planform.quotation,"customer",t)},expression:"planform.quotation.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价日期",prop:"quotation.quotationdate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.quotation.quotationdate,callback:function(t){e.$set(e.planform.quotation,"quotationdate",t)},expression:"planform.quotation.quotationdate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联计划单单号",prop:"quotation.fromorderno"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.planform.quotation.fromorderno,callback:function(t){e.$set(e.planform.quotation,"fromorderno",t)},expression:"planform.quotation.fromorderno"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        报价单明细\r\n        "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importEXL}},[e._v("\r\n          导入Excel\r\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addDetail}},[e._v("\r\n          新增一行\r\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"warning",disabled:!e.multipleSelection.length},on:{click:e.delChecked}},[e._v("\r\n          删除选中\r\n        ")])],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"quotationItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.quotationItems,border:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.itemno,callback:function(a){e.$set(t.row,"itemno",a)},expression:"scope.row.itemno"}}):a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.materialname,callback:function(a){e.$set(t.row,"materialname",a)},expression:"scope.row.materialname"}}):a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),1==e.$route.params.type?a("el-table-column",{attrs:{label:"小分类",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.categoryname,callback:function(a){e.$set(t.row,"categoryname",a)},expression:"scope.row.categoryname"}}):a("span",[e._v(e._s(t.row.categoryname))])]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.materialtag,callback:function(a){e.$set(t.row,"materialtag",a)},expression:"scope.row.materialtag"}}):a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.materialrule,callback:function(a){e.$set(t.row,"materialrule",a)},expression:"scope.row.materialrule"}}):a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.materialsize,callback:function(a){e.$set(t.row,"materialsize",a)},expression:"scope.row.materialsize"}}):a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}}):a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.orderunit,callback:function(a){e.$set(t.row,"orderunit",a)},expression:"scope.row.orderunit"}}):a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"质保期",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-date-picker",{attrs:{type:"date",editable:!1,placeholder:"选择日期",align:"right"},model:{value:t.row.warrantydate,callback:function(a){e.$set(t.row,"warrantydate",a)},expression:"scope.row.warrantydate"}}):a("span",[e._v(e._s(t.row.warrantydate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供货期",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-date-picker",{attrs:{type:"date",editable:!1,placeholder:"选择日期",align:"right"},model:{value:t.row.supplydate,callback:function(a){e.$set(t.row,"supplydate",a)},expression:"scope.row.supplydate"}}):a("span",[e._v(e._s(t.row.supplydate))])]}}])}),e._v(" "),1==e.$route.params.type?a("el-table-column",{attrs:{label:"供应商",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择","prefix-icon":"el-icon-search"},model:{value:t.row.servicer,callback:function(a){e.$set(t.row,"servicer",a)},expression:"scope.row.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})})):a("span",[e._v(e._s(t.row.servicername))])]}}])}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}}):a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"价格",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{attrs:{type:"number"},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}}):a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("报价")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.query.id?"修改报价单":"提交报价单"))]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,name:"myFile",accept:".xls,.xlsx","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls和xlsx文件,文件最大不能超过5M。\r\n        "),0==e.$route.params.type?a("a",{staticClass:"dlink",attrs:{href:"/static/templet/quocustemplet.xls"}},[e._v("下载模板")]):e._e(),e._v(" "),1==e.$route.params.type?a("a",{staticClass:"dlink",attrs:{href:"/static/templet/quosertemplet.xls"}},[e._v("下载模板")]):e._e()])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("oud0")},"data-v-1bd1f446",null);t.default=h.exports},"9A3Y":function(e,t){},"9Mqp":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("BO1k"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("j+mQ"),p=a("NYxO"),m=[],f={data:function(){return{orderList:[],pagesize:10,pageindex:1,total:0,currentPage:1,loading:!1,postData:{},postForm:{status:"",enquiryorder:"",contractno:"",servicer:"",paymethod:""},currentRow:null,ispul:!1,checkboxVal:m,key:1,formTheadOptions:[{name:"来源计划单",value:"enquiryorder"},{name:"合同编号",value:"contractno"}],formThead:m,statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],paymethod:[{name:"货到付款",value:"1"},{name:"货到票到付款",value:"2"},{name:"先款后货",value:"3"}]}},watch:{checkboxVal:function(e){this.formThead=this.formTheadOptions.filter(function(t){return e.includes(t.value)}),this.key=this.key+1}},computed:u()({},Object(p.b)({gridData:"gysList"})),filters:{statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},created:function(){this.orderList.length||this.getList(),this.gridData.length||this.$store.dispatch("GetGysList")},methods:{onConfirm:function(){this.$emit("subOrder",this.currentRow),this.$emit("diClose")},onCancel:function(){this.$refs.singleTable.setCurrentRow()},onPuls:function(){this.ispul=!this.ispul},getList:function(){var e=this;this.loading=!0;var t={},a=!0,n=!1,r=void 0;try{for(var o,l=s()(i()(this.postData));!(a=(o=l.next()).done);a=!0){var c=o.value;""!==this.postData[c]&&(t[c]=this.postData[c])}}catch(e){n=!0,r=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw r}}Object(d.b)(u()({pagesize:this.pagesize,pageindex:this.pageindex},t)).then(function(t){console.log(t),e.orderList=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},handleSizeChange:function(e){this.pagesize=e,this.getList()},handleCurrentPageChange:function(e){this.pageindex=e,this.getList()},handleCurrentChange:function(e){this.currentRow=e},onSubmit:function(){this.postData=r()({},this.postForm),this.getList()}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.postForm,labelWidth:"120px"}},[a("el-form-item",{attrs:{label:"合同编号"}},[a("el-input",{attrs:{placeholder:"合同编号"},model:{value:e.postForm.contractno,callback:function(t){e.$set(e.postForm,"contractno",t)},expression:"postForm.contractno"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:e.ispul?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:e.onPuls}},[e._v(e._s(e.ispul?"收起":"展开")+"条件")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ispul,expression:"ispul"}]},[a("el-form-item",{attrs:{label:"来源计划单"}},[a("el-input",{attrs:{placeholder:"来源计划单号"},model:{value:e.postForm.enquiryorder,callback:function(t){e.$set(e.postForm,"enquiryorder",t)},expression:"postForm.enquiryorder"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择供应商","prefix-icon":"el-icon-search"},model:{value:e.postForm.servicer,callback:function(t){e.$set(e.postForm,"servicer",t)},expression:"postForm.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式"}},[a("el-select",{attrs:{placeholder:"请选择付款方式"},model:{value:e.postForm.paymethod,callback:function(t){e.$set(e.postForm,"paymethod",t)},expression:"postForm.paymethod"}},e._l(e.paymethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("div",{staticClass:"filter-container"},[a("el-checkbox-group",{model:{value:e.checkboxVal,callback:function(t){e.checkboxVal=t},expression:"checkboxVal"}},[a("el-checkbox",{attrs:{label:"enquiryorder"}},[e._v("来源计划单")]),e._v(" "),a("el-checkbox",{attrs:{label:"contractno"}},[e._v("合同编号")])],1)],1),e._v(" "),a("el-table",{key:e.key,ref:"singleTable",attrs:{"highlight-current-row":"","max-height":"600",data:e.orderList,loading:e.loading},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{property:"ticketno",label:"采购单号",width:"160"}}),e._v(" "),e._l(e.formThead,function(t){return a("el-table-column",{key:t.value,attrs:{label:t.name,width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n        "+e._s(a.row[t.value])+"\n      ")]}}])})}),e._v(" "),a("el-table-column",{attrs:{property:"sumamount",label:"采购金额"}}),e._v(" "),a("el-table-column",{attrs:{property:"planarrivedate",label:"计划到货日期",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{property:"status",label:"状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("statusFilter")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"memos",label:"备注"}})],2),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("确 定")])],1),e._v(" "),a("div",{staticClass:"clearfix"})],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("KL2l")},null,null);t.default=h.exports},"9wLW":function(e,t,a){e.exports=a.p+"static/img/404.a57b6f3.png"},ARoL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("NYxO"),i=a("E7jB"),l={name:"dashboard",data:function(){return{openloading:!1,openUserData:{openUser:{}},disclass:"is-disabled"}},computed:r()({tipcontent:function(){return"4"===this.userInfo.openaccount?"已开通预付款账户":"5"===this.userInfo.openaccount?"预付款账户待审核":void 0}},Object(o.b)(["userInfo","roles"])),created:function(){this.userInfo&&7===this.userInfo.type&&!this.userInfo.openaccount&&this.getOpenUserData()},methods:{getOpenUserData:function(){var e=this;this.openloading=!0,Object(i.g)().then(function(t){console.log(t),e.openloading=!1,e.disclass="",e.openUserData=t.data}).catch(function(t){e.openloading=!1,console.log(t)})},handleFormSubmit:function(){var e=this;this.$confirm("等待账户开通结果","提示",{confirmButtonText:"开户成功",cancelButtonText:"遇到问题"}).then(function(t){"confirm"===t&&(console.log(t),e.$store.dispatch("GetInfo").then(function(){e.userInfo.openaccount?e.$message({message:"开通账户成功!",type:"success"}):e.$message({message:"开通账户失败!",type:"warning"})}))})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("el-card",{staticClass:"box-card"},[a("p",[a("svg-icon",{attrs:{"icon-class":"user"}}),e._v(" "+e._s(e.userInfo.truename))],1),e._v(" "),a("p",[a("svg-icon",{attrs:{"icon-class":"phone"}}),e._v(" "+e._s(e.userInfo.phone)+"\n      "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.tipcontent,placement:"right"}},[a("span",{class:{elsuccess:"4"===e.userInfo.openaccount,elwarning:"5"===e.userInfo.openaccount}},[a("i",{class:{"el-icon-success":"4"===e.userInfo.openaccount,"el-icon-warning":"5"===e.userInfo.openaccount}})])])],1),e._v(" "),a("p",[a("svg-icon",{attrs:{"icon-class":"email"}}),e._v(" "+e._s(e.userInfo.email))],1),e._v(" "),a("p",[a("svg-icon",{attrs:{"icon-class":"company"}}),e._v(" "+e._s(e.userInfo.companyname))],1)]),e._v(" "),e.userInfo.openaccount||7!==e.userInfo.type?e._e():a("el-card",{staticClass:"box-card"},[a("div",{staticStyle:{height:"50px"}},[e._v("您当前还未开通预付款账户")]),e._v(" "),a("form",{ref:"hiddenForm",attrs:{id:"openuserForm",target:"_blank",action:e.openUserData.openUserUrl,method:"post"}},[a("input",{attrs:{type:"hidden",name:"version"},domProps:{value:e.openUserData.openUser.version}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"oid_partner"},domProps:{value:e.openUserData.openUser.oid_partner}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:e.openUserData.openUser.user_id}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"sign_type"},domProps:{value:e.openUserData.openUser.sign_type}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"sign"},domProps:{value:e.openUserData.sign}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"userreq_ip"},domProps:{value:e.openUserData.openUser.userreq_ip}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"type_user"},domProps:{value:e.openUserData.openUser.type_user}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"timestamp"},domProps:{value:e.openUserData.openUser.timestamp}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"notify_url"},domProps:{value:e.openUserData.openUser.notify_url}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"open_account_notify_url"},domProps:{value:e.openUserData.openUser.open_account_notify_url}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"url_return"},domProps:{value:e.openUserData.openUser.url_return}}),e._v(" "),a("input",{staticClass:"submitButton primary",class:e.disclass,attrs:{type:"submit",value:"立即开通",disabled:e.openloading},on:{click:e.handleFormSubmit}})])])],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("bDgm")},"data-v-1ad93c12",null);t.default=c.exports},AkUR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("6k2e"),r=a("WTox"),o=a("BoPo"),i=a("Vg/Y"),l={name:"layout",components:{Navbar:n.default,Sidebar:r.default,AppMain:o.default,TagsView:i.default},computed:{sidebar:function(){return this.$store.state.app.sidebar}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app-wrapper",class:{hideSidebar:!this.sidebar.opened}},[t("sidebar",{staticClass:"sidebar-container"}),this._v(" "),t("div",{staticClass:"main-container"},[t("navbar"),this._v(" "),t("tags-view"),this._v(" "),t("app-main")],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("PVoo")},"data-v-1cc725b5",null);t.default=c.exports},AqdD:function(e,t){},"B+Yu":function(e,t){},BM4V:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-purchase",use:"icon-purchase-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-purchase"><defs><style type="text/css"></style></defs><path d="M498.95619 97.889524c-108.909714 6.41219-198.582857 95.012571-205.921523 203.727238C284.818286 429.494857 385.487238 536.380952 511.780571 536.380952 633.490286 536.380952 731.428571 437.711238 731.428571 317.147429c0.902095-126.049524-105.252571-226.54781-232.472381-219.257905z m48.88381 488.594286A520.167619 520.167619 0 0 0 512 585.142857c-138.435048 0-414.47619 68.266667-414.47619 204.8v102.4c0 18.773333 15.579429 34.133333 34.620952 34.133333h416.768A267.093333 267.093333 0 0 1 487.619048 755.809524c0-64.219429 22.576762-123.172571 60.220952-169.350095z" p-id="6716" /><path d="M868.205714 609.52381l37.644191 43.54438c-81.529905 13.750857-182.369524 20.967619-269.482667 23.259429-0.975238-13.116952-7.192381-34.06019-11.776-45.202286 86.113524-2.608762 180.736-10.48381 243.614476-21.601523z m-16.384 150.625523l-39.936-17.359238c14.726095-20.967619 32.426667-53.711238 42.22781-79.579428l49.103238 18.675809c-16.676571 28.818286-36.010667 58.61181-51.395048 78.262857z m-135.875047-21.284571l-43.544381 18.651428c-3.608381-16.359619-15.725714-41.252571-28.501334-59.904l40.277334-17.042285c13.409524 17.67619 26.843429 41.252571 31.768381 58.270476z m200.387047 71.046095h-87.430095c26.843429 23.893333 62.537143 44.860952 97.572571 58.270476-11.459048 10.166857-27.501714 30.134857-35.693714 43.227429-35.352381-16.700952-69.729524-42.569143-97.889524-72.679619v80.871619h-50.761142v-78.921143c-27.818667 29.817905-61.561905 55.02781-96.914286 72.045714-8.192-12.775619-24.234667-32.743619-35.693714-43.227428 35.693714-13.409524 71.046095-35.035429 97.255619-59.587048h-85.479619v-46.494476h120.832v-26.526476h6.558476c-2.950095-15.067429-10.825143-36.010667-19.334096-52.394667l43.227429-15.043048c10.48381 17.017905 20.309333 39.277714 22.918095 55.003429l-34.377143 12.434286h31.768381v26.526476h123.440762v46.494476z" p-id="6717" /></symbol>'});i.a.add(l);t.default=l},BoPo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"app-main",staticStyle:{"min-height":"100%"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("keep-alive",{attrs:{include:this.cachedViews}},[t("router-view")],1)],1)],1)},staticRenderFns:[]},r=a("VU/8")({name:"AppMain",computed:{cachedViews:function(){return this.$store.state.tagsView.cachedViews}}},n,!1,null,null,null);t.default=r.exports},Bpdi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("Dd8w"),i=a.n(o),l=a("sJ5/"),s=a("NYxO"),c=a("0xDb"),u={data:function(){return{planform:{innotice:{ticketno:"",instore:"",instorename:"",indate:"",servicer:"",servicername:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",suminnum:"",sumordernum:"",linkaddress:"",linkuser:"",linktel:"",purchorder:"",closed:"",memos:"",isdelete:""},innoticeItems:[]},rules:{innotice:{instore:[{required:!0,message:"请选择收货仓库",trigger:"change"}],indate:[{required:!0,message:"请选择计划入库日期",trigger:"change"}],linkuser:[{required:!0,message:"请输入收货人",trigger:"blur"}],linkaddress:[{required:!0,message:"请输入收货地址",trigger:"blur"}],linktel:[{required:!0,message:"收货人电话",trigger:"blur"}]},innoticeItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("明细不能空"));setTimeout(function(){a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/excel/innotice/export",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,multipleSelection:[],submitloading:!1}},computed:i()({sumordernum:function(){var e=0;return this.planform.innoticeItems.forEach(function(t){e+=t.ordernum}),e},sumbacknum:function(){var e=0;return this.planform.innoticeItems.forEach(function(t){e+=t.backnum}),e},sumamount:function(){var e=0;return this.planform.innoticeItems.forEach(function(t){e+=t.ordernum*t.orderprice}),e},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.innotice.instore&&(t=a.storename)}),t}},Object(s.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:c.h},created:function(){this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.gridData.length||this.$store.dispatch("GetGysList"),this.$route.query.id?this.getDetail():this.getPurchaseInfo()},beforeRouteLeave:function(e,t,a){this.$confirm("离开页面后输入内容将不被保存，确定离开吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},methods:{getDetail:function(){var e=this;Object(l.h)({ticketno:this.$route.query.id}).then(function(t){console.log(t),e.planform.innoticeItems=t.data}).catch(function(e){console.log(e)}),Object(l.i)({ticketno:this.$route.query.id}).then(function(t){console.log(t),e.planform.innotice=t.data.data[0]}).catch(function(e){console.log(e)})},getPurchaseInfo:function(){var e=this;Object(l.r)({ticketno:this.$route.params.ticketno,flag:1}).then(function(t){console.log(t);var a=t.data;e.planform.innotice.servicer=a.purchorder.servicer,e.planform.innotice.servicername=a.purchorder.servicername,e.planform.innotice.purchorder=a.purchorder.ticketno,e.planform.innotice.instore=a.purchorder.revstore,e.planform.innotice.instorename=a.purchorder.revstorename||e.storename,e.planform.innotice.linkaddress=a.purchorder.receiveaddress,e.planform.innotice.linkuser=a.purchorder.linkusername,e.planform.innotice.linktel=a.purchorder.linktel,a.purchorderItems.forEach(function(t){var a={edit:!0};a.backnum=t.ordernum,a.custommaterialno=t.custommaterialno,a.itemno=t.itemno,a.materialname=t.materialname,a.materialrule=t.materialrule,a.materialsize=t.materialsize,a.materialtag=t.materialtag,a.ordernum=t.ordernum,a.orderunit=t.orderunit,a.fromitemid=t.id,e.planform.innoticeItems.push(a)})}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path}),n=JSON.parse(r()(e.planform));n.innotice.instorename=e.storename,n.innotice.indate=Object(c.h)(e.planform.innotice.indate),n.innotice.createuser=e.userInfo.truename,n.innotice.sumordernum=e.sumordernum,Object(l.y)(n).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("新建收货通知单成功！","提示",{confirmButtonText:"继续",cancelButtonText:"关闭",type:"success"}).then(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"purchaseorderlist"})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push("/")})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},editRow:function(e){e.edit=!1},goeditrow:function(e){this.planform.innoticeItems[e].edit=!0,this.planform=JSON.parse(r()(this.planform))},onCancel:function(){this.$router.back()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"送货供应商",prop:"innotice.servicer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search",disabled:""},model:{value:e.planform.innotice.servicer,callback:function(t){e.$set(e.planform.innotice,"servicer",t)},expression:"planform.innotice.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"采购订单号",prop:"innotice.purchorder"}},[a("el-input",{attrs:{disabled:""},model:{value:e.planform.innotice.purchorder,callback:function(t){e.$set(e.planform.innotice,"purchorder",t)},expression:"planform.innotice.purchorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货仓库",prop:"innotice.instore"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.innotice.instore,callback:function(t){e.$set(e.planform.innotice,"instore",t)},expression:"planform.innotice.instore"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划入库日期",prop:"innotice.indate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.innotice.indate,callback:function(t){e.$set(e.planform.innotice,"indate",t)},expression:"planform.innotice.indate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"innotice.linkuser"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.innotice.linkuser,callback:function(t){e.$set(e.planform.innotice,"linkuser",t)},expression:"planform.innotice.linkuser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货地址",prop:"innotice.linkaddress"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.innotice.linkaddress,callback:function(t){e.$set(e.planform.innotice,"linkaddress",t)},expression:"planform.innotice.linkaddress"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系电话",prop:"innotice.linktel"}},[a("el-input",{attrs:{type:"number"},model:{value:e.planform.innotice.linktel,callback:function(t){e.$set(e.planform.innotice,"linktel",t)},expression:"planform.innotice.linktel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单数量合计",prop:"innotice.sumordernum"}},[a("el-input",{attrs:{value:e.sumordernum,disabled:""}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"备注",prop:"innotice.memos"}},[a("el-input",{model:{value:e.planform.innotice.memos,callback:function(t){e.$set(e.planform.innotice,"memos",t)},expression:"planform.innotice.memos"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"innoticeItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.innoticeItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}})]:a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划入库数量",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{attrs:{min:0,max:t.row.backnum},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.query.id?"修改收货通知单":"创建收货通知单"))]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("HQwj")},"data-v-44c161ff",null);t.default=p.exports},BuOd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("vHhr"),s=a("0xDb"),c=a("5mLW"),u=a("YGj+"),d=a("8RBQ"),p={components:{Sticky:l.a,quotable:c.default,purchasetable:u.default,saletable:d.default},data:function(){return{planform:{enquiryOrder:{},enquiryOrderItems:[]},fetchSuccess:!0,downloadLoading:!1,dialogVisible:!1,fromserviceloading:!1,fromservicelist:[],tocustomerlist:[],tocustomerloading:!1,purchaselist:[],purchaseloading:!1,salelist:[],saleloading:!1}},computed:r()({sumordernum:function(){var e=0;return this.planform.enquiryOrderItems.forEach(function(t){e+=t.ordernum}),e}},Object(i.b)(["company","companyId","userInfo","isallow","isallownew"])),filters:{parseTime:s.h,paymethodFilter:function(e){switch(parseInt(e)){case 1:return"货到付款";case 2:return"货到票到付款";case 3:return"先款后货";default:return""}}},created:function(){this.getDetail()},methods:{printUrl:s.i,getfromservicelist:function(e,t){var a=this;this[t+"loading"]=!0,Object(o.f)(e).then(function(e){a[t]=e.data.data,a[t+"loading"]=!1,console.log(e)}).catch(function(e){console.log(e),a[t+"loading"]=!1})},getsalelist:function(){var e=this;this.saleloading=!0,Object(o.u)({enquiryorder:this.planform.enquiryOrder.ticketno}).then(function(t){e.salelist=t.data.data,e.saleloading=!1,console.log(t)}).catch(function(t){console.log(t),e.saleloading=!1})},getpurchaselist:function(){var e=this;this.purchaseloading=!0,Object(o.s)({enquiryorder:this.planform.enquiryOrder.ticketno}).then(function(t){e.purchaselist=t.data.purchorders,e.purchaseloading=!1,console.log(t)}).catch(function(t){console.log(t),e.purchaseloading=!1})},getDetail:function(){var e=this;Object(o.b)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t),e.planform=t.data,e.getfromservicelist({customer:e.planform.enquiryOrder.enterprise,fromorderno:e.planform.enquiryOrder.ticketno},"fromservicelist"),e.getfromservicelist({customer:e.planform.enquiryOrder.customer,fromorderno:e.planform.enquiryOrder.ticketno},"tocustomerlist"),e.getpurchaselist(),e.getsalelist()}).catch(function(t){console.log(t),e.fetchSuccess=!1})},nextpage:function(e,t){var a={enquiryorder:this.$route.params.ticketno};t&&(a.type=t);var n={};"newsaleorder"===e&&(n={customer:this.planform.enquiryOrder.customer}),this.$router.push({name:e,params:a,query:n})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?Object(s.h)(t[e]):t[e]})})},exportExcel:function(){}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[a("a",{attrs:{href:e.printUrl("bss_enquiryorder",e.$route.params.ticketno),target:"_blank"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.downloadLoading,expression:"downloadLoading"}],staticStyle:{"margin-left":"10px"}},[e._v("\r\n          导出询价单\r\n        ")])],1),e._v(" "),e.isallow||e.isallownew?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.nextpage("newquotationorder","1")}}},[e._v("登记供应商报价单")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.nextpage("newquotationorder","0")}}},[e._v("登记给客户报价单")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.nextpage("newsaleorder")}}},[e._v("登记销售单")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.nextpage("newpurchaseorder")}}},[e._v("登记采购单")])]:e._e()]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-date"}),e._v(" 计划单详情")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划单号"}},[e._v("\r\n              "+e._s(e.planform.enquiryOrder.ticketno)+"\r\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"询价方",prop:"enquiryOrder.customer"}},[e._v("\r\n              "+e._s(e.planform.enquiryOrder.customname)+"\r\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价方",prop:"enquiryOrder.enterprise"}},[e._v("\r\n              "+e._s(e.planform.enquiryOrder.enterprisename)+"\r\n            ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数量合计"}},[e._v("\r\n              "+e._s(e.sumordernum)+"\r\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方式",prop:"enquiryOrder.paymethod"}},[e._v("\r\n              "+e._s(e._f("paymethodFilter")(e.planform.enquiryOrder.paymethod))+"\r\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建日期"}},[e._v("\r\n              "+e._s(e.planform.enquiryOrder.createdate)+"\r\n            ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"询价日期",prop:"enquiryOrder.enquirydate"}},[e._v("\r\n              "+e._s(e._f("parseTime")(e.planform.enquiryOrder.enquirydate))+"\r\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价截止日期"}},[e._v("\r\n              "+e._s(e.planform.enquiryOrder.enquiryenddate)+"\r\n            ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建人"}},[e._v("\r\n              "+e._s(e.planform.enquiryOrder.createuser)+"\r\n            ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n            计划单物品明细\r\n          ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"enquiryOrderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.enquiryOrderItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.itemno,callback:function(a){e.$set(t.row,"itemno",a)},expression:"scope.row.itemno"}})]:a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialname,callback:function(a){e.$set(t.row,"materialname",a)},expression:"scope.row.materialname"}})]:a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小分类",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.categoryname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialtag,callback:function(a){e.$set(t.row,"materialtag",a)},expression:"scope.row.materialtag"}})]:a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialrule,callback:function(a){e.$set(t.row,"materialrule",a)},expression:"scope.row.materialrule"}})]:a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialsize,callback:function(a){e.$set(t.row,"materialsize",a)},expression:"scope.row.materialsize"}})]:a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderunit,callback:function(a){e.$set(t.row,"orderunit",a)},expression:"scope.row.orderunit"}})]:a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"质保期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:t.row.warrantydate,callback:function(a){e.$set(t.row,"warrantydate",a)},expression:"scope.row.warrantydate"}})]:a("span",[e._v(e._s(t.row.warrantydate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供货期",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:t.row.supplydate,callback:function(a){e.$set(t.row,"supplydate",a)},expression:"scope.row.supplydate"}})]:a("span",[e._v(e._s(t.row.supplydate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.row.servicer,callback:function(a){e.$set(t.row,"servicer",a)},expression:"scope.row.servicer"}},e._l(e.servicers,function(e){return a("el-option",{key:e.servicer,attrs:{label:e.servicer,value:e.servicername}})}))]:a("span",[e._v(e._s(t.row.servicername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}})]:a("span",[e._v(e._s(t.row.memos))])]}}])})],1)],1)],1)],1)],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\r\n        关联供应商报价单"),a("el-badge",{directives:[{name:"show",rawName:"v-show",value:e.fromservicelist.length,expression:"fromservicelist.length"}],staticClass:"mark",attrs:{value:e.fromservicelist.length}})],1),e._v(" "),a("quotable",{attrs:{list:e.fromservicelist,loading:e.fromserviceloading}})],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\r\n        关联给客户报价单"),a("el-badge",{directives:[{name:"show",rawName:"v-show",value:e.tocustomerlist.length,expression:"tocustomerlist.length"}],staticClass:"mark",attrs:{value:e.tocustomerlist.length}})],1),e._v(" "),a("quotable",{attrs:{list:e.tocustomerlist,loading:e.tocustomerloading}})],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\r\n        关联采购订单"),a("el-badge",{directives:[{name:"show",rawName:"v-show",value:e.purchaselist.length,expression:"purchaselist.length"}],staticClass:"mark",attrs:{value:e.purchaselist.length}})],1),e._v(" "),a("purchasetable",{attrs:{list:e.purchaselist,loading:e.purchaseloading}})],1),e._v(" "),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v("\r\n        关联销售订单"),a("el-badge",{directives:[{name:"show",rawName:"v-show",value:e.salelist.length,expression:"salelist.length"}],staticClass:"mark",attrs:{value:e.salelist.length}})],1),e._v(" "),a("saletable",{attrs:{list:e.salelist,loading:e.saleloading}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("m/tv")},"data-v-c73cc306",null);t.default=f.exports},Bx0U:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-search",use:"icon-search-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-search"><defs><style type="text/css"></style></defs><path d="M450.986667 110.336c-188.714667 0-341.674667 154.368-341.674667 344.789333 0 190.421333 152.96 344.789333 341.674667 344.789334 188.672 0 341.674667-154.368 341.674666-344.746667 0-190.464-153.002667-344.832-341.674666-344.832z m462.805333 897.28l-189.610667-190.933333a445.781333 445.781333 0 0 1-273.194666 93.610666C201.898667 910.293333 0 706.517333 0 455.168 0 203.776 201.898667 0 450.986667 0s450.986667 203.776 450.986666 455.125333c0 99.114667-31.701333 190.592-85.034666 265.301334l191.36 192.768a42.666667 42.666667 0 0 1 0.042666 60.074666l-33.962666 34.304a42.666667 42.666667 0 0 1-60.586667 0z" p-id="18079" /></symbol>'});i.a.add(l);t.default=l},CkJU:function(e,t){},CwS0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("0xDb"),i=a("0TzL"),l={name:"myetp",data:function(){return{tableData:[],currentPage:1,pagesize:10,pageindex:1,total:0,loading:!1,extendVisible:!1,extendForm:{endtime:"",id:""},extendLoading:!1}},filters:{parseTime:o.h,parseType:function(e){return 0===e||"0"===e?"明细招标":1===e||"1"===e?"品类招标":e}},created:function(){this.getdata()},methods:{tableRowClassName:function(e){var t=e.row;return"正在竞标"===t.status?"success-row":"正在招标"===t.status?"warning-row":void 0},getdata:function(){var e=this;if(!this.$store.state.user.companyId)return this.$message({message:"未获取到对应的公司信息",type:"error"}),!1;this.loading=!0,Object(i.h)({pageFlag:1,pageindex:this.pageindex,pagesize:this.pagesize,belongcustom:this.$store.state.user.companyId,myOrderFlag:1}).then(function(t){e.loading=!1;var a={},n=[];t.data.data.map(function(e){a=r()({bidNum:e.bidNum,itemNumber:e.itemNumber,sumNum:e.sumNum},e.etpOrderMain),n.push(a)}),e.tableData=n,e.currentPage=t.data.currentPage,e.total=t.data.total}).catch(function(t){console.log(t),e.loading=!1})},viewRow:function(e){this.$router.push({name:"etpdetail",params:{id:e}})},extendTime:function(e){console.log(e),this.extendForm.endtime=new Date(e.endtime),this.extendForm.id=e.id,this.extendVisible=!0},handelDialogConfirm:function(){var e=this,t=void 0;if(this.tableData.map(function(a){a.id===e.extendForm.id&&(t=a.starttime)}),Date.parse(this.extendForm.endtime)<Date.parse(t))return this.$message({message:"竞标结束时间不能小于竞标开始时间",type:"error"}),!1;this.extendLoading=!0,Object(i.d)({id:this.extendForm.id,endTime:this.extendForm.endtime}).then(function(t){console.log(t),e.extendLoading=!1,e.extendVisible=!1,e.tableData.map(function(t){t.id===e.extendForm.id&&(t.endtime=e.extendForm.endtime)}),e.$message({message:"延长招标时间成功！",type:"success"})}).catch(function(t){console.log(t),e.extendLoading=!1})},dateChange:function(e){console.log(e)},showZJ:function(e){this.$router.push({name:"bidlist",params:{tpnumber:e.tpnumber}})},handleSizeChange:function(e){this.pagesize=e,this.getdata()},handleCurrentChange:function(e){this.pageindex=e,this.getdata()},tender:function(e){this.$router.push({name:"tenderdetail",params:{id:e.id},query:{d:Date.now()}})},edit:function(e){this.$router.push({name:"addetp",query:{id:e.id}})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName,border:""}},[a("el-table-column",{attrs:{fixed:"",label:"招标公告号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewRow(t.row.id)}}},[e._v("\n          "+e._s(t.row.tpnumber)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"公告标题"}}),e._v(" "),a("el-table-column",{attrs:{label:"招标类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseType")(t.row.tptype))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"正在竞标"===t.row.status?"success":"竞标结束"===t.row.status?"info":""}},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标状况",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("招标物品数量: "+e._s(t.row.sumNum)+"件")]),e._v(" "),a("p",[e._v("招标物品类别: "+e._s(t.row.itemNumber)+"类")]),e._v(" "),a("p",[e._v("参与竞标企业数: "+e._s(t.row.bidNum)+"家")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-button",{attrs:{size:"medium",type:"text"}},[e._v(e._s(t.row.bidNum?t.row.bidNum+"家":"无人")+"竞标")])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标开始时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.starttime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标结束时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.endtime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.subtime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return["正在招标"===t.row.status?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.edit(t.row)}}},[e._v("\n          修改\n        ")]):e._e(),e._v(" "),"正在竞标"===t.row.status?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.extendTime(t.row)}}},[e._v("\n          延长时间\n        ")]):e._e(),e._v(" "),"正在竞标"===t.row.status?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.tender(t.row)}}},[e._v("\n          明细中标\n        ")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.showZJ(t.row)}}},[e._v("\n          总价\n        ")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"延长招标时间",visible:e.extendVisible},on:{"update:visible":function(t){e.extendVisible=t}}},[a("el-form",{attrs:{model:e.extendForm,"label-width":"120"}},[a("el-form-item",{attrs:{label:"时间延长至"}},[a("el-date-picker",{attrs:{editable:!1,type:"datetime",placeholder:"选择日期时间",align:"right"},model:{value:e.extendForm.endtime,callback:function(t){e.$set(e.extendForm,"endtime",t)},expression:"extendForm.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.extendVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.extendLoading,expression:"extendLoading"}],attrs:{type:"primary"},on:{click:e.handelDialogConfirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("9A3Y")},null,null);t.default=c.exports},DIor:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("sJ5/"),u=a("NYxO"),d=a("0xDb"),p={data:function(){return{planform:{inorder:{ticketno:"",enclosure:"",instore:"",instorename:"",indate:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",innotice:"",innum:"",isdelete:"",postindate:[]},inorderItems:[]},statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],list:[],pagesize:10,pageindex:1,total:0,currentPage:1,deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"},{name:"自提",value:"3"}],loading:!1}},computed:s()({},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this;this.loading=!0;var t=this.planform.inorder;t.postindate&&t.postindate.length&&(t.instartdate=t.postindate[0],t.inenddate=t.postindate[1],t.indate=""),t.postindate&&!t.postindate.length&&(t.postindate="");var a={},n=!0,o=!1,l=void 0;try{for(var u,d=i()(r()(t));!(n=(u=d.next()).done);n=!0){var p=u.value;""!==t[p]&&(a[p]=t[p])}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}Object(c.k)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.purchorders,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={inorder:{},inorderItems:[]}},nextpage:function(e){this.$router.push({name:"instoredetail",params:{ticketno:e.ticketno}})},nextpurchasepage:function(e){this.$router.push({name:"innoticedetail",params:{ticketno:e.innotice}})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库单号",prop:"inorder.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.inorder.ticketno,callback:function(t){e.$set(e.planform.inorder,"ticketno",t)},expression:"planform.inorder.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货通知单号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.inorder.innotice,callback:function(t){e.$set(e.planform.inorder,"innotice",t)},expression:"planform.inorder.innotice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"送货企业",prop:"inorder.enterprise"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.inorder.servicer,callback:function(t){e.$set(e.planform.inorder,"servicer",t)},expression:"planform.inorder.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"入库日期",prop:"inorder.postindate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.inorder.postindate,callback:function(t){e.$set(e.planform.inorder,"postindate",t)},expression:"planform.inorder.postindate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建人",prop:"inorder.createuser"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.inorder.createuser,callback:function(t){e.$set(e.planform.inorder,"createuser",t)},expression:"planform.inorder.createuser"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"350px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"入库单号",fixed:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpage(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收货通知单号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpurchasepage(t.row)}}},[e._v(e._s(t.row.innotice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"送货企业",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.servicername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库仓库",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.instorename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.indate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.innum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.inamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("jRH0")},"data-v-6aa31f38",null);t.default=f.exports},DQ9r:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("0xDb"),s={components:{saletable:a("8RBQ").default},data:function(){return{planform:{saleOrder:{ticketno:"",customer:"",customername:"",planarrivedate:"",sumordernum:"",sumorderamount:"",sumsendnum:"",status:"",createuser:"",createdate:"",createtime:"",checkuser:"",checkdate:"",checktime:"",checkadvice:"",contractno:"",enterprise:"",enterprisename:"",recmethod:"",deliverway:"",receiveaddress:"",linkusername:"",linktel:"",customerorderno:"",sumtaxamount:"",store:"",closed:"",memos:"",enquiryorder:""},saleOrderItems:[]},statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],list:[],pagesize:10,pageindex:1,total:0,currentPage:1,deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"}],loading:!1,totalorder:"",totalamount:""}},computed:r()({},Object(i.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:l.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{getName:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getCustomerName:function(e){var t="";return this.gridData.length&&this.gridData.forEach(function(a){a.requestid===e&&(t=a.name)}),t},getListData:function(){var e=this;this.loading=!0;var t=this.planform.saleOrder;t.planarrivedate&&t.planarrivedate.length&&(t.planarrivestartdate=t.planarrivedate[0],t.planarriveenddate=t.planarrivedate[1],t.planarrivedate=""),Object(o.u)(r()({pagesize:this.pagesize,pageindex:this.pageindex},t)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.totalorder=t.data.quantity,e.totalamount=t.data.amount,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={saleOrder:{},saleOrderItems:[]}}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态",prop:"saleOrder.status"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.saleOrder.status,callback:function(t){e.$set(e.planform.saleOrder,"status",t)},expression:"planform.saleOrder.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售单号",prop:"saleOrder.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.saleOrder.ticketno,callback:function(t){e.$set(e.planform.saleOrder,"ticketno",t)},expression:"planform.saleOrder.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划单号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.saleOrder.enquiryorder,callback:function(t){e.$set(e.planform.saleOrder,"enquiryorder",t)},expression:"planform.saleOrder.enquiryorder"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"交货日期",prop:"saleOrder.planarrivedate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.saleOrder.planarrivedate,callback:function(t){e.$set(e.planform.saleOrder,"planarrivedate",t)},expression:"planform.saleOrder.planarrivedate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"客户",prop:"saleOrder.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.saleOrder.customer,callback:function(t){e.$set(e.planform.saleOrder,"customer",t)},expression:"planform.saleOrder.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"制单人",prop:"saleOrder.createuser"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.saleOrder.createuser,callback:function(t){e.$set(e.planform.saleOrder,"createuser",t)},expression:"planform.saleOrder.createuser"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款方式",prop:"saleOrder.recmethod"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.planform.saleOrder.recmethod,callback:function(t){e.$set(e.planform.saleOrder,"recmethod",t)},expression:"planform.saleOrder.recmethod"}},[a("el-option",{attrs:{label:"货到收款",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"预收款",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货方式",prop:"saleOrder.deliverway"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.saleOrder.deliverway,callback:function(t){e.$set(e.planform.saleOrder,"deliverway",t)},expression:"planform.saleOrder.deliverway"}},e._l(e.deliverway,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号",prop:"saleOrder.contractno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.saleOrder.contractno,callback:function(t){e.$set(e.planform.saleOrder,"contractno",t)},expression:"planform.saleOrder.contractno"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"350px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("saletable",{attrs:{list:e.list,loading:e.loading,totalorder:e.totalorder,totalamount:e.totalamount}}),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("CkJU")},"data-v-73984c30",null);t.default=u.exports},DhPa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("0xDb"),s=a("8hSj"),c={components:{Sticky:a("vHhr").a},data:function(){return{planform:{inorder:{ticketno:"",enclosure:"",instore:"",instorename:"",indate:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",innotice:"",innum:"",isdelete:""},inorderItems:[]},submitloading:!1,fetchSuccess:!0}},computed:r()({},Object(i.b)(["company","companyId","userInfo","visitedViews","isallow"])),filters:{parseTime:l.h},created:function(){this.getinorderDetail()},methods:{Modify:s.a,getinorderDetail:function(){var e=this;this.loading=!0,Object(o.j)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t),e.loading=!1,e.planform=t.data}).catch(function(t){console.log(t),e.loading=!1,e.fetchSuccess=!1})},nextpage:function(e){this.$router.push({name:e})},Edit:function(){this.$router.push({name:"newinstore",params:{ticketno:this.planform.inorder.innotice},query:{id:this.$route.params.ticketno}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[1!=e.planform.inorder.status?a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[-1==e.planform.inorder.status||-2==e.planform.inorder.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"inorder")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.inorder.status&&e.isallow?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"inorder")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"inorder")}}},[e._v("驳回")])]:[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("详情")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库单号",prop:"inorder.ticketno"}},[e._v("\r\n          "+e._s(e.planform.inorder.ticketno)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货企业",prop:"inorder.enterprise"}},[e._v("\r\n          "+e._s(e.planform.inorder.enterprisename)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货通知单号",prop:"inorder.saleorder"}},[e._v("\r\n          "+e._s(e.planform.inorder.innotice)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库仓库",prop:"inorder.outstore"}},[e._v("\r\n          "+e._s(e.planform.inorder.instorename)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库日期",prop:"inorder.outdate"}},[e._v("\r\n          "+e._s(e.planform.inorder.indate)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库数量",prop:"inorder.sumordernum"}},[e._v("\r\n          "+e._s(e.planform.inorder.innum)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库金额",prop:"inorder.sumordernum"}},[e._v("\r\n          "+e._s(e.planform.inorder.inamount)+"\r\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"inorderItems"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.planform.inorderItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.innum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.amount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("T+/F")},"data-v-31c02c9c",null);t.default=d.exports},DmpZ:function(e,t){},E7jB:function(e,t,a){"use strict";t.a=function(e){return Object(n.a)({url:"/api/pay/bailBillList",method:"post",data:e})},t.e=function(e){return Object(n.a)({url:"/api/pay/companyList",method:"post",data:e})},t.i=function(e){return Object(n.a)({url:"/api/pay/refundBail",method:"post",data:e})},t.h=function(e){return Object(n.a)({url:"/api/pay/payBailPage",method:"post",data:e})},t.f=function(e){return Object(n.a)({url:"/api/pay/createOrderBail",method:"post",data:e})},t.b=function(e){return Object(n.a)({url:"/api/etpBid/bidDetail",method:"post",data:e})},t.d=function(e){return Object(n.a)({url:"/api/etpBid/bidSort",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/api/etpBid/bidList",method:"post",data:e})},t.j=function(e){return Object(n.a)({url:"/api/pay/retundDetail",method:"post",data:e})},t.g=function(e){return Object(n.a)({url:"/api/pay/openUser",method:"post",data:e})};var n=a("vLgD")},ERKx:function(e,t){},EtAD:function(e,t,a){var n={"./401.vue":"aXys","./404.vue":"+H76","./bail/baillist.vue":"Xc0g","./bail/bidrecord.vue":"dwkA","./bail/index.vue":"5zLW","./dashboard/index.vue":"ARoL","./enterprice/biddetail.vue":"IePS","./enterprice/bidlist.vue":"bpIP","./enterprice/etpcenter.vue":"Wzj1","./enterprice/etpdetail.vue":"2/o9","./enterprice/index.vue":"rp0l","./enterprice/myetp.vue":"CwS0","./enterprice/paybail.vue":"PJwo","./enterprice/quoted.vue":"h7S6","./enterprice/tenderdetail.vue":"xKBK","./form/index.vue":"ItCA","./innotice/innoticedetail.vue":"b93q","./innotice/innoticelist.vue":"GjlW","./innotice/newinnotice.vue":"Bpdi","./instore/instoredetail.vue":"DhPa","./instore/instorelist.vue":"DIor","./instore/newinstore.vue":"T5XL","./invoice/inputinvoice/inputinvoicedetail.vue":"izaZ","./invoice/inputinvoice/inputinvoicelist.vue":"j8u2","./invoice/inputinvoice/newinputinvoice.vue":"eisF","./invoice/outputinvoice/makeoutinvoice.vue":"Jtiv","./invoice/outputinvoice/newoutputinvoice.vue":"yq9s","./invoice/outputinvoice/outputinvoicedetail.vue":"STP+","./invoice/outputinvoice/outputinvoicelist.vue":"NchG","./invoice/outputinvoice/outputinvoiceresultdetail.vue":"owjh","./invoice/outputinvoice/outputinvoiceresultlist.vue":"lYaw","./layout/Layout.vue":"AkUR","./layout/components/AppMain.vue":"BoPo","./layout/components/Navbar.vue":"6k2e","./layout/components/Sidebar/SidebarItem.vue":"tlvQ","./layout/components/Sidebar/index.vue":"WTox","./layout/components/TagsView.vue":"Vg/Y","./login/index.vue":"T+/8","./outnotice/newoutnotice.vue":"l9QO","./outnotice/outnoticedetail.vue":"Zbav","./outnotice/outnoticelist.vue":"QnVu","./outstore/newoutstore.vue":"jQCD","./outstore/outstoredetail.vue":"6x16","./outstore/outstorelist.vue":"rRYy","./payment/Component/orderchoice.vue":"9Mqp","./payment/newpayment.vue":"nYVg","./payment/paymentdetail.vue":"+FKn","./payment/paymentlist.vue":"7YkZ","./payresult.vue":"Ixep","./planorder/newplanorder.vue":"cmzJ","./planorder/plandetail.vue":"BuOd","./planorder/planorderlist.vue":"baFT","./purchaseorder/newpurchaseorder.vue":"QGlg","./purchaseorder/purchaseorderdetail.vue":"Irgn","./purchaseorder/purchaseorderlist.vue":"W/yb","./quotation/newquotationorder.vue":"96He","./quotation/quotationorderdetail.vue":"XGXK","./quotation/quotationorderlist.vue":"htXt","./receivable/Component/orderchoice.vue":"yJ5x","./receivable/newreceivable.vue":"wOYz","./receivable/receivabledetail.vue":"TLhU","./receivable/receivablelist.vue":"gLd7","./saleorder/newsaleorder.vue":"Kxul","./saleorder/saleorderdetail.vue":"whyo","./saleorder/saleorderlist.vue":"DQ9r","./stock/stocklist.vue":"S4EE","./table/index.vue":"YBQJ","./tableComponent/product.vue":"m2Lx","./tableComponent/purchasetable.vue":"YGj+","./tableComponent/quotationtable.vue":"5mLW","./tableComponent/saletable.vue":"8RBQ","./tableComponent/stocktable.vue":"Zlwr","./tree/index.vue":"TfcR"};function r(e){return a(o(e))}function o(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="EtAD"},F6wA:function(e,t){},Ft6E:function(e,t){},GjlW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("sJ5/"),u=a("NYxO"),d=a("0xDb"),p={data:function(){return{planform:{innotice:{ticketno:"",instore:"",instorename:"",indate:"",enterprise:"",enterprisename:"",servicer:"",servicername:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",suminnum:"",sumordernum:"",linkaddress:"",linkuser:"",linktel:"",purchorder:"",closed:"",memos:"",isdelete:"",postindate:[]},innoticeItems:[]},statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],list:[],pagesize:10,pageindex:1,total:0,currentPage:1,multipleSelection:[],deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"}],loading:!1}},computed:s()({printno:function(){var e=this,t=[];return this.multipleSelection.map(function(a){1===a.closed?(e.$message({message:a.ticketno+"已经完结,不支持打印",type:"warning"}),e.$refs.multipleTable.toggleRowSelection(a)):t.push(a.ticketno)}),t.toString()}},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{printUrl:d.i,cancelCheck:function(){this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){1===e.closed?this.$message("该订单已完结, 无法打印"):this.multipleSelection=e},handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this;this.loading=!0;var t=this.planform.innotice;t.postindate&&t.postindate.length&&(t.instartdate=t.postindate[0],t.inenddate=t.postindate[1],t.indate="");var a={},n=!0,o=!1,l=void 0;try{for(var u,d=i()(r()(t));!(n=(u=d.next()).done);n=!0){var p=u.value;""!==t[p]&&(a[p]=t[p])}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}Object(c.i)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={innotice:{},innoticeItems:[]}},nextpage:function(e){this.$router.push({name:"innoticedetail",params:{ticketno:e.ticketno}})},nextpurchasepage:function(e){this.$router.push({name:"purchaseorderdetail",params:{ticketno:e.purchorder}})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货通知单号",prop:"innotice.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.innotice.ticketno,callback:function(t){e.$set(e.planform.innotice,"ticketno",t)},expression:"planform.innotice.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联采购单号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.innotice.purchorder,callback:function(t){e.$set(e.planform.innotice,"purchorder",t)},expression:"planform.innotice.purchorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"送货企业",prop:"innotice.servicer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.innotice.servicer,callback:function(t){e.$set(e.planform.innotice,"servicer",t)},expression:"planform.innotice.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"计划到货日期",prop:"innotice.postindate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.innotice.postindate,callback:function(t){e.$set(e.planform.innotice,"postindate",t)},expression:"planform.innotice.postindate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建人",prop:"innotice.createuser"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.innotice.createuser,callback:function(t){e.$set(e.planform.innotice,"createuser",t)},expression:"planform.innotice.createuser"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"350px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[a("span",[e._v("订单列表")]),e._v(" "),e.printno?[a("a",{attrs:{href:e.printUrl("bss_receiving_BatchPrint",e.printno),target:"_blank"}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"}},[e._v("\r\n              打印选中\r\n            ")])],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:e.cancelCheck}},[e._v("\r\n            取消选中\r\n          ")])]:[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",disabled:""}},[e._v("\r\n            打印选中\r\n          ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",disabled:""}},[e._v("\r\n            取消选中\r\n          ")])]],2),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"收货通知单号",fixed:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpage(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联采购单号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpurchasepage(t.row)}}},[e._v(e._s(t.row.purchorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"送货企业",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.servicername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库仓库",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.instorename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划到达时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.indate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系电话",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linktel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.suminnum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("pmKY")},"data-v-ebf37f7a",null);t.default=f.exports},GkkR:function(e,t){},HQwj:function(e,t){},IXOt:function(e,t){},IcnI:function(e,t,a){"use strict";var n=a("7+uW"),r=a("NYxO"),o=a("//Fk"),i=a.n(o),l=a("lbHh"),s=a.n(l),c=a("sJ5/"),u={state:{sidebar:{opened:!+s.a.get("sidebarStatus")},storeList:[],gysData:[]},mutations:{TOGGLE_SIDEBAR:function(e){e.sidebar.opened?s.a.set("sidebarStatus",1):s.a.set("sidebarStatus",0),e.sidebar.opened=!e.sidebar.opened},SET_STORELIST:function(e,t){e.storeList=t},SET_GYSLIST:function(e,t){e.gysData=t}},actions:{ToggleSideBar:function(e){(0,e.commit)("TOGGLE_SIDEBAR")},GetStoreList:function(e){var t=e.commit;return new i.a(function(e,a){Object(c.w)().then(function(a){var n=a.data;t("SET_STORELIST",n),e()}).catch(function(e){a(e)})})},GetGysList:function(e){var t=e.commit;return new i.a(function(e,a){Object(c.F)().then(function(a){var n=a.data;t("SET_GYSLIST",n),e()}).catch(function(e){a(e)})})}}},d=a("Gu7T"),p=a.n(d),m=a("M9A7"),f="Admin-Token";function v(){return s.a.remove(f)}var h={state:{token:s.a.get(f),name:"",avatar:"",company:"",companyId:"",roles:[],userInfo:{}},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_NAME:function(e,t){e.name=t},SET_COMPANY:function(e,t){e.company=t},SET_COMPANYID:function(e,t){e.companyId=t},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t},SET_USERINFO:function(e,t){e.userInfo=t}},actions:{Login:function(e,t){var a=e.commit,n=t.username.trim();return new i.a(function(e,r){Object(m.d)(n,t.password).then(function(t){var n;n="9528token",s.a.set(f,n),a("SET_TOKEN","9528token"),e()}).catch(function(e){r(e)})})},GetInfo:function(e){var t=e.commit;e.state;return new i.a(function(e,a){Object(m.b)().then(function(a){console.log(a);var n=a.data,r=[];n.type&&n.sale&&n.purchase&&(r=[n.type.toString()+n.sale+n.purchase]),t("SET_ROLES",[].concat(p()(r),p()(n.roles))),t("SET_NAME",n.truename),t("SET_AVATAR","/static/img/401.089007e.gif"),t("SET_COMPANY",n.companyname),t("SET_COMPANYID",n.companyid),t("SET_USERINFO",n),e(a)}).catch(function(e){console.log(e),a(e)})})},LogOut:function(e){var t=e.commit;e.state;return new i.a(function(e,a){Object(m.e)().then(function(){t("SET_TOKEN",""),t("SET_ROLES",[]),v(),e()}).catch(function(e){a(e)})})},CsjLogOut:function(e){var t=e.commit;e.state;return new i.a(function(e,a){Object(m.a)().then(function(){t("SET_TOKEN",""),t("SET_ROLES",[]),v(),e()}).catch(function(e){a(e)})})},FedLogOut:function(e){var t=e.commit;return new i.a(function(e){t("SET_TOKEN",""),v(),e()})}}},b=a("vLgD");var _={state:{menu:[]},mutations:{SET_MENU:function(e,t){e.menu=t}},actions:{GetMenu:function(e){var t=e.commit;return new i.a(function(e,a){Object(b.a)({url:"/api/sys/menu",method:"get",data:{}}).then(function(a){var n=a.data;t("SET_MENU",n),e()}).catch(function(e){a(e)})})}}},g=a("BO1k"),w=a.n(g),y=a("d7EF"),k=a.n(y),x={state:{visitedViews:[],cachedViews:[]},mutations:{ADD_VISITED_VIEWS:function(e,t){e.visitedViews.some(function(e){return e.path===t.path})||(e.visitedViews.push({name:t.name,path:t.path,title:t.meta.title||"no-name"}),t.meta.noCache||e.cachedViews.push(t.name))},DEL_VISITED_VIEWS:function(e,t){var a=!0,n=!1,r=void 0;try{for(var o,i=w()(e.visitedViews.entries());!(a=(o=i.next()).done);a=!0){var l=o.value,s=k()(l,2),c=s[0];if(s[1].path===t.path){e.visitedViews.splice(c,1);break}}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}var u=!0,d=!1,p=void 0;try{for(var m,f=w()(e.cachedViews);!(u=(m=f.next()).done);u=!0){var v=m.value;if(v===t.name){var h=e.cachedViews.indexOf(v);e.cachedViews.splice(h,1);break}}}catch(e){d=!0,p=e}finally{try{!u&&f.return&&f.return()}finally{if(d)throw p}}},DEL_OTHERS_VIEWS:function(e,t){var a=!0,n=!1,r=void 0;try{for(var o,i=w()(e.visitedViews.entries());!(a=(o=i.next()).done);a=!0){var l=o.value,s=k()(l,2),c=s[0];if(s[1].path===t.path){e.visitedViews=e.visitedViews.slice(c,c+1);break}}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}var u=!0,d=!1,p=void 0;try{for(var m,f=w()(e.cachedViews);!(u=(m=f.next()).done);u=!0){var v=m.value;if(v===t.name){var h=e.cachedViews.indexOf(v);e.cachedViews=e.cachedViews.slice(h,v+1);break}}}catch(e){d=!0,p=e}finally{try{!u&&f.return&&f.return()}finally{if(d)throw p}}},DEL_ALL_VIEWS:function(e){e.visitedViews=[],e.cachedViews=[]}},actions:{addVisitedViews:function(e,t){(0,e.commit)("ADD_VISITED_VIEWS",t)},delVisitedViews:function(e,t){var a=e.commit,n=e.state;return new i.a(function(e){a("DEL_VISITED_VIEWS",t),e([].concat(p()(n.visitedViews)))})},delOthersViews:function(e,t){var a=e.commit,n=e.state;return new i.a(function(e){a("DEL_OTHERS_VIEWS",t),e([].concat(p()(n.visitedViews)))})},delAllViews:function(e){var t=e.commit,a=e.state;return new i.a(function(e){t("DEL_ALL_VIEWS"),e([].concat(p()(a.visitedViews)))})}}},S=a("YaEn");var O={state:{routers:S.b,addRouters:[]},mutations:{SET_ROUTERS:function(e,t){e.addRouters=t,e.routers=S.b.concat(t)}},actions:{GenerateRoutes:function(e,t){var a=e.commit;return new i.a(function(e){var n=t.roles,r=void 0;r=n.indexOf("service_admin")>=0?S.a:function e(t,a){return t.filter(function(t){return!!function(e,t){return!t.meta||!t.meta.roles||e.some(function(e){return t.meta.roles.indexOf(e)>=0})}(a,t)&&(t.children&&t.children.length&&(t.children=e(t.children,a)),!0)})}(S.a,n),a("SET_ROUTERS",r),e()})}}},I={sidebar:function(e){return e.app.sidebar},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},roles:function(e){return e.user.roles},company:function(e){return e.user.company},companyId:function(e){return e.user.companyId},userInfo:function(e){return e.user.userInfo},visitedViews:function(e){return e.tagsView.visitedViews},cachedViews:function(e){return e.tagsView.cachedViews},menu:function(e){return e.menu.menu},permission_routers:function(e){return e.permission.routers},addRouters:function(e){return e.permission.addRouters},storeList:function(e){return e.app.storeList},gysList:function(e){return e.app.gysData},isallow:function(e){return e.user.roles.includes("service_business_verify")||e.user.roles.includes("service_admin")},isallownew:function(e){return e.user.roles.includes("service_business_verify")||e.user.roles.includes("service_business")||e.user.roles.includes("service_admin")}};n.default.use(r.a);var C=new r.a.Store({modules:{app:u,user:h,menu:_,permission:O,tagsView:x},getters:I});t.a=C},IePS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("E7jB"),i=a("0TzL"),l=a("NYxO"),s=a("vHhr"),c=a("0xDb"),u={components:{Sticky:s.a},data:function(){return{form:{eptBidMain:{},eptBidItems:[]},fetchSuccess:!0,loading:!1,jbloading:!1,topShow:!0,sort:"",sortClass:"",reflashLoading:!1,reflashShow:!1,edit:!1,rules:{eptBidMain:{makebidtime:[{required:!0,message:"请选择竞标时间",trigger:"change"}]},eptBidItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("竞标物品明细不能空"));setTimeout(function(){t.forEach(function(e){if(!e.supplierno||!e.bidprice)return a(new Error("物品明细的竞标方货号和本轮竞标价必填"))}),a()},300)},required:!0,trigger:"blur"}]}}},computed:r()({totalAmount:function(){var e=0;return this.form.eptBidItems.forEach(function(t){e+=t.bidprice*t.pdtnumber}),e},hasrole:function(){return this.roles.includes("710")}},Object(l.b)(["company","companyId","roles"])),filters:{parseTime:c.h,parseType:function(e){return 0===e||"0"===e?"明细招标":1===e||"1"===e?"品类招标":e}},created:function(){this.getDetail()},methods:{getDetail:function(){var e=this;Object(o.b)({id:this.$route.params.id}).then(function(t){console.log(t),e.form=t.data,e.reflashShow=!0,e.getBidSort()}).catch(function(t){console.log(t),e.fetchSuccess=!1})},getBidSort:function(){var e=this;this.reflashLoading=!0,this.sortClass="",Object(o.d)({bdnumber:this.form.eptBidMain.bdnumber,tpnumber:this.form.eptBidMain.tpnumber}).then(function(t){console.log(t),e.sort=t.data,e.reflashLoading=!1,e.sortClass="active"}).catch(function(t){console.log(t),e.reflashLoading=!1})},rebid:function(){this.edit=!this.edit},cancelbid:function(){this.$router.go(0)},doAddOrUpdateEtpBid:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.jbloading=!0,e.edit=!e.edit;var a={etpBidMain:e.form.eptBidMain,items:e.form.eptBidItems};Object(i.a)(a).then(function(t){console.log(t),e.jbloading=!1,e.$alert("报价成功","提示",{confirmButtonText:"确定",type:"success",callback:function(a){e.$router.push({name:"biddetail",params:{id:t.data}})}})}).catch(function(t){console.log(t),e.jbloading=!1})})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.topShow&&"正在竞标"===e.form.eptBidMain.zbStatus?a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"},{name:"loading",rawName:"v-loading",value:e.jbloading,expression:"jbloading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.doAddOrUpdateEtpBid}},[e._v("提交报价\r\n      ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"edit"}],attrs:{type:"warning"},on:{click:e.rebid}},[e._v("取消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.edit&&"正在竞标"===e.form.eptBidMain.zbStatus&&e.hasrole,expression:"!edit && form.eptBidMain.zbStatus === '正在竞标' && hasrole"}],attrs:{type:"warning"},on:{click:e.rebid}},[e._v("再次报价")])]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"招标单号"}},[e._v("\r\n            "+e._s(e.form.eptBidMain.tpnumber)+"\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{"label-width":"0"}},[e._v("\r\n            当前排名"),a("span",{staticClass:"sort",class:e.sortClass},[e._v(e._s(e.sort))]),e._v("位\r\n            "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.reflashLoading,expression:"reflashLoading"},{name:"show",rawName:"v-show",value:e.reflashShow,expression:"reflashShow"}],attrs:{type:"text"},on:{click:e.getBidSort}},[e._v("刷新")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"招标标题"}},[e._v("\r\n        "+e._s(e.form.eptBidMain.zbTitle)+"\r\n      ")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标总金额"}},[e._v("\r\n            "+e._s(e.totalAmount)+"元\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标时间",prop:"eptBidMain.makebidtime"}},[e.edit?[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.form.eptBidMain.makebidtime,callback:function(t){e.$set(e.form.eptBidMain,"makebidtime",t)},expression:"form.eptBidMain.makebidtime"}})]:[e.form.eptBidMain.makebidtime?a("span",[e._v(e._s(e._f("parseTime")(e.form.eptBidMain.makebidtime)))]):e._e()]],2)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标单位"}},[e._v("\r\n            "+e._s(e.form.eptBidMain.servername)+"\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标状态"}},[a("el-tag",{attrs:{type:"已中标"===e.form.eptBidMain.status||"部分中标"===e.form.eptBidMain.status?"success":"竞标结束"===e.form.eptBidMain.status?"info":"primary"}},[e._v(e._s(e.form.eptBidMain.status))])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"竞标备注"}},[e.edit?[a("el-input",{staticStyle:{float:"right"},attrs:{type:"textarea",rows:"5",placeholder:"竞标备注"},model:{value:e.form.eptBidMain.beizhu,callback:function(t){e.$set(e.form.eptBidMain,"beizhu",t)},expression:"form.eptBidMain.beizhu"}})]:[e._v("\r\n          "+e._s(e.form.eptBidMain.beizhu)+"\r\n        ")]],2),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("招标物品明细")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"eptBidItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.eptBidItems,border:""}},[a("el-table-column",{attrs:{label:"中标状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"已中标"===t.row.bidstatus?"success":"info"}},[e._v(e._s(t.row.bidstatus?t.row.bidstatus:"未中标"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.thirdlevno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdlev",label:"小分类名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品编号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtbrand))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtmodel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtprice,callback:function(a){e.$set(t.row,"pdtprice",a)},expression:"scope.row.pdtprice"}})]:a("span",[e._v(e._s(t.row.pdtprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标方货号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.supplierno,callback:function(a){e.$set(t.row,"supplierno",a)},expression:"scope.row.supplierno"}})]:a("span",[e._v(e._s(t.row.supplierno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本轮竞标价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.bidprice,callback:function(a){e.$set(t.row,"bidprice",a)},expression:"scope.row.bidprice"}})]:a("span",[e._v(e._s(t.row.bidprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小计",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                  "+e._s(1e3*t.row.bidprice*t.row.pdtnumber/1e3)+"\r\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.beizhu,callback:function(a){e.$set(t.row,"beizhu",a)},expression:"scope.row.beizhu"}})]:a("span",[e._v(e._s(t.row.beizhu))])]}}])})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("2hbZ")},"data-v-40465e76",null);t.default=p.exports},Irgn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("8hSj"),l=a("NYxO"),s=a("vHhr"),c=a("0xDb"),u={components:{Sticky:s.a},data:function(){return{planform:{purchorder:{},purchorderItems:[]},fetchSuccess:!0,delloading:!1}},computed:r()({sumordernum:function(){var e=0;return this.planform.purchorderItems.forEach(function(t){e+=t.ordernum}),e},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.purchorder.revstore&&(t=a.storename)}),t}},Object(l.b)(["company","companyId","userInfo","visitedViews","isallow","isallownew"])),filters:{parseTime:c.h,paymethodFilter:function(e){switch(parseInt(e)){case 1:return"货到付款";case 2:return"货到票到付款";case 3:return"先款后货";default:return""}},deliverwayFilter:function(e){switch(parseInt(e)){case 1:return"库发";case 2:return"供应商直发";case 3:return"自提";default:return""}}},created:function(){this.getDetail()},methods:{Modify:i.a,delpurchorder:function(){var e=this,t=this.visitedViews.filter(function(t){return t.path===e.$route.path});this.$confirm("确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){Object(o.m)({ticketNo:e.$route.params.ticketno,checkFlag:3}).then(function(a){e.$message({message:"删除成功"}),e.$store.dispatch("delVisitedViews",t[0]).then(function(){e.$router.push({name:"purchorderlist"})})})})},getDetail:function(){var e=this;Object(o.r)({ticketno:this.$route.params.ticketno,flag:0}).then(function(t){console.log(t),e.planform=t.data}).catch(function(t){console.log(t),e.fetchSuccess=!1})},nextpage:function(e,t){var a={purchorder:this.$route.params.ticketno};t&&(a.type=t),this.$router.push({name:e,params:a})},Edit:function(){this.$router.push({name:"newpurchaseorder",params:{enquiryorder:this.planform.purchorder.enquiryorder},query:{id:this.$route.params.ticketno}})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[1==e.planform.purchorder.status&&e.isallownew?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:1==e.planform.purchorder.closed},on:{click:function(t){e.nextpage("newinnotice")}}},[e._v("登记收货通知单")]):-1==e.planform.purchorder.status||-2==e.planform.purchorder.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"purchorder")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.purchorder.status&&e.isallow?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"purchorder")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"purchorder")}}},[e._v("驳回")])]:[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("详情")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"采购订单号"}},[e._v("\r\n          "+e._s(e.planform.purchorder.ticketno)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划到货日期",prop:"purchorder.planarrivedate"}},[e._v("\r\n          "+e._s(e.planform.purchorder.planarrivedate)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人电话",prop:"purchorder.linktel"}},[e._v("\r\n          "+e._s(e.planform.purchorder.linktel)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"purchorder.linkusername"}},[e._v("\r\n          "+e._s(e.planform.purchorder.linkusername)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货方式",prop:"purchorder.deliverway"}},[e._v("\r\n          "+e._s(e._f("deliverwayFilter")(e.planform.purchorder.deliverway))+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"供应商",prop:"purchorder.servicer"}},[e._v("\r\n          "+e._s(e.planform.purchorder.servicername)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方式",prop:"purchorder.paymethod"}},[e._v("\r\n          "+e._s(e._f("paymethodFilter")(e.planform.purchorder.paymethod))+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"到达仓库",prop:"purchorder.revstore"}},[e._v("\r\n          "+e._s(e.planform.purchorder.revstorename)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"来源计划单号",prop:"purchorder.ticketno"}},[e._v("\r\n          "+e._s(e.planform.purchorder.enquiryorder)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货地址",prop:"purchorder.receiveaddress"}},[e._v("\r\n          "+e._s(e.planform.purchorder.receiveaddress)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号"}},[e._v("\r\n          "+e._s(e.planform.purchorder.contractno)+"\r\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        采购单物品明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"purchorderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.purchorderItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.custommaterialno,callback:function(a){e.$set(t.row,"custommaterialno",a)},expression:"scope.row.custommaterialno"}})]:a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialname,callback:function(a){e.$set(t.row,"materialname",a)},expression:"scope.row.materialname"}})]:a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialtag,callback:function(a){e.$set(t.row,"materialtag",a)},expression:"scope.row.materialtag"}})]:a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialrule,callback:function(a){e.$set(t.row,"materialrule",a)},expression:"scope.row.materialrule"}})]:a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialsize,callback:function(a){e.$set(t.row,"materialsize",a)},expression:"scope.row.materialsize"}})]:a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderunit,callback:function(a){e.$set(t.row,"orderunit",a)},expression:"scope.row.orderunit"}})]:a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderprice,callback:function(a){e.$set(t.row,"orderprice",a)},expression:"scope.row.orderprice"}})]:a("span",[e._v(e._s(t.row.orderprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderprice*t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.taxrate,callback:function(a){e.$set(t.row,"taxrate",a)},expression:"scope.row.taxrate"}})]:a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}})]:a("span",[e._v(e._s(t.row.memos))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("GkkR")},"data-v-3b5af5ee",null);t.default=p.exports},ItCA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"Activity name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Activity zone"}},[a("el-select",{attrs:{placeholder:"please select your zone"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[a("el-option",{attrs:{label:"Zone one",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"Zone two",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Activity time"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Pick a date"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"Pick a time"},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Instant delivery"}},[a("el-switch",{model:{value:e.form.delivery,callback:function(t){e.$set(e.form,"delivery",t)},expression:"form.delivery"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Activity type"}},[a("el-checkbox-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-checkbox",{attrs:{label:"Online activities",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"Promotion activities",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"Offline activities",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"Simple brand exposure",name:"type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Resources"}},[a("el-radio-group",{model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[a("el-radio",{attrs:{label:"Sponsor"}}),e._v(" "),a("el-radio",{attrs:{label:"Venue"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Activity form"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("Create")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("Cancel")])],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({data:function(){return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},methods:{onSubmit:function(){this.$message("submit!")},onCancel:function(){this.$message({message:"cancel!",type:"warning"})}}},n,!1,function(e){a("zuQA")},"data-v-ca3b0244",null);t.default=r.exports},Ixep:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"app-container"})},staticRenderFns:[]};var r=a("VU/8")({created:function(){var e=this;this.$alert("支付成功","提示",{confirmButtonText:"确定",type:"success",callback:function(t){e.$router.push("/")}})}},n,!1,function(e){a("lNUM")},null,null);t.default=r.exports},Jtiv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("ehIy"),u=a("0xDb"),d=a("8hSj"),p=a("vHhr"),m=a("NYxO"),f={components:{Sticky:p.a},data:function(){return{planform:{OutputInvoice:{},OutputInvoiceItems:[]},fetchSuccess:!0,loading:!1,makeoutinvoiceRules:{OutputInvoice:{invoiceno:[{required:!0,message:"请输入发票号",trigger:"blur"}],invoicedate:[{required:!0,message:"请选择开票日期",trigger:"change"}]}}}},computed:s()({},Object(m.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews"})),created:function(){this.getOutputInvoiceDetail()},methods:{Modify:d.a,reflashData:function(){var e=0,t=0,a=0,n=0;this.planform.OutputInvoiceItems.map(function(r){e+=r.invoicenum*r.price,t=t+r.invoicenum*r.price-r.invoicenum*r.price/(1+r.taxrate/100),a+=r.invoicenum*r.price/(1+r.taxrate/100),n+=r.invoicenum}),this.planform.OutputInvoice.invoiceamount=e.toFixed(2),this.planform.OutputInvoice.taxamount=t.toFixed(2),this.planform.OutputInvoice.invoicenum=n.toFixed(2),this.planform.OutputInvoice.pretaxamount=a.toFixed(2)},submitForm:function(){var e=this;this.$refs.postForm.validate(function(t){if(t){var a={outputInvoice:e.planform.OutputInvoice,outputInvoiceItems:e.planform.OutputInvoiceItems},n=e.visitedViews.filter(function(t){return t.path===e.$route.path});a.outputInvoice.invoicedate&&(a.outputInvoice.invoicedate=Object(u.h)(a.outputInvoice.invoicedate)),a.outputInvoice.updateflag=1,Object(c.c)(a).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("开票成功！","提示",{confirmButtonText:"详情",cancelButtonText:"关闭",type:"success"}).then(function(a){e.$store.dispatch("delVisitedViews",n[0]).then(function(){e.$router.push({name:"outputinvoiceresultdetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",n[0]).then(function(){e.$router.push("/")})})}).catch(function(e){console.log(e)})}})},nextpage:function(e,t){this.$router.push({name:e,params:{ticketno:this.$route.params.ticketno}})},getOutputInvoiceDetail:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.g)({OutputInvoice:{ticketno:e.$route.params.ticketno}}).then(function(t){console.log(t),e.planform.OutputInvoice=t.data.data[0],e.planform.OutputInvoice.applyinvoice=e.planform.OutputInvoice.ticketno,e.planform.OutputInvoice.ticketno="",e.planform.OutputInvoice.status=0}).catch(function(t){console.log(t),e.fetchSuccess=!1});case 2:return t.next=4,Object(c.h)({ticketNo:e.$route.params.ticketno}).then(function(t){console.log(t);var a=t.data;a.map(function(e){e.edit=!0,e.bakinvoicenum=e.invoicenum,e.invoicenum=e.planinvoicenum-e.bakinvoicenum,e.invoiceamount=e.invoicenum*e.price,e.pretaxamount=parseFloat((e.invoicenum*e.price/(1+e.taxrate/100)).toFixed(2)),e.taxamount=parseFloat((e.invoicenum*e.price-e.pretaxamount).toFixed(2))}),e.planform.OutputInvoiceItems=a,e.reflashData()}).catch(function(t){console.log(t),e.fetchSuccess=!1});case 4:case"end":return t.stop()}},t,e)}))()}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createPost-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:!e.planform.OutputInvoiceItems.length},on:{click:e.submitForm}},[e._v("提交")])]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.planform,rules:e.makeoutinvoiceRules}},[a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{attrs:{span:21}},[a("div",{staticClass:"postInfo-container"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"申请开票单号:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.applyinvoice)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"客户:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.customername)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"最迟开票日期:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.lastinvoicedate)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"申请开票金额:"}},[e._v("\n                  ￥"+e._s(e.planform.OutputInvoice.planinvoiceamount)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"单据状态:"}},[e._v("\n                  "+e._s(e._f("statusFilter")(e.planform.OutputInvoice.status))+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"税前金额:"}},[e._v("\n                  ￥"+e._s(e.planform.OutputInvoice.pretaxamount)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"税额:"}},[e._v("\n                  ￥"+e._s(e.planform.OutputInvoice.taxamount)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"实际开票金额:"}},[e._v("\n                  ￥"+e._s(e.planform.OutputInvoice.invoiceamount)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"80px",label:"申请人:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.createuser)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.planform.OutputInvoice.checkuser,expression:"planform.OutputInvoice.checkuser"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"审核人:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.checkuser)+"\n                ")])],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.planform.OutputInvoice.checkdate,expression:"planform.OutputInvoice.checkdate"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"审核日期:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.checkdate)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"发票号:",prop:"OutputInvoice.invoiceno"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入发票号"},model:{value:e.planform.OutputInvoice.invoiceno,callback:function(t){e.$set(e.planform.OutputInvoice,"invoiceno",t)},expression:"planform.OutputInvoice.invoiceno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"开票日期:",prop:"OutputInvoice.invoicedate"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:e.planform.OutputInvoice.invoicedate,callback:function(t){e.$set(e.planform.OutputInvoice,"invoicedate",t)},expression:"planform.OutputInvoice.invoicedate"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"45px",label:"备注:"}},[a("el-input",{staticClass:"article-textarea",attrs:{type:"textarea",rows:1,autosize:"",placeholder:"请输入内容"},model:{value:e.planform.OutputInvoice.memos,callback:function(t){e.$set(e.planform.OutputInvoice,"memos",t)},expression:"planform.OutputInvoice.memos"}})],1)],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"0"}},[a("el-table",{ref:"OutputInvoiceTable",staticStyle:{width:"100%"},attrs:{data:e.planform.OutputInvoiceItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"出库单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售订单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.saleorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购合同号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pretaxamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税额",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",fixed:"right",label:"计划开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",fixed:"right",label:"已开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.bakinvoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本次开票数量",fixed:"right",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{staticStyle:{"max-width":"150px"},attrs:{min:1,max:t.row.planinvoicenum-t.row.bakinvoicenum},on:{change:e.reflashData},model:{value:t.row.invoicenum,callback:function(a){e.$set(t.row,"invoicenum",a)},expression:"scope.row.invoicenum"}})]:a("span",[e._v(e._s(t.row.invoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票金额",fixed:"right",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.invoicenum*t.row.price).toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"110",label:"大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticStyle:{"max-width":"150px"},model:{value:t.row.bigcategoryname,callback:function(a){e.$set(t.row,"bigcategoryname",a)},expression:"scope.row.bigcategoryname"}})]:a("span",[e._v(e._s(t.row.bigcategoryname))])]}}])})],1)],1)],1)])],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("LoVF")},"data-v-4d5017b2",null);t.default=h.exports},KL2l:function(e,t){},KRDl:function(e,t){},Kkn8:function(e,t){},Kxul:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Gu7T"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("mvHQ"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("sJ5/"),p=a("NYxO"),m=a("0xDb"),f={name:"newsaleorder",data:function(){return{planform:{saleOrder:{ticketno:"",customer:this.$route.query.customer,customername:"",planarrivedate:"",sumordernum:"",sumorderamount:"",sumsendnum:"",contractno:"",status:"",createuser:"",createdate:"",createtime:"",checkuser:"",checkdate:"",checktime:"",checkadvice:"",enterprise:"",enterprisename:"",recmethod:"",deliverway:"",receiveaddress:"",linkusername:"",linktel:"",customerorderno:"",sumtaxamount:"",store:"",storename:"",closed:"",memos:"",enquiryorder:this.$route.params.enquiryorder},saleOrderItems:[]},rules:{saleOrder:{planarrivedate:[{required:!0,message:"请选择到货日期",trigger:"change"}],linktel:[{required:!0,message:"收货人电话",trigger:"change"}],receiveaddress:[{required:!0,message:"请输入交货地址",trigger:"blur"}],contractno:[{required:!0,message:"请输入合同编号",trigger:"blur"}],linkusername:[{required:!0,message:"请输入收货人",trigger:"blur"}],deliverway:[{required:!0,message:"请选择交货方式",trigger:"change"}],customer:[{required:!0,message:"请选择客户",trigger:"change"}],recmethod:[{required:!0,message:"请选择付款方式",trigger:"change"}],store:[{required:!0,message:"请选择发货仓库",trigger:"change"}]},saleOrderItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("招标物品明细不能空"));setTimeout(function(){t.forEach(function(e){return e.orderunit?e.materialname?void 0:a(new Error("请输入商品名称")):a(new Error("请输入单位"))}),a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/excel/saleOrder/export",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,multipleSelection:[],submitloading:!1,deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"},{name:"自提",value:"3"}],fetchSuccess:!0}},computed:u()({sumorderamount:function(){var e=0;return this.planform.saleOrderItems.forEach(function(t){e+=t.ordernum*t.saleprice}),e},sumordernum:function(){var e=0;return this.planform.saleOrderItems.forEach(function(t){e+=t.ordernum}),e},enterprisename:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.saleOrder.enterprise&&(t=a.name)}),t},customername:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.saleOrder.customer&&(t=a.name)}),t},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.saleOrder.store&&(t=a.storename)}),t}},Object(p.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:m.h},created:function(){var e=this;this.gridData.length||this.$store.dispatch("GetGysList"),this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.$route.params.enquiryorder||this.$alert("请先选择计划单再创建销售单").then(function(t){e.$router.push({name:"planorderlist"})}),this.$route.query.id&&this.getDetail()},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort(e))},getDetail:function(){var e=this;Object(d.t)({ticketno:this.$route.query.id}).then(function(t){console.log(t),e.planform=t.data,e.fetchSuccess=!0}).catch(function(t){console.log(t),e.fetchSuccess=!1})},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(console.log(t),!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path}),n=JSON.parse(s()(e.planform));n.saleOrder.customername=e.customername,n.saleOrder.createuser=e.userInfo.truename,n.saleOrder.planarrivedate=Object(m.h)(e.planform.saleOrder.planarrivedate),n.saleOrder.sumorderamount=e.sumorderamount,n.saleOrder.storename=e.storename,Object(d.D)(n).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("新建销售单成功！","提示",{confirmButtonText:"详情",cancelButtonText:"关闭",type:"success"}).then(function(n){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"saleorderdetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push("/")})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},handleUploadSuccess:function(e,t,a){var n=this;"200"===e.code?(this.$confirm(e.message,"提示",{confirmButtonText:"完成",cancelButtonText:"继续导入",type:"success"}).then(function(e){n.dialogVisible=!1}).catch(function(e){}),e.data.map(function(e){e.edit=!1}),this.planform.saleOrderItems=[].concat(r()(this.planform.saleOrderItems),r()(e.data))):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},submitUpload:function(){this.$refs.upload.submit()},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleDelete:function(e,t){this.planform.saleOrderItems.splice(e,1),this.$message({message:"成功删除一条记录！",type:"success"})},editRow:function(e){e.edit=!1},goeditrow:function(e){this.planform.saleOrderItems[e].edit=!0,this.planform=JSON.parse(s()(this.planform))},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},importEXL:function(){this.dialogVisible=!0},addDetail:function(){this.planform.saleOrderItems.push({material:"",materialno:"",materialname:"",materialrule:"",materialsize:"",materialtag:"",orderunit:"",taxrate:"",taxamount:"",ordernum:"",sendnum:"",saleprice:"",orderamount:"",closedcode:""})},handleCurrentChange:function(e){this.currentRow=e},handleSelectionChange:function(e){this.multipleSelection=e},onCancel:function(){this.$router.back()},handelDialogConfirm:function(){this.dialogTableVisible=!1,this.planform.saleOrder.customer=JSON.parse(s()(this.currentRow))},handelDialogCancel:function(){this.dialogTableVisible=!1,this.planform.saleOrder.customer=JSON.parse(s()({code:"",id:"",name:""}))},delChecked:function(){var e=this,t=this.planform.saleOrderItems.filter(function(t){return!e.multipleSelection.includes(t)});this.planform.saleOrderItems=JSON.parse(s()(t))}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划收货日期",prop:"saleOrder.planarrivedate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.saleOrder.planarrivedate,callback:function(t){e.$set(e.planform.saleOrder,"planarrivedate",t)},expression:"planform.saleOrder.planarrivedate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人电话",prop:"saleOrder.linktel"}},[a("el-input",{attrs:{type:"number"},model:{value:e.planform.saleOrder.linktel,callback:function(t){e.$set(e.planform.saleOrder,"linktel",t)},expression:"planform.saleOrder.linktel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货地址",prop:"saleOrder.receiveaddress"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.saleOrder.receiveaddress,callback:function(t){e.$set(e.planform.saleOrder,"receiveaddress",t)},expression:"planform.saleOrder.receiveaddress"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"saleOrder.linkusername"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.saleOrder.linkusername,callback:function(t){e.$set(e.planform.saleOrder,"linkusername",t)},expression:"planform.saleOrder.linkusername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款方式",prop:"saleOrder.recmethod"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.planform.saleOrder.recmethod,callback:function(t){e.$set(e.planform.saleOrder,"recmethod",t)},expression:"planform.saleOrder.recmethod"}},[a("el-option",{attrs:{label:"货到收款",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"预收款",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户",prop:"saleOrder.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.saleOrder.customer,callback:function(t){e.$set(e.planform.saleOrder,"customer",t)},expression:"planform.saleOrder.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号",prop:"saleOrder.contractno"}},[a("el-input",{model:{value:e.planform.saleOrder.contractno,callback:function(t){e.$set(e.planform.saleOrder,"contractno",t)},expression:"planform.saleOrder.contractno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货方式",prop:"saleOrder.deliverway"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.saleOrder.deliverway,callback:function(t){e.$set(e.planform.saleOrder,"deliverway",t)},expression:"planform.saleOrder.deliverway"}},e._l(e.deliverway,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[1==e.planform.saleOrder.deliverway?a("el-form-item",{attrs:{label:"发出仓库",prop:"saleOrder.store"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"发出仓库","prefix-icon":"el-icon-search"},model:{value:e.planform.saleOrder.store,callback:function(t){e.$set(e.planform.saleOrder,"store",t)},expression:"planform.saleOrder.store"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"来源计划单号",prop:"saleOrder.enquiryorder"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.planform.saleOrder.enquiryorder,callback:function(t){e.$set(e.planform.saleOrder,"enquiryorder",t)},expression:"planform.saleOrder.enquiryorder"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        销售单明细\r\n        "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importEXL}},[e._v("\r\n          导入Excel\r\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addDetail}},[e._v("\r\n          新增一行\r\n        ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.multipleSelection.length,expression:"multipleSelection.length"}],attrs:{size:"mini",type:"warning"},on:{click:e.delChecked}},[e._v("\r\n          删除选中\r\n        ")])],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"saleOrderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.saleOrderItems,border:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.itemno,callback:function(a){e.$set(t.row,"itemno",a)},expression:"scope.row.itemno"}})]:a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.custommaterialno,callback:function(a){e.$set(t.row,"custommaterialno",a)},expression:"scope.row.custommaterialno"}})]:a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialname,callback:function(a){e.$set(t.row,"materialname",a)},expression:"scope.row.materialname"}})]:a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialrule,callback:function(a){e.$set(t.row,"materialrule",a)},expression:"scope.row.materialrule"}})]:a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialsize,callback:function(a){e.$set(t.row,"materialsize",a)},expression:"scope.row.materialsize"}})]:a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialtag,callback:function(a){e.$set(t.row,"materialtag",a)},expression:"scope.row.materialtag"}})]:a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderunit,callback:function(a){e.$set(t.row,"orderunit",a)},expression:"scope.row.orderunit"}})]:a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.saleprice,callback:function(a){e.$set(t.row,"saleprice",a)},expression:"scope.row.saleprice"}})]:a("span",[e._v(e._s(t.row.saleprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderamount,callback:function(a){e.$set(t.row,"orderamount",a)},expression:"scope.row.orderamount"}})]:a("span",[e._v(e._s(t.row.orderamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.taxrate,callback:function(a){e.$set(t.row,"taxrate",a)},expression:"scope.row.taxrate"}})]:a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}})]:a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.query.id?"修改销售单":"新建销售单"))]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,name:"myFile",accept:".xls,.xlsx","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls和xlsx文件,文件最大不能超过5M。\r\n        "),a("a",{staticClass:"dlink",attrs:{href:"/static/templet/saletemplet.xls"}},[e._v("下载模板")])])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("tG1M")},"data-v-6448fddf",null);t.default=h.exports},LguS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-sale",use:"icon-sale-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-sale"><defs><style type="text/css"></style></defs><path d="M227.555556 0h568.888888a227.555556 227.555556 0 0 1 227.555556 227.555556v568.888888a227.555556 227.555556 0 0 1-227.555556 227.555556H227.555556a227.555556 227.555556 0 0 1-227.555556-227.555556V227.555556a227.555556 227.555556 0 0 1 227.555556-227.555556z m56.888888 170.666667a56.888889 56.888889 0 0 0-56.888888 56.888889h199.111111a28.444444 28.444444 0 1 0 0-56.888889H284.444444zM227.555556 284.444444a56.888889 56.888889 0 0 0 56.888888 56.888889h170.666667a56.888889 56.888889 0 0 0-56.888889-56.888889H227.555556z m28.444444 113.777778a28.444444 28.444444 0 1 0 0 56.888889H398.222222a56.888889 56.888889 0 0 0 56.888889-56.888889H256zM398.222222 341.333333v56.888889h56.888889V341.333333H398.222222zM227.555556 227.555556v56.888888h56.888888V227.555556H227.555556z m398.222222-56.888889a56.888889 56.888889 0 0 0-56.888889 56.888889h227.555555a56.888889 56.888889 0 0 0-56.888888-56.888889h-113.777778z m-56.888889 56.888889v199.111111a28.444444 28.444444 0 1 0 56.888889 0V227.555556h-56.888889z m170.666667 0v199.111111a28.444444 28.444444 0 1 0 56.888888 0V227.555556h-56.888888z m-113.777778 56.888888v56.888889h113.777778V284.444444h-113.777778z m-341.333334 512v56.888889h142.222223a28.444444 28.444444 0 1 0 0-56.888889H284.444444z m-28.444444-227.555555a28.444444 28.444444 0 0 0-28.444444 28.444444V796.444444a56.888889 56.888889 0 0 0 56.888888 56.888889v-256a28.444444 28.444444 0 0 0-28.444444-28.444444z m369.777778 227.555555v56.888889h142.222222a28.444444 28.444444 0 1 0 0-56.888889H625.777778z m0-227.555555v56.888889h142.222222a28.444444 28.444444 0 1 0 0-56.888889H625.777778z m0 113.777778v56.888889h142.222222a28.444444 28.444444 0 1 0 0-56.888889H625.777778z m0-113.777778a56.888889 56.888889 0 0 0-56.888889 56.888889v170.666666a56.888889 56.888889 0 0 0 56.888889 56.888889v-284.444444z" p-id="9884" /></symbol>'});i.a.add(l);t.default=l},LoVF:function(e,t){},M9A7:function(e,t,a){"use strict";t.d=function(e,t){return Object(n.a)({url:"/api/auth/login",method:"post",data:{account:e,password:t}})},t.b=function(){return Object(n.a)({url:"/api/user/baseInfo",method:"get"})},t.e=function(){return Object(n.a)({url:"/api/auth/logout",method:"post"})},t.a=function(){return Object(n.a)({url:"/logout",method:"get"})},t.c=function(){return Object(n.a)({url:"/apii/home",method:"get"})};var n=a("vLgD")},MCFZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-busyness",use:"icon-busyness-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-busyness"><defs><style type="text/css"></style></defs><path d="M894.122667 238.677333h-119.893334a268.928 268.928 0 0 0-75.648-159.914666A259.626667 259.626667 0 0 0 512 0C376.533333 0 264.618667 104.576 249.813333 238.677333H129.877333C58.282667 238.677333 0 298.069333 0 371.029333v520.618667C0 964.608 58.282667 1024 129.877333 1024h764.245334C965.717333 1024 1024 964.608 1024 891.648V371.029333c0-72.96-58.282667-132.352-129.877333-132.352zM512 63.018667c101.290667 0 185.429333 76.416 199.808 175.658666H312.192C326.570667 139.434667 410.709333 63.018667 512 63.018667z m382.122667 897.962666H129.877333c-37.546667 0-68.053333-31.146667-68.053333-69.333333v-240.469333a177.408 177.408 0 0 0 117.546667 44.501333h665.258666a177.408 177.408 0 0 0 117.504-44.501333v240.469333c0 38.229333-30.506667 69.333333-68.010666 69.333333z m33.578666-363.264a116.224 116.224 0 0 1-83.072 34.901334H179.370667c-31.317333 0-60.8-12.373333-83.072-34.901334a117.973333 117.973333 0 0 1-34.474667-83.498666V371.029333c0-38.229333 30.549333-69.333333 68.053333-69.333333h764.245334c37.546667 0 68.010667 31.146667 68.010666 69.333333v143.189334c0 31.402667-12.202667 61.056-34.432 83.498666zM512 364.970667c-59.306667 0-107.605333 49.194667-107.605333 109.653333 0 60.501333 48.256 109.653333 107.605333 109.653333 59.306667 0 107.605333-49.152 107.605333-109.653333 0-60.458667-48.256-109.653333-107.605333-109.653333z m0 156.288c-25.216 0-45.781333-20.906667-45.781333-46.634667s20.565333-46.634667 45.781333-46.634667 45.781333 20.906667 45.781333 46.634667-20.565333 46.634667-45.781333 46.634667z" p-id="2052" /></symbol>'});i.a.add(l);t.default=l},MOmO:function(e,t,a){e.exports=a.p+"static/img/401.089007e.gif"},Mt1n:function(e,t){},NA3b:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};a.d(n,"statusFilter",function(){return C}),a.d(n,"invoicetypeFilter",function(){return $}),a.d(n,"fundnatureFilter",function(){return D}),a.d(n,"settlementmethodFilter",function(){return z});var r=a("fZjL"),o=a.n(r),i=a("7+uW"),l=(a("uMhA"),a("zL8q")),s=a.n(l),c=(a("tvR6"),a("Vi3T")),u=a.n(c),d=(a("yh13"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view",{key:this.$route.path})],1)},staticRenderFns:[]}),p=a("VU/8")({name:"app"},d,!1,null,null,null).exports,m=a("YaEn"),f=a("IcnI"),v={name:"svg-icon",props:{iconClass:{type:String,required:!0},className:{type:String}},computed:{iconName:function(){return"#icon-"+this.iconClass},svgClass:function(){return this.className?"svg-icon "+this.className:"svg-icon"}}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{class:this.svgClass,attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":this.iconName}})])},staticRenderFns:[]};var b=a("VU/8")(v,h,!1,function(e){a("xQI/")},"data-v-ab4e0682",null).exports;i.default.component("svg-icon",b);var _,g=a("90Fk");(_=g).keys().map(_);var w=a("Dd8w"),y=a.n(w),k=a("Gu7T"),x=a.n(k),S=a("Y81h"),O=a.n(S),I=(a("UVIz"),a("0xDb"));function C(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";case 2:return"作废";default:return""}}function $(e){switch(parseInt(e)){case 1:return"增值税专用发票";case 2:return"增值税普通发票";case 3:return"普通发票";case 4:return"无票收入";default:return""}}function D(e){switch(parseInt(e)){case 1:return"货款";case 2:return"服务费";case 3:return"投标保证金";default:return""}}function z(e){switch(parseInt(e)){case 1:return"现金";case 2:return"银行转账";case 3:return"银行承兑";case 4:return"商业承兑";case 5:return"支票";default:return""}}m.c.beforeEach(function(e,t,a){var n,r;O.a.start(),"/csj_login"===e.path?(a(),O.a.done()):0===f.a.getters.roles.length?f.a.dispatch("GetInfo").then(function(t){var n=[];t.data.type&&t.data.sale&&t.data.purchase&&(n=[t.data.type.toString()+t.data.sale+t.data.purchase]);var r=t.data.roles,o=[].concat(x()(n),x()(r));f.a.dispatch("GenerateRoutes",{roles:o}).then(function(){m.c.addRoutes(f.a.getters.addRouters),a(y()({},e,{replace:!0}))})}).catch(function(){f.a.dispatch("FedLogOut").then(function(){l.MessageBox.alert("验证失败,请重新登录").then(function(e){f.a.dispatch("LogOut").then(function(){location.href=I.c+"/logout?service="+location.origin+"/csj_login"}).catch(function(){location.href=I.c+"/logout?service="+location.origin+"/csj_login"})})})}):(a(),n=f.a.getters.roles,r=e.meta.roles,n.indexOf("service_admin")>=0||!r||n.some(function(e){return r.indexOf(e)>=0})?a():a({path:"/401",replace:!0,query:{noGoBack:!0}}))}),m.c.afterEach(function(){O.a.done()}),o()(n).forEach(function(e){i.default.filter(e,n[e])}),i.default.use(s.a,{locale:u.a}),i.default.config.productionTip=!1,new i.default({el:"#app",router:m.c,store:f.a,template:"<App/>",components:{App:p}})},NchG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("pFYg"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("woOf"),p=a.n(d),m=a("0xDb"),f=a("ehIy"),v=a("NYxO"),h={outputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:null,memos:"",planinvoiceamount:null,planinvoicenum:null,pretaxamount:null,status:null,taxamount:null,ticketno:""}},b={name:"outputinvoicelist",components:{CompanyChoice:a("xh2W").a},data:function(){return{searchForm:p()({postlastinvoicedate:null},h),postForm:{},invoicetype:m.b,list:[],pagesize:10,pageindex:1,total:0,currentPage:1,loading:!1,status:m.e,addServicerShow:!1}},computed:u()({},Object(v.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{parseTime:m.h,onSubmit:function(){this.pageindex=1,this.postForm=this.searchForm.outputInvoice,this.getListData()},onCancel:function(){this.pageindex=1,h={outputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:null,memos:"",planinvoiceamount:null,planinvoicenum:null,pretaxamount:null,status:null,taxamount:null,ticketno:""}},this.searchForm=p()({postlastinvoicedate:null},h),this.postForm={}},addServicer:function(){this.addServicerShow=!0},diClose:function(){this.addServicerShow=!1},subCompany:function(e){this.searchForm.outputInvoice.customer=e.requestid,this.searchForm.outputInvoice.customername=e.name},getListData:function(){var e=this,t=this.postForm;t.postlastinvoicedate&&t.postlastinvoicedate.length&&(t.lastinvoicestartdate=Object(m.h)(t.postlastinvoicedate[0]),t.lastinvoiceenddate=Object(m.h)(t.postlastinvoicedate[1]),t.lastinvoicedate=""),t.createdate&&"object"===s()(t.createdate)&&(t.createdate=this.parseTime(t.createdate,"{y}-{m}-{d}"));var a={},n=!0,o=!1,l=void 0;try{for(var c,d=i()(r()(t));!(n=(c=d.next()).done);n=!0){var p=c.value;null!==t[p]&&""!==t[p]&&(a[p]=t[p])}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}this.loading=!0,Object(f.g)(u()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},viewRow:function(e){this.$router.push({name:"outputinvoicedetail",params:{ticketno:e.ticketno}})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户"}},[a("el-input",{attrs:{placeholder:"请选择客户","prefix-icon":"el-icon-search"},on:{focus:e.addServicer},model:{value:e.searchForm.outputInvoice.customername,callback:function(t){e.$set(e.searchForm.outputInvoice,"customername",t)},expression:"searchForm.outputInvoice.customername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单据状态"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择单据状态","prefix-icon":"el-icon-search"},model:{value:e.searchForm.outputInvoice.status,callback:function(t){e.$set(e.searchForm.outputInvoice,"status",t)},expression:"searchForm.outputInvoice.status"}},e._l(e.status,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开票申请单号","label-width":"100px"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入开票单号"},model:{value:e.searchForm.outputInvoice.ticketno,callback:function(t){e.$set(e.searchForm.outputInvoice,"ticketno",t)},expression:"searchForm.outputInvoice.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"最迟开票日期","label-width":"110px"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.outputInvoice.postlastinvoicedate,callback:function(t){e.$set(e.searchForm.outputInvoice,"postlastinvoicedate",t)},expression:"searchForm.outputInvoice.postlastinvoicedate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"申请日期",editable:!1},model:{value:e.searchForm.outputInvoice.createdate,callback:function(t){e.$set(e.searchForm.outputInvoice,"createdate",t)},expression:"searchForm.outputInvoice.createdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"开票申请单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRow(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划开票金额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoiceamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"计划开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"发票类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("invoicetypeFilter")(t.row.invoicetype)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单据状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最迟票日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lastinvoicedate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"选择客户",visible:e.addServicerShow,center:"",width:"80%"},on:{"update:visible":function(t){e.addServicerShow=t}}},[a("CompanyChoice",{on:{subCompany:e.subCompany,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(b,_,!1,function(e){a("B+Yu")},null,null);t.default=g.exports},OOLB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-example",use:"icon-example-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-example"><defs><style type="text/css"></style></defs><path d="M770.56 460.8h250.88C998.4 220.16 803.84 25.6 563.2 2.56v250.88c104.96 20.48 186.88 102.4 207.36 207.36z m0 0M460.8 253.44V2.56C220.16 25.6 25.6 220.16 2.56 460.8h250.88c20.48-104.96 102.4-186.88 207.36-207.36z m0 0M563.2 770.56v250.88c243.2-23.04 435.2-217.6 460.8-460.8H773.12C750.08 668.16 668.16 750.08 563.2 770.56z m0 0M253.44 563.2H2.56c23.04 243.2 217.6 435.2 460.8 460.8V773.12C355.84 750.08 273.92 668.16 253.44 563.2z m0 0" fill="" p-id="1816" /></symbol>'});i.a.add(l);t.default=l},PJwo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("E7jB"),r=a("0TzL"),o={data:function(){return{paydata:{},payloading:!1,hiddendata:{bankGateway:{},sign:"",urlPath:""},paydis:!0,disclass:"is-disabled"}},created:function(){this.getPayData()},methods:{getPayData:function(){var e=this;Object(n.h)({id:this.$route.params.id}).then(function(t){console.log(t),e.paydata=t.data,e.onSubmit()}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this;this.payloading=!0;var t={orderid:this.paydata.orderid,money_order:this.paydata.bailamount,orderno:this.paydata.orderno};Object(n.f)(t).then(function(t){console.log(t),e.payloading=!1,e.hiddendata=t.data,e.paydis=!1,e.disclass=""}).catch(function(t){console.log(t),e.payloading=!1})},onCancel:function(){this.$router.back()},handleFormSubmit:function(){var e=this;this.$confirm("等待支付结果","提示",{confirmButtonText:"支付成功",cancelButtonText:"遇到问题"}).then(function(t){"confirm"===t&&e.queryBailStatus()})},queryBailStatus:function(){var e=this;Object(r.i)({id:this.paydata.orderid}).then(function(t){console.log(t),e.$router.push({name:"quoted",params:{id:e.paydata.orderid}})}).catch(function(t){console.log(t),e.$message({message:"预付款支付失败，可能是网络原因，请稍后重试！",type:"warn"})})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{attrs:{model:e.paydata,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"交易流水号"}},[a("span",[e._v(e._s(e.paydata.orderno))])]),e._v(" "),a("el-form-item",{attrs:{label:"需缴纳保证金额"}},[a("span",[e._v(e._s(e.paydata.bailamount))])])],1),e._v(" "),a("form",{ref:"hiddenForm",attrs:{action:e.hiddendata.urlPath,method:"post",target:"_blank"}},[a("input",{attrs:{type:"hidden",name:"version"},domProps:{value:e.hiddendata.bankGateway.version}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"oid_partner"},domProps:{value:e.hiddendata.bankGateway.oid_partner}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:e.hiddendata.bankGateway.user_id}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"sign_type"},domProps:{value:e.hiddendata.bankGateway.sign_type}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"sign"},domProps:{value:e.hiddendata.sign}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"userreq_ip"},domProps:{value:e.hiddendata.bankGateway.userreq_ip}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"busi_partner"},domProps:{value:e.hiddendata.bankGateway.busi_partner}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"name_goods"},domProps:{value:e.hiddendata.bankGateway.name_goods}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"money_order"},domProps:{value:e.hiddendata.bankGateway.money_order}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"timestamp"},domProps:{value:e.hiddendata.bankGateway.timestamp}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"no_order"},domProps:{value:e.hiddendata.bankGateway.no_order}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"dt_order"},domProps:{value:e.hiddendata.bankGateway.dt_order}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"info_order"},domProps:{value:e.hiddendata.bankGateway.info_order}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"notify_url"},domProps:{value:e.hiddendata.bankGateway.notify_url}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"risk_item"},domProps:{value:e.hiddendata.bankGateway.risk_item}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"url_return"},domProps:{value:e.hiddendata.bankGateway.url_return}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"col_userid"},domProps:{value:e.hiddendata.bankGateway.col_userid}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"valid_order"},domProps:{value:e.hiddendata.bankGateway.valid_order}}),e._v(" "),a("input",{staticClass:"submitButton primary",class:e.disclass,attrs:{type:"submit",value:"确认支付",disabled:e.paydis},on:{click:e.handleFormSubmit}}),e._v(" "),a("el-button",{staticClass:"submitButton",attrs:{type:"button"},on:{click:e.onCancel}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,i,!1,function(e){a("WUv2")},null,null);t.default=l.exports},PVoo:function(e,t){},PejS:function(e,t){},"PyI+":function(e,t){},QGlg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Gu7T"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("mvHQ"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("sJ5/"),p=a("NYxO"),m=a("0xDb"),f={components:{productchoice:a("m2Lx").default},data:function(){return{planform:{purchorder:{ticketno:"",customer:"",customername:"",servicer:"",servicername:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",sumordernum:"",sumfactrecnum:"",sumamount:"",contractno:"",memos:"",customerorderno:"",linkusername:"",linktel:"",receiveaddress:"",revstore:"",revstorename:"",tkttype:"",fromorderno:"",planarrivedate:"",deliverway:"",applyuser:"",sumpackunitnum:"",closed:"",rate:"",paymethod:"",enquiryorder:""},purchorderItems:[]},rules:{purchorder:{planarrivedate:[{required:!0,message:"请选择到货日期",trigger:"change"}],linktel:[{required:!0,message:"收货人电话",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],contractno:[{required:!0,message:"请输入合同编号",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 50 个字符",trigger:"blur"}],linkusername:[{required:!0,message:"请输入收货人",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],deliverway:[{required:!0,message:"请选择交货方式",trigger:"change"}],servicer:[{required:!0,message:"请选择供应商",trigger:"change"}],paymethod:[{required:!0,message:"请选择付款方式",trigger:"change"}],revstore:[{required:!0,message:"请选择到达仓库",trigger:"change"}]},purchorderItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("招标物品明细不能空"));setTimeout(function(){t.forEach(function(e){return e.orderunit?e.materialname?void 0:a(new Error("请输入商品名称")):a(new Error("请输入单位"))}),a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/excel/purchOrder/export",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,multipleSelection:[],submitloading:!1,deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"},{name:"自提",value:"3"}],productvisible:!1,paymethod:[{name:"货到付款",value:"1"},{name:"货到票到付款",value:"2"},{name:"先款后货",value:"3"}]}},computed:u()({sumordernum:function(){var e=0;return this.planform.purchorderItems.forEach(function(t){e+=t.ordernum}),e},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.purchorder.revstore&&(t=a.storename)}),t}},Object(p.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:m.h},created:function(){var e=this;this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.gridData.length||this.$store.dispatch("GetGysList"),this.$route.params.enquiryorder||this.$alert("请先选择计划单再创建采购单").then(function(t){e.$router.push({name:"planorderlist"})}),this.$route.query.id&&this.getDetail(),this.planform.purchorder.enquiryorder=this.$route.params.enquiryorder},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort(e))},addProduct:function(){this.productvisible=!0},getDetail:function(){var e=this;Object(d.r)({ticketno:this.$route.query.id}).then(function(t){console.log(t),e.planform=t.data}).catch(function(e){console.log(e)})},getName:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=JSON.parse(s()(e.planform)),n=e.visitedViews.filter(function(t){return t.path===e.$route.path});a.purchorder.revstorename=e.storename,a.purchorder.planarrivedate=Object(m.h)(e.planform.purchorder.planarrivedate),a.purchorder.servicername=e.getName(e.planform.purchorder.servicer),a.purchorder.createuser=e.userInfo.truename,Object(d.B)(a).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("新建采购单成功！","提示",{confirmButtonText:"继续",cancelButtonText:"关闭",type:"success"}).then(function(t){e.$store.dispatch("delVisitedViews",n[0]).then(function(){e.$router.push({name:"planorderlist"})})}).catch(function(t){e.$store.dispatch("delVisitedViews",n[0]).then(function(){e.$router.push("/")})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},handleUploadSuccess:function(e,t,a){var n=this;"200"===e.code?(this.$confirm(e.message,"提示",{confirmButtonText:"完成",cancelButtonText:"继续导入",type:"success"}).then(function(e){n.dialogVisible=!1}).catch(function(e){}),e.data.map(function(e){e.edit=!1}),this.planform.purchorderItems=[].concat(r()(this.planform.purchorderItems),r()(e.data))):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},submitUpload:function(){this.$refs.upload.submit()},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleDelete:function(e,t){this.planform.purchorderItems.splice(e,1),this.$message({message:"成功删除一条记录！",type:"success"})},editRow:function(e){e.edit=!1},goeditrow:function(e){this.planform.purchorderItems[e].edit=!0},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},importEXL:function(){this.dialogVisible=!0},addDetail:function(){this.planform.purchorderItems.push({material:"",materialno:"",materialname:"",materialrule:"",materialsize:"",materialtag:"",orderunit:"",orderprice:"",orderamount:"",ordernum:"",factendnum:"",taxrate:"",memos:"",edit:!0})},subProduct:function(e){var t=this;e.forEach(function(a,n){t.planform.purchorderItems.map(function(r){a.requestid===r.material&&(t.$message({message:"编号"+r.custommaterialno+"商品已存在",type:"warning"}),e=e.splice(n,1))})}),e.map(function(e){var a={material:e.requestid,materialno:e.productno,custommaterialno:e.productno,materialname:e.productname,materialrule:e.productrule,materialsize:e.productsize,materialtag:e.brandname,orderunit:e.invunitname,orderprice:"",orderamount:"",ordernum:"",factendnum:"",taxrate:"",memos:"",edit:!0};t.planform.purchorderItems.push(a)})},diClose:function(){this.productvisible=!1},handleCurrentChange:function(e){this.currentRow=e},handleSelectionChange:function(e){this.multipleSelection=e},onCancel:function(){this.$router.back()},delChecked:function(){var e=this,t=this.planform.purchorderItems.filter(function(t){return!e.multipleSelection.includes(t)});this.planform.purchorderItems=JSON.parse(s()(t))}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划到货日期",prop:"purchorder.planarrivedate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.purchorder.planarrivedate,callback:function(t){e.$set(e.planform.purchorder,"planarrivedate",t)},expression:"planform.purchorder.planarrivedate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"供应商",prop:"purchorder.servicer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.purchorder.servicer,callback:function(t){e.$set(e.planform.purchorder,"servicer",t)},expression:"planform.purchorder.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号",prop:"purchorder.contractno"}},[a("el-input",{model:{value:e.planform.purchorder.contractno,callback:function(t){e.$set(e.planform.purchorder,"contractno",t)},expression:"planform.purchorder.contractno"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"purchorder.linkusername"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.purchorder.linkusername,callback:function(t){e.$set(e.planform.purchorder,"linkusername",t)},expression:"planform.purchorder.linkusername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人电话",prop:"purchorder.linktel"}},[a("el-input",{attrs:{type:"number"},model:{value:e.planform.purchorder.linktel,callback:function(t){e.$set(e.planform.purchorder,"linktel",t)},expression:"planform.purchorder.linktel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货地址"}},[a("el-input",{model:{value:e.planform.purchorder.receiveaddress,callback:function(t){e.$set(e.planform.purchorder,"receiveaddress",t)},expression:"planform.purchorder.receiveaddress"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方式",prop:"purchorder.paymethod"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.planform.purchorder.paymethod,callback:function(t){e.$set(e.planform.purchorder,"paymethod",t)},expression:"planform.purchorder.paymethod"}},e._l(e.paymethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货方式",prop:"purchorder.deliverway"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.purchorder.deliverway,callback:function(t){e.$set(e.planform.purchorder,"deliverway",t)},expression:"planform.purchorder.deliverway"}},e._l(e.deliverway,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[1==e.planform.purchorder.deliverway?a("el-form-item",{attrs:{label:"到达仓库",prop:"purchorder.revstore"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"到达仓库","prefix-icon":"el-icon-search"},model:{value:e.planform.purchorder.revstore,callback:function(t){e.$set(e.planform.purchorder,"revstore",t)},expression:"planform.purchorder.revstore"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"来源计划单号",prop:"purchorder.ticketno"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.planform.purchorder.enquiryorder,callback:function(t){e.$set(e.planform.purchorder,"enquiryorder",t)},expression:"planform.purchorder.enquiryorder"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        采购单明细\r\n        "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importEXL}},[e._v("\r\n          导入Excel\r\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addDetail}},[e._v("\r\n          新增一行\r\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addProduct}},[e._v("\r\n          新增商品\r\n        ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.multipleSelection.length,expression:"multipleSelection.length"}],attrs:{size:"mini",type:"warning"},on:{click:e.delChecked}},[e._v("\r\n          删除选中\r\n        ")])],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"purchorderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.purchorderItems,border:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.itemno,callback:function(a){e.$set(t.row,"itemno",a)},expression:"scope.row.itemno"}})]:a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.custommaterialno,callback:function(a){e.$set(t.row,"custommaterialno",a)},expression:"scope.row.custommaterialno"}})]:a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialname,callback:function(a){e.$set(t.row,"materialname",a)},expression:"scope.row.materialname"}})]:a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialtag,callback:function(a){e.$set(t.row,"materialtag",a)},expression:"scope.row.materialtag"}})]:a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialrule,callback:function(a){e.$set(t.row,"materialrule",a)},expression:"scope.row.materialrule"}})]:a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialsize,callback:function(a){e.$set(t.row,"materialsize",a)},expression:"scope.row.materialsize"}})]:a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderunit,callback:function(a){e.$set(t.row,"orderunit",a)},expression:"scope.row.orderunit"}})]:a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderprice,callback:function(a){e.$set(t.row,"orderprice",a)},expression:"scope.row.orderprice"}})]:a("span",[e._v(e._s(t.row.orderprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.orderprice*t.row.ordernum).toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.taxrate,callback:function(a){e.$set(t.row,"taxrate",a)},expression:"scope.row.taxrate"}})]:a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}})]:a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.query.id?"修改采购单":"新建采购单"))]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"before-upload":e.beforeUpload,"on-exceed":e.handleExceed,name:"myFile",accept:".xls,.xlsx","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls和xlsx文件,文件最大不能超过5M。\r\n        "),a("a",{staticClass:"dlink",attrs:{href:"/static/templet/createpurchose.xls"}},[e._v("下载模板")])])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择商品",visible:e.productvisible,center:"",width:"80%"},on:{"update:visible":function(t){e.productvisible=t}}},[a("productchoice",{on:{subProduct:e.subProduct,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("Kkn8")},"data-v-0bb40299",null);t.default=h.exports},QjmH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-password",use:"icon-password-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-password"><defs><style type="text/css"></style></defs><path d="M780.8 354.579692 665.6 354.579692 665.6 311.689846c0-72.310154-19.849846-193.299692-153.6-193.299692-138.870154 0-153.6 135.049846-153.6 193.299692l0 42.889846L243.2 354.579692 243.2 311.689846C243.2 122.249846 348.790154 0 512 0s268.8 122.249846 268.8 311.689846L780.8 354.579692zM588.8 669.420308C588.8 625.900308 554.220308 590.769231 512 590.769231s-76.8 35.131077-76.8 78.651077c0 29.459692 15.399385 54.468923 38.439385 67.820308l0 89.639385c0 21.740308 17.250462 39.699692 38.4 39.699692s38.4-17.959385 38.4-39.699692l0-89.639385C573.44 723.889231 588.8 698.88 588.8 669.420308zM896 512l0 393.609846c0 65.260308-51.869538 118.390154-115.2 118.390154L243.2 1024c-63.291077 0-115.2-53.129846-115.2-118.390154L128 512c0-65.220923 51.869538-118.390154 115.2-118.390154l537.6 0C844.130462 393.609846 896 446.779077 896 512z" p-id="9230" /></symbol>'});i.a.add(l);t.default=l},QnVu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("0xDb"),s={data:function(){return{planform:{outNotice:{ticketno:"",outstore:"",outstorename:"",outdate:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",customer:"",customername:"",status:"",checkuser:"",checkdate:"",checkadvice:"",sumoutnum:"",sumordernum:"",linkaddress:"",linkuser:"",linktel:"",saleorder:"",closed:"",memos:"",isdelete:"",postoutdate:[]},outNoticeItems:[]},statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],gridLoading:!1,currentRow:{},list:[],pagesize:10,pageindex:1,total:0,currentPage:1,multipleSelection:[],deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"},{name:"自提",value:"3"}],loading:!1}},computed:r()({printno:function(){var e=this,t=[];return this.multipleSelection.map(function(a){1===a.closed?(e.$message({message:a.ticketno+"已经完结,不支持打印",type:"warning"}),e.$refs.multipleTable.toggleRowSelection(a)):t.push(a.ticketno)}),t.toString()}},Object(i.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:l.h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{printUrl:l.i,cancelCheck:function(){this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},getName:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this;this.loading=!0;var t=this.planform.outNotice;t.postoutdate&&t.postoutdate.length&&(t.outstartdate=t.postoutdate[0],t.outenddate=t.postoutdate[1],t.outdate=""),Object(o.o)(r()({pagesize:this.pagesize,pageindex:this.pageindex},t)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={outNotice:{},outNoticeItems:[]}},nextpage:function(e){this.$router.push({name:"outnoticedetail",params:{ticketno:e.ticketno}})},nextsalepage:function(e){this.$router.push({name:"saleorderdetail",params:{ticketno:e.saleorder}})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货通知单号",prop:"outNotice.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outNotice.ticketno,callback:function(t){e.$set(e.planform.outNotice,"ticketno",t)},expression:"planform.outNotice.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联销售单号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outNotice.saleorder,callback:function(t){e.$set(e.planform.outNotice,"saleorder",t)},expression:"planform.outNotice.saleorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货企业",prop:"outNotice.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.outNotice.customer,callback:function(t){e.$set(e.planform.outNotice,"customer",t)},expression:"planform.outNotice.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"计划到货日期",prop:"outNotice.postoutdate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.outNotice.postoutdate,callback:function(t){e.$set(e.planform.outNotice,"postoutdate",t)},expression:"planform.outNotice.postoutdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建人",prop:"outNotice.createuser"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outNotice.createuser,callback:function(t){e.$set(e.planform.outNotice,"createuser",t)},expression:"planform.outNotice.createuser"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"350px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[a("span",[e._v("订单列表")]),e._v(" "),e.printno?[a("a",{attrs:{href:e.printUrl("bss_delivery_BatchPrint",e.printno),target:"_blank"}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"}},[e._v("\r\n              打印选中\r\n            ")])],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:e.cancelCheck}},[e._v("\r\n            取消选中\r\n          ")])]:[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",disabled:""}},[e._v("\r\n            打印选中\r\n          ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",disabled:""}},[e._v("\r\n            取消选中\r\n          ")])]],2),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"发货通知单号",fixed:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpage(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联销售单号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextsalepage(t.row)}}},[e._v(e._s(t.row.saleorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收货企业",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库仓库",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outstorename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划到达时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系人",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系电话",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linktel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumoutnum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("RX/2")},"data-v-7594e333",null);t.default=u.exports},RFze:function(e,t){},ROPh:function(e,t){},"RX/2":function(e,t){},S4EE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("sJ5/"),u=a("NYxO"),d=a("0xDb"),p={components:{stocktable:a("Zlwr").default},data:function(){return{stockform:{material:"",materialno:"",custommaterialno:"",materialname:"",materialrule:"",materialsize:"",materialtag:"",materialnum:"",price:"",amount:"",store:"",storename:"",orderunit:"",owner:"",ownername:"",enterprise:"",enterprisename:""},list:[],pagesize:10,pageindex:1,total:0,currentPage:1,loading:!1}},computed:s()({},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.getListData()},methods:{handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this;this.loading=!0;var t=this.stockform,a={},n=!0,o=!1,l=void 0;try{for(var u,d=i()(r()(t));!(n=(u=d.next()).done);n=!0){var p=u.value;""!==t[p]&&(a[p]=t[p])}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}Object(c.v)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={saleOrder:{},saleOrderItems:[]}}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.stockform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"仓库"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.stockform.store,callback:function(t){e.$set(e.stockform,"store",t)},expression:"stockform.store"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户商品编号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.stockform.custommaterialno,callback:function(t){e.$set(e.stockform,"custommaterialno",t)},expression:"stockform.custommaterialno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{type:"text"},model:{value:e.stockform.materialname,callback:function(t){e.$set(e.stockform,"materialname",t)},expression:"stockform.materialname"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"规格"}},[a("el-input",{attrs:{type:"text"},model:{value:e.stockform.materialrule,callback:function(t){e.$set(e.stockform,"materialrule",t)},expression:"stockform.materialrule"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"型号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.stockform.materialsize,callback:function(t){e.$set(e.stockform,"materialsize",t)},expression:"stockform.materialsize"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"350px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("stocktable",{attrs:{list:e.list,loading:e.loading}}),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("thQc")},"data-v-5d157c7c",null);t.default=f.exports},"STP+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("ehIy"),u=a("8hSj"),d=a("vHhr"),p=a("NYxO"),m={components:{Sticky:d.a},data:function(){return{planform:{OutputInvoice:{},OutputInvoiceItems:[]},fetchSuccess:!0,loading:!1}},computed:s()({},Object(p.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews"})),created:function(){this.getOutputInvoiceDetail()},methods:{Modify:u.a,nextpage:function(e,t){this.$router.push({name:e,params:{ticketno:this.$route.params.ticketno}})},getOutputInvoiceDetail:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.g)({ticketno:e.$route.params.ticketno}).then(function(t){console.log(t),e.planform.OutputInvoice=t.data.data[0]}).catch(function(t){console.log(t),e.fetchSuccess=!1});case 2:return t.next=4,Object(c.f)({ticketno:e.$route.params.ticketno}).then(function(t){console.log(t),e.planform.OutputInvoiceItems=t.data}).catch(function(t){console.log(t),e.fetchSuccess=!1});case 4:case"end":return t.stop()}},t,e)}))()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createPost-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[1==e.planform.OutputInvoice.status?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.nextpage("makeoutinvoice")}}},[e._v("财务开票")]):-1==e.planform.OutputInvoice.status||-2==e.planform.OutputInvoice.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"OutputInvoice")}}},[e._v("删除")])]:0==e.planform.OutputInvoice.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"OutputInvoice")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"OutputInvoice")}}},[e._v("驳回")])]:[a("el-tag",[e._v("暂无操作")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.planform}},[a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{attrs:{span:21}},[a("div",{staticClass:"postInfo-container"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"申请开票单号:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.ticketno)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"客户:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.customername)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"最迟开票日期:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.lastinvoicedate)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"申请开票金额:"}},[e._v("\n                  ￥"+e._s(e.planform.OutputInvoice.planinvoiceamount)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"单据状态:"}},[e._v("\n                  "+e._s(e._f("statusFilter")(e.planform.OutputInvoice.status))+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"申请人:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.createuser)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.planform.OutputInvoice.checkuser,expression:"planform.OutputInvoice.checkuser"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"审核人:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.checkuser)+"\n                ")])],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.planform.OutputInvoice.checkdate,expression:"planform.OutputInvoice.checkdate"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"审核日期:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.checkdate)+"\n                ")])],1)],1)],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"0"}},[a("el-table",{ref:"OutputInvoiceTable",staticStyle:{width:"100%"},attrs:{data:e.planform.OutputInvoiceItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"出库单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售订单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.saleorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售合同号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"计划开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划开票金额",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoiceamount))])]}}])})],1)],1)],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(m,f,!1,function(e){a("IXOt")},"data-v-66a45296",null);t.default=v.exports},"T+/8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("M9A7"),r={name:"login",data:function(){return{loginForm:{username:"1158373480@qq.com",password:"123456"},loginRules:{username:[{required:!0,trigger:"blur",validator:function(e,t,a){a()}}],password:[{required:!0,trigger:"blur",validator:function(e,t,a){t.length<5?a(new Error("密码不能小于5位")):a()}}]},loading:!1,pwdType:"password"}},created:function(){Object(n.c)().then(function(e){console.log(e)}).catch(function(e){console.log(e)})},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("Login",e.loginForm).then(function(){e.loading=!1,e.$router.push({path:"/"})}).catch(function(){e.loading=!1})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("el-form",{ref:"loginForm",staticClass:"card-box login-form",attrs:{autoComplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"username"}},[a("span",{staticClass:"svg-container svg-container_login"},[a("svg-icon",{attrs:{"icon-class":"user"}})],1),e._v(" "),a("el-input",{attrs:{name:"username",type:"text",autoComplete:"on",placeholder:"username"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"password"}})],1),e._v(" "),a("el-input",{attrs:{name:"password",type:e.pwdType,autoComplete:"on",placeholder:"password"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){t.preventDefault(),e.handleLogin(t)}}},[e._v("\n        登录\n      ")])],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(r,o,!1,function(e){a("PyI+")},null,null);t.default=i.exports},"T+/F":function(e,t){},T5XL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("sJ5/"),u=a("NYxO"),d=a("0xDb"),p={data:function(){return{planform:{inorder:{ticketno:"",enclosure:"",instore:"",instorename:"",indate:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",innotice:"",innum:"",isdelete:""},inorderItems:[]},rules:{inorder:{instore:[{required:!0,message:"请选择入货仓库",trigger:"change"}],indate:[{required:!0,message:"请选择入库日期",trigger:"change"}]},inorderItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("明细不能空"));setTimeout(function(){a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/fileupload/getfile",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,submitloading:!1}},computed:s()({suminnum:function(){var e=0;return this.planform.inorderItems.forEach(function(t){e+=t.innum}),e},sumbacknum:function(){var e=0;return this.planform.inorderItems.forEach(function(t){e+=t.backnum}),e},sumamount:function(){var e=0;return this.planform.inorderItems.forEach(function(t){e+=t.ordernum*t.orderprice}),e},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.inorder.instore&&(t=a.storename)}),t}},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h},created:function(){this.$route.query.id?this.getDetail():this.getInfo(),this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.gridData.length||this.$store.dispatch("GetGysList")},beforeRouteLeave:function(e,t,a){this.$confirm("离开页面后输入内容将不被保存，确定离开吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort(e))},getDetail:function(){var e=this;Object(c.j)({ticketno:this.$route.query.id}).then(function(t){console.log(t),e.planform=t.data}).catch(function(e){console.log(e)})},getInfo:function(){var e=this;Object(c.h)({ticketno:this.$route.params.ticketno,flag:1}).then(function(t){console.log(t),t.data.forEach(function(t){var a=t.ordernum,n=t.itemno,r=t.material,o=t.materialno,i=t.custommaterialno,l=t.materialname,s=t.materialrule,c=t.materialsize,u=t.materialtag,d=t.orderunit,p=t.id;e.planform.inorderItems.push({edit:!0,backnum:a,itemno:n,material:r,materialno:o,custommaterialno:i,materialname:l,materialrule:s,materialsize:c,materialtag:u,orderunit:d,innum:a,fromitemid:p})})}).catch(function(e){console.log(e)}),Object(c.i)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t);var a=t.data.data[0];e.planform.inorder.innotice=a.ticketno,e.planform.inorder.instore=a.instore,e.planform.inorder.instorename=a.instorename,e.planform.inorder.enterprise=a.enterprise,e.planform.inorder.enterprisename=a.enterprisename}).catch(function(e){console.log(e)})},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},submitUpload:function(){this.$refs.upload.submit()},handleUploadSuccess:function(e,t,a){"200"===e.code?(this.$message({message:"上传附件成功~",type:"success"}),this.dialogVisible=!1,this.planform.inorder.enclosure=e.data):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},importFile:function(){this.dialogVisible=!0},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path});e.planform.inorderItems.forEach(function(e){e.edit=!1});var n=JSON.parse(r()(e.planform));n.inorder.instorename=e.storename,n.inorder.indate=Object(d.h)(e.planform.inorder.indate),n.inorder.createuser=e.userInfo.truename,n.inorder.innum=e.suminnum,Object(c.x)(n).then(function(t){console.log(t),e.$confirm("新建入库单成功！","提示",{confirmButtonText:"查看",cancelButtonText:"继续",type:"success"}).then(function(n){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"instoredetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"innoticelist"})})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},editRow:function(e){e.edit=!1},goeditrow:function(e){this.planform.inorderItems[e].edit=!0,this.planform=JSON.parse(r()(this.planform))},onCancel:function(){this.$router.back()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货通知单号",prop:"inorder.innotice"}},[a("el-input",{attrs:{disabled:""},model:{value:e.planform.inorder.innotice,callback:function(t){e.$set(e.planform.inorder,"innotice",t)},expression:"planform.inorder.innotice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货仓库",prop:"inorder.instore"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.inorder.instore,callback:function(t){e.$set(e.planform.inorder,"instore",t)},expression:"planform.inorder.instore"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库日期",prop:"inorder.indate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.inorder.indate,callback:function(t){e.$set(e.planform.inorder,"indate",t)},expression:"planform.inorder.indate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入库数量合计",prop:"inorder.sumoutnum"}},[a("el-input",{attrs:{value:e.suminnum,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"上传附件"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importFile}},[e._v("\r\n            "+e._s(e.planform.inorder.enclosure?"重新上传":"上传附件")+"\r\n          ")]),e._v("\r\n          "+e._s(e.planform.inorder.enclosure)+"\r\n        ")],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"inorderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.inorderItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入库数量",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{attrs:{min:0,max:t.row.backnum},model:{value:t.row.innum,callback:function(a){e.$set(t.row,"innum",a)},expression:"scope.row.innum"}})]:a("span",[e._v(e._s(t.row.innum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.query.id?"修改入库单":"创建入库单"))]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,"before-upload":e.beforeUpload,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,name:"myFile","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1个文件,文件最大不能超过5M。 ")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("klhe")},"data-v-54c4c547",null);t.default=f.exports},TLhU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("jsD9"),i=a("NYxO"),l=a("vHhr"),s=a("0xDb"),c=a("8hSj"),u={components:{Sticky:l.a},data:function(){return{planform:{receivable:{checkadvice:"",checkdate:"",checkuser:"",contractno:"",createdate:"",createuser:"",enclosure:"",enterprise:"",enterprisename:"",fundnature:"",interestrate:"",isdelete:0,memos:"",payer:"",payername:"",recamount:0,recdate:"",receivables:"",receivablesname:"",saleorder:"",settlementmethod:"",status:"",ticketno:""}},list:[],pagesize:10,pageindex:1,total:0,currentPage:1,fundnature:s.a,settlementmethod:s.d,fetchSuccess:!0}},computed:r()({getEntName:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.receivable.enterprise&&(t=a.name)}),t},getCusname:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.receivable.receivables&&(t=a.name)}),t}},Object(i.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:s.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getDetail()},methods:{Modify:c.a,downloadFile:s.f,Edit:function(){this.$router.push({name:"newreceivable",query:{id:this.$route.params.ticketno}})},needfresh:function(){this.getDetail()},getDetail:function(){var e=this;Object(o.c)({ticketno:this.$route.params.ticketno}).then(function(t){e.planform.receivable=t.data.data[0],console.log(t)}).catch(function(t){console.log(t),e.fetchSuccess=!1})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{staticStyle:{"margin-bottom":"20px"},attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[-1==e.planform.receivable.status||-2==e.planform.receivable.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"receivable")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.receivable.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"receivable",!0)}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"receivable",!0)}}},[e._v("驳回")])]:[a("el-tag",[e._v("暂无操作")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款单号",prop:"receivable.ticketno"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.receivable.ticketno,callback:function(t){e.$set(e.planform.receivable,"ticketno",t)},expression:"planform.receivable.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方",prop:"receivable.payername"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.receivable.payername,callback:function(t){e.$set(e.planform.receivable,"payername",t)},expression:"planform.receivable.payername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"本次实收金额",prop:"receivable.recamount"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.receivable.recamount,callback:function(t){e.$set(e.planform.receivable,"recamount",t)},expression:"planform.receivable.recamount"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款方",prop:"receivable.receivablesname"}},[a("el-input",{attrs:{type:"text",value:e.planform.receivable.receivablesname,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"款项类型",prop:"receivable.fundnature"}},[a("el-input",{attrs:{type:"text",value:e._f("fundnatureFilter")(e.planform.receivable.fundnature),disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"结算方式",prop:"receivable.settlementmethod"}},[a("el-input",{attrs:{type:"text",value:e._f("settlementmethodFilter")(e.planform.receivable.settlementmethod),disabled:""}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核人",prop:"receivable.checkuser"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.receivable.checkuser,callback:function(t){e.$set(e.planform.receivable,"checkuser",t)},expression:"planform.receivable.checkuser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核日期",prop:"receivable.checkdate"}},[a("el-input",{attrs:{type:"text",value:e.planform.receivable.checkdate,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核结果",prop:"receivable.status"}},[a("el-input",{attrs:{type:"text",value:e._f("statusFilter")(e.planform.receivable.status),disabled:""}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单人",prop:"receivable.createuser"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.receivable.createuser,callback:function(t){e.$set(e.planform.receivable,"createuser",t)},expression:"planform.receivable.createuser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单日期",prop:"receivable.createdate"}},[a("el-input",{attrs:{type:"text",value:e.planform.receivable.createdate,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"来源销售单",prop:"receivable.saleorder"}},[a("el-input",{attrs:{type:"text",value:e.planform.receivable.saleorder,disabled:""}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注",prop:"receivable.memos"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.planform.receivable.memos,callback:function(t){e.$set(e.planform.receivable,"memos",t)},expression:"planform.receivable.memos"}})],1)],1),e._v(" "),e.planform.receivable.enclosure?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"附件",prop:"receivable.enclosure"}},[a("a",{attrs:{type:"text",href:e.downloadFile(e.planform.receivable.enclosure),target:"_blank"}},[e._v("下载附件")])])],1):e._e(),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款日期",prop:"receivable.recdate"}},[a("el-input",{attrs:{type:"text",value:e.planform.receivable.recdate,disabled:""}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("DmpZ")},"data-v-d10a416c",null);t.default=p.exports},TLxN:function(e,t){},TfcR:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-input",{staticStyle:{"margin-bottom":"30px"},attrs:{placeholder:"Filter keyword"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{data:e.data2,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.filterNode}})],1)},staticRenderFns:[]},r=a("VU/8")({watch:{filterText:function(e){this.$refs.tree2.filter(e)}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)}},data:function(){return{filterText:"",data2:[{id:1,label:"Level one 1",children:[{id:4,label:"Level two 1-1",children:[{id:9,label:"Level three 1-1-1"},{id:10,label:"Level three 1-1-2"}]}]},{id:2,label:"Level one 2",children:[{id:5,label:"Level two 2-1"},{id:6,label:"Level two 2-2"}]},{id:3,label:"Level one 3",children:[{id:7,label:"Level two 3-1"},{id:8,label:"Level two 3-2"}]}],defaultProps:{children:"children",label:"label"}}}},n,!1,null,null,null);t.default=r.exports},U6Bb:function(e,t){},UVIz:function(e,t){},VD6r:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAACKCAYAAABW3IOxAAAAAXNSR0IArs4c6QAAElhJREFUeAHtnXuQHMV9x7tndvdOQkgCWZKxkITEQ5YB87AVCT9iEqgyTsXlyA42QVRcScXYzvOPkKeJLSrOy8RVxMSVBNuVqrhIxS7KJk5BKlWpQKiKX4hgwOII6CzLAk6H0Pt0e/uY6Xx+p7vT3Gl2b2e3Z2d2t7vqdzuP7l//+tvf6+75dU+PVi5kioAxZl01UDtMEG43Wu/AmOuUUYeVVqNKmVGjvX2+HAdqX6mkfqS1Pp2pwQkz1wnju+gdIACZlpTr6npU7FChETIh5uJkKvWYPkO+fUp7oyZUowWt9hWLahTyHU2mK/3YjmApYjxlzGWmSuukQ4iktwP2NZCsmFqWWh9D96hWZp+nvb2lgvompNubWn4tKHYEawGkVqJAnBWVutpmZlono2mdjFnVSlqbcTytnynSpHlaXYPeV5F3QLIDNvNIossRLAlaM3Ehk1etqitDIZGidTKMnbTayvVM8IRAZQj1dNHXF9N9blhQpBc4f2dW3WcmgCwAIPenEGdNJVDbGYhDpOmB+DaunZ+14VrpV31fjxb96dZqeRN7vs29m4WITeKkcssRbAGsEKdUq6lrQ7o6M9M6GWU2LYiW6Snd4HO+p8sFX70dQ7wWjfkW8T4IyYIW41uJNvAEKxuzUQbiSocMwqdbp+sh2ZAVdC0qgRhVur8nS75+A79b2lT9AHo+3mbatpINHMEgz/JKqH7ZmPBtJtA3J3cTtIVz+4m0PsyYfS8D9ytRsrp9RXMpd0Oye+bOUj4YOIJNVsJvQKqdgitAh8aocQbIr/P0d4pLNbmMDOPsXKk9tSYMzUrOux6wbaTg6SN0g9vI3HaLeif6v9SNQg0UwSZr5ndVGP51EmCpiJPEH4OAxwFLBskyhilyvozBzyp+L5JxWxKdjeKSl+j+Xqmgl0D66xrFs3Bd8tlJfv9mQVdTFQNDMMj1Tm3M45Ch0BSRhDeppBqtnXjXZXrnlApV1TAKxwe2hHsreEBYw/015NsYazzwdIM/KBT0ZURa6GZIaFHL0eWf5SZs/E7LKdqI2LjQbSjLaxIqd3W5ap6ma1yXiY2MowB6nLyPQbZJ7dE1Kzz6Ri2hG6zMdINZuD2OYNO7IJn4ylIJfU8wyOVN1cx/8MuAPj+BSq0PFabnFddnbNUB8r8Be8bSsKNVH0oaeXdF51Q13J03cknB8WM9TUeaNbnElI3Iv4NRM0etxGsr9HULRsv1XoAT8HJVToZozw8V9VvaqrH0Ej2G6ltoyao2s+jbFmzSmPX4IB7MG7mowIlSUa+xWYmWdP0Mev7JNl59STBAKqqa+XoWqxkWq+yCr1+iOX3DYvEyuv8R8r3bZt59SbByDV+XmV7QZxOrjnUx7tpT8FL1b3VsIwq22lAyq6PvCDZZMbfy+P/bswXMz68ew4FqtfLyU7bGlvQVwVhBeoXW5iuNi5vNHcZdhkH9cXI/LxsLssu1bwjGuGuJqZmH+M3CYdm0Bnlp49tM/Qxc6yWgWJ02aYpyyjenauHfMXF9dcrZJFZP6/UiKyG2J07YJwn6ogVjGujXINdH81YnkGuKrlFWQvTNP3JSjHueYNWquZY5xvuTFrwb8Zln3INLQjzlAxt6n2BBeBdPjaxm0CZPtYg9e5jEfleebMrClp5vuk9Vwl1CLqZf9nuePljy1YTvqxKku4iB9eUM+m0v1lu8nrR+fbioB7rlmgWp5wkmBYFEOjBmcxCqzbX6bNFkaao+4fvmh3RVRwu+Z3iau5CLl5LggrOx7B/h7xpF68AO7KOI9gXBogWKHrPmakU9UG+rB/SetWD6Fq1dQEv3Eu8QjtHCVYueWso4aT1xraxsQPcTEPmno3YM8nFfEyyuYmnt/CAwlweBujx6n0WARwqe9+OCF55kOodDbzXE20z8lpdD02LuZ42X7D3hwgwCA0ewRjVvQrOqFgar5K2PMyGQl0JqdK//xxzi6wzYA1qmFazhugTSrZiNNfsrcSHXBOebZq+53wH2z7RS+RCpWAvMFnrXLdPvG80kohscLxW8l30dln3PG+ZR/E2QcATy3dSK3kGK41qwNmqbV9nWTlWDtWeSnhnbrT6/kNclOG2U0F6SnveD2YOiY03unzUGQkewGFDcJXsIOILZw9JpikHAESwGFHfJHgKOYPawdJpiEHAEiwHFXbKHgCOYPSydphgEHMFiQHGX7CHgCGYPS6cpBgFHsBhQ3CV7CDiC2cPSaYpBwE1vxIAy4Jd+gUn+V1rA4Ani3CHr65rFdQRrhs5g3ltCsUUWC7cRQbYX/XiziK6LbIaOu7cYAnfS2t3TLJIjWDN03L1WEPg0JPtko4iOYI2QcdeTIPC3kOxDcQkcweJQcdeSIiA8ks3+blyY0BFsISLuvF0E5P3ThyGZfEZwLjiCzUHhDiwgIC/DyJ64cy++OIJZQNWpmIfARZzJtvHT31VyBJuHjTuxhIC8c/ooJJPP7bjgEEgFAfmW5UOOYKlg65TOIHCTI5jjQqoIOIKlCq9T7gjmOJAqAo5gqcLrlDuCOQ6kikBPEww/yw2+7z3FvlynU0XJKW8bgZ5bcAipZDHcLyG/gVy/+owrr16tq2fLNXO0UgtWhopPtmSxN2vb1dC/CdnErzcCxLoUSz+B/Cpy4SJWlys1M1KuhyeqdcP3svWbSe8vkqaj22zfFPqe6ukeoSMA4hPXc00wSCEVdgsirdX7kLbsZYfWE3yc9AW+fltmQ7mLjNJXoLstXdgQGxzBYmHJJ8GofGmhfgX5dWRzrOkdXOSrIIf5OsiLtHB1NgneQH6bOlA3ndQRLBbBfBGMipYNdKW1kjFWKy8exJYq6cXQqJch3GilFupqIIQ2FyfV4QgWi1j2BINUsovzrchvIjtizezyRfbb38cDw0E+sFXgeAs2LvoJZEew2ErKjmBU2gZMkleePoZMrx2KNTH7i2EtVCO0cIdo4ZaGodrKnvorF5rlCLYQkenz7hMMYt1M1tINvh9J9cluuoj2/9T4msjeybo5DOFWmFBdCeHOcwSLBbo7BINUy8n+o4gQa0usKb17cbJSV4+VCurneCy1+mTau5DMWZ4uwSDWVWQlpLoDWTaXbf8cvERR5FPJ2/qnSFZLUrfuyYdUonMnIsR6j1Vz86PsJ5jyMnID4lqtJvViDRyIJYv975yRNzXJs5dvjWO8tFrytGv9n7OXgWlg+2sdEwxivRvl0lp9ECk2yKjXL0s3+CwiXWHX/HM9DNppbL8PubdtgkGsN/INn78s+upnUbS+h8FoZroAtQe5DpEHFReaI1Dl9j8gn2Vbp9ckatsEK1eDrzHl8mEUhSj5AR+D4qOf6gp0in+r14MA9T1kK+K+QbR4bcoeYV9FdsOHA9HobRFsqm7eFwbho1FFcoxymUF+Zubzd/Ju3MaFcXJ+HmLfd5FLkH4dR1I0q+EbaLubuh+J05qYYHSNS6eqZi/OxUviFM5emyHbs0I2vqF9KRk1jT+bLsPf75P3amRThjb0Utb/ibF/RD3LEKJhSEywqUpwL//mdzXUGHNDyMaSmef4uOdhutG8ke1pTF6K9JsDOKYmrFySoYMQ67FWtCUiWLVqrgmU2UMr1tEjOsb9kJZtHLJtwgDry3FaKThx9iIydnhri/EHPZrgJV3hw0mAaJlgkMpjhcF3WIr8U0kyWCwuBu+dIdslXSLbPmwSt4O82u7C4gjsJ8pnkAepKxmjJgotE4xx12+FJvxCIu0JI1OAEcg2Rsu2EcNkibTNcBBlryDbkZbLbdOAHtN1CHs/izxAvZz9lHnCQrQENK3XOpYcj/B7fkL9bUenUPIx9lch24YOySb+GPG+C7E66trbLkxvJZTW/XPI31AHk52a3hLBJishj6JG5hczCRT0Rcj2CmRbj8GXtWiEAPUcsg0ZbjHNIEcTMkkP9VfgLdhZCYsSrFI3HwiC8GEruVlQQuH3QbaDBQ+y6ViyCVBPIdciXWtxLRQtKxXS/T2AiPddukWroSnB6BKXMfZ6Hp9XLqeCeOF2lFfFDhZ8vQ6ybQQZ8WWJ932VVZT6U5kM2B9EPgOxZCCfSmhKsMlqcJ8y6ndSydmiUgAKhor6dQqz1qLaflb1rxTuU+AmrodUQ0OC4fN6Oz6v79KK5X5Zs+/rl0u+TvwmUKrI5lP5f2HWH0MscZZ2JcQSTEiFz+tJfF6yiiDXAbAmhou6H1fL2sT9SZQJsWR6p6sh9rG9XKdb7AFyCVJFv30fTVeRziYzmYAW77tMSGcSzmnByvI6WY2BvTHnZWJRgkw1c5vDBb06QZJBiXqAgu5Gvgq5ZDoss3BOC2aq5ov4vHJPLkGMcZds/O/CWQTEqfxnyN9DLFnTlnmYRzB8Xr+Iz+vnM7eqBQM8Tx/ytHpjC1EHIcoJCnkvch/EOp2nAs91kXSJK3h7mT57+uWNPNl4ji2AWMMtUZwz/pwYA3OhTEnvR8T7fjSPpZ5rwdiH4S8wUN4Myn3Ai38Kcl2Ye0PTM1C8719B/hRivZpeNp1rnm4E8HntwOf1P7RiXucq09UAoCdxSyxPN5fcajdY9i/In4DDaG6tjBhWgFQFVko80AvkErtxSwxF7B+kw/+msHdBrKZLlPMGiDdVV3dBrqvzZlicPbgljjD3OGgEE1/WByDWjb1GLqlDjy3+buR1oCNxFZqna4Brhnw9SJPYsrLhE8jVlP1beaqLJLboseM1tizV1VLB+9+SH0762mM1Qv6eJFkxcYzu8YIkhevRuOJm+DzyOYiVK5dDO3ieIVgkJYUKqcxn8JAfw890GWTbELmdySE2VRjY93vXKB73f0RkAG99XVYmFUem5xBsoSG4BEaGCvpQ0ffWsy4MwnU/FAteGTuWdD/nruX4CDn9PsR6vms5dimjRQkWtcMvePuHff0TXqRdw5uOsrAv9eBpfQqnar+uTH0KAOXJ8PHUgcwog0QEi9rIVM3YkqLH8mVzASR4S1pujqGiZ+iq+81p/2OwvBv5Z8glvq2+DW0TLIqI53tHadle4KWMpZDhKvGtRe+3e8za+xOlQl9NaB8Diz9H7odYlXZx6aV0VggWLTBPoRNF34yUitBOs0Fum98MogJCxn40jlHtPXssKxu+iMjUjpBsYIJ1gkWRgx7VkqefZ1lNnXHbVsjW8jIgnmQncUssjerrwWPp/r6OyF4O+3vQ/o5NTpVgUeukRYIwI7gbJmnZ5FtBDddyEXeKeMPR9D14LFM7v0dZnuxB262Z3DWCLbQYx+5LeOaPez6bnxgzz0PPvYApody/bLKwTDPnMrXzhxCrZ73vDcrV1uXMCBa1tljQB0u+GmfItR7CLWPs1XJXGtWT8bE4R+9BvgS5Ml2mnDEO87LPBcGiFp0/7KvzhnpqZD87tXMvxJqIlsUd53AzEGYLqJeeIFhfTu3Y/qew4q+ybVQP6OvbqR3b2DuCJUNUpnbkyfCxZMkGN3bul0jnpGoOYMcdyDZHrmQ14lqw5njJPlkytfMFiDUQUzvN4Uh+1xEsHrPZqR3ZMyuXr4PFm52/q45g8+tk4Kd25sPR+Zkj2FkMn+BQ1mYN9NTOWTjsHDmCKfUCUP4BxHJTO3Y4NU/LID9FjoPEJ5GrHLnmccLqySC2YG5qxyqFmisrsBp5gumZQdghcHZq59O0WGPNYXF3bSHgrV3hrwXwXcgjSNtfdLBlUEp6HkXvNZTvY4gjV0ogx6mdN6t88qRZVQ7DDxsd7mLC+R0sCpx3P06B7WvLhj3W61gbGrqpHdsVlFBfQwIdK5uNlUp4u1Lh7TiHrkqot+3olggmUzufQvr+rZ22ge5SwoYEi+Y/PmHequr1XaHSt6X9pneHBHNTO9GKy8FxSwSbtVO6zMMT6t2hCW7nC6O3stTZ+iZwbRLMTe3MVlLOfhMRLGo7ZCuOnwpuYX3gLsj2flo2K28AJSTY7NSO7AH/o6h97jgfCLRNsKj5r/FNI3My2MnHb3ah8GbI1/YLGwkIJlM7sjbr+1Fb3HG+ELBCsGiRDp0ya1QYfmT64cCoHdF7rRy3QDA3tdMKkDmJY51g0XKNHzebcXnwFIrbw6g3R+81Om5CMJna2Y18mVar3ii9u54vBFIlWLSoh0+b6+u1+u3MHNzGzMG66L3ocQzB5PuPn0dkQzb31k4UrB447hrBZrFgfOYdmqi/RwcaZ676EGRbOXtPfiMEc1M7UWDccXIEINvQ+Mn6zrHj9YfGTtTLsp3nqamAy+YR5MrkGl0Kh0ADBI4Ys/zUVPj4sdPBPQ2iuMsOAYeAQ2A+Av8Pby5Qwk3kUm8AAAAASUVORK5CYII="},VdD3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-user",use:"icon-user-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-user"><defs><style type="text/css"></style></defs><path d="M504.951 511.98c93.49 0 169.28-74.002 169.28-165.26 0-91.276-75.79-165.248-169.28-165.248-93.486 0-169.287 73.972-169.279 165.248-0.001 91.258 75.793 165.26 169.28 165.26z m77.6 55.098H441.466c-120.767 0-218.678 95.564-218.678 213.45V794.3c0 48.183 97.911 48.229 218.678 48.229H582.55c120.754 0 218.66-1.78 218.66-48.229v-13.77c0-117.887-97.898-213.45-218.66-213.45z" p-id="7987" /></symbol>'});i.a.add(l);t.default=l},"Vg/Y":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),r=a.n(n),o={name:"scrollPane",data:function(){return{left:0}},methods:{handleScroll:function(e){var t=e.wheelDelta||3*-e.deltaY,a=this.$refs.scrollContainer.offsetWidth,n=this.$refs.scrollWrapper.offsetWidth;t>0?this.left=Math.min(0,this.left+t):a-15<n?this.left<-(n-a+15)?this.left=this.left:this.left=Math.max(this.left+t,a-n-15):this.left=0},moveToTarget:function(e){var t=this.$refs.scrollContainer.offsetWidth,a=e.offsetLeft,n=e.offsetWidth;a<-this.left?this.left=15-a:a+15>-this.left&&a+n<-this.left+t-15||(this.left=-(a-(t-n)+15))}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(t){t.preventDefault(),e.handleScroll(t)}}},[a("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{left:e.left+"px"}},[e._t("default")],2)])},staticRenderFns:[]};var l={components:{ScrollPane:a("VU/8")(o,i,!1,function(e){a("6Iwp")},"data-v-3704aafb",null).exports},data:function(){return{visible:!1,top:0,left:0,selectedTag:{}}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews}},watch:{$route:function(){this.addViewTags(),this.moveToCurrentTag()},visible:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.addViewTags()},methods:{generateRoute:function(){return!!this.$route.name&&this.$route},isActive:function(e){return e.path===this.$route.path},addViewTags:function(){var e=this.generateRoute();if(!e)return!1;this.$store.dispatch("addVisitedViews",e)},moveToCurrentTag:function(){var e=this,t=this.$refs.tag||[];this.$nextTick(function(){var a=!0,n=!1,o=void 0;try{for(var i,l=r()(t);!(a=(i=l.next()).done);a=!0){var s=i.value;if(s.to===e.$route.path){e.$refs.scrollPane.moveToTarget(s.$el);break}}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}})},closeSelectedTag:function(e){var t=this;this.$store.dispatch("delVisitedViews",e).then(function(a){if(t.isActive(e)){var n=a.slice(-1)[0];n?t.$router.push(n.path):t.$router.push("/")}})},closeOthersTags:function(){var e=this;this.$router.push(this.selectedTag.path),this.$store.dispatch("delOthersViews",this.selectedTag).then(function(){e.moveToCurrentTag()})},closeAllTags:function(){this.$store.dispatch("delAllViews"),this.$router.push("/")},openMenu:function(e,t){this.visible=!0,this.selectedTag=e,this.left=t.clientX,this.top=t.clientY},closeMenu:function(){this.visible=!1}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tags-view-container"},[a("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},e._l(e.visitedViews,function(t){return a("router-link",{key:t.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:e.isActive(t)?"active":"",attrs:{to:t.path,query:t.query},nativeOn:{contextmenu:function(a){a.preventDefault(),e.openMenu(t,a)}}},[e._v("\n      "+e._s(t.title)+"\n      "),a("span",{staticClass:"el-icon-close",on:{click:function(a){a.preventDefault(),a.stopPropagation(),e.closeSelectedTag(t)}}})])})),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:e.left+"px",top:e.top+"px"}},[a("li",{on:{click:function(t){e.closeSelectedTag(e.selectedTag)}}},[e._v("关闭")]),e._v(" "),a("li",{on:{click:e.closeOthersTags}},[e._v("关闭其他")]),e._v(" "),a("li",{on:{click:e.closeAllTags}},[e._v("关闭所有")])])],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("dgA8"),a("Mt1n")},"data-v-1ce4f59a",null);t.default=c.exports},VhU1:function(e,t){},"W/yb":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("sJ5/"),u=a("NYxO"),d=a("0xDb"),p={components:{purchasetable:a("YGj+").default},data:function(){return{planform:{purchorder:{ticketno:"",customer:"",customername:"",servicer:"",servicername:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",sumordernum:"",sumfactrecnum:"",sumamount:"",memos:"",contractno:"",linkusername:"",linktel:"",receiveaddress:"",revstore:"",revstorename:"",tkttype:"",fromorderno:"",planarrivedate:"",deliverway:"",applyuser:"",sumpackunitnum:"",closed:"",rate:"",paymethod:"",enquiryorder:""},purchorderItems:[]},statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],list:[],pagesize:10,pageindex:1,total:0,currentPage:1,deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"},{name:"自提",value:"3"}],loading:!1,paymethod:[{name:"货到付款",value:"1"},{name:"货到票到付款",value:"2"},{name:"先款后货",value:"3"}],totalorder:"",totalamount:""}},computed:s()({},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h,paymethodFilter:function(e){switch(parseInt(e)){case 1:return"货到付款";case 2:return"货到票到付款";case 3:return"先款后货";default:return""}},statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}},deliverwayFilter:function(e){switch(parseInt(e)){case 1:return"库发";case 2:return"供应商直发";case 3:return"自提";default:return""}},recmethodFilter:function(e){switch(parseInt(e)){case 1:return"货到收款";case 2:return"预收款";default:return""}},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.purchorder.revstore&&(t=a.storename)}),t}},created:function(){this.getListData(),this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.gridData.length||this.$store.dispatch("GetGysList")},methods:{getName:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getCustomerName:function(e){var t="";return this.gridData.length&&this.gridData.forEach(function(a){a.requestid===e&&(t=a.name)}),t},getListData:function(){var e=this;this.loading=!0;var t=this.planform.purchorder,a={},n=!0,o=!1,l=void 0;try{for(var u,d=i()(r()(t));!(n=(u=d.next()).done);n=!0){var p=u.value;""!==t[p]&&(a[p]=t[p])}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}Object(c.s)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.purchorders,e.total=t.data.total,e.currentPage=t.data.currentPage,e.totalorder=t.data.sumOrderNum,e.totalamount=t.data.sumAmount,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={purchorder:{},purchorderItems:[]}}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态",prop:"purchorder.status"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.purchorder.status,callback:function(t){e.$set(e.planform.purchorder,"status",t)},expression:"planform.purchorder.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"采购单号",prop:"purchorder.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.purchorder.ticketno,callback:function(t){e.$set(e.planform.purchorder,"ticketno",t)},expression:"planform.purchorder.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"来源计划单号",prop:"purchorder.enquiryorder"}},[a("el-input",{model:{value:e.planform.purchorder.enquiryorder,callback:function(t){e.$set(e.planform.purchorder,"enquiryorder",t)},expression:"planform.purchorder.enquiryorder"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"purchorder.linkusername"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.purchorder.linkusername,callback:function(t){e.$set(e.planform.purchorder,"linkusername",t)},expression:"planform.purchorder.linkusername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货方式",prop:"purchorder.deliverway"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.purchorder.deliverway,callback:function(t){e.$set(e.planform.purchorder,"deliverway",t)},expression:"planform.purchorder.deliverway"}},e._l(e.deliverway,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"供应商",prop:"purchorder.servicer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.purchorder.servicer,callback:function(t){e.$set(e.planform.purchorder,"servicer",t)},expression:"planform.purchorder.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方式",prop:"purchorder.paymethod"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.planform.purchorder.paymethod,callback:function(t){e.$set(e.planform.purchorder,"paymethod",t)},expression:"planform.purchorder.paymethod"}},e._l(e.paymethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"到达仓库",prop:"purchorder.revstore"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.purchorder.revstore,callback:function(t){e.$set(e.planform.purchorder,"revstore",t)},expression:"planform.purchorder.revstore"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号",prop:"purchorder.contractno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.purchorder.contractno,callback:function(t){e.$set(e.planform.purchorder,"contractno",t)},expression:"planform.purchorder.contractno"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"400px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("purchasetable",{attrs:{list:e.list,loading:e.loading,totalorder:e.totalorder,totalamount:e.totalamount}}),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("yVtu")},"data-v-0341acaf",null);t.default=f.exports},WTox:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("NYxO"),i=a("tlvQ"),l={name:"scrollBar",data:function(){return{top:0}},methods:{handleScroll:function(e){var t=e.wheelDelta||3*-e.deltaY,a=this.$refs.scrollContainer.offsetHeight,n=this.$refs.scrollWrapper.offsetHeight;t>0?this.top=Math.min(0,this.top+t):a-15<n?this.top<-(n-a+15)?this.top=this.top:this.top=Math.max(this.top+t,a-n-15):this.top=0}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(t){t.preventDefault(),e.handleScroll(t)}}},[a("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{top:e.top+"px"}},[e._t("default")],2)])},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("KRDl")},"data-v-04e21ed5",null).exports,u={components:{SidebarItem:i.default,ScrollBar:c},computed:r()({},Object(o.b)(["permission_routers","sidebar"]),{routes:function(){return this.$router.options.routes},isCollapse:function(){return!this.sidebar.opened}})},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("scroll-bar",[t("el-menu",{attrs:{mode:"vertical","show-timeout":200,"default-active":this.$route.path,collapse:this.isCollapse,"background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"}},[t("sidebar-item",{attrs:{routes:this.permission_routers}})],1)],1)},staticRenderFns:[]},p=a("VU/8")(u,d,!1,null,null,null);t.default=p.exports},WUv2:function(e,t){},Wzj1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("0xDb"),i=a("0TzL"),l={data:function(){return{tableData:[],currentPage:1,pagesize:10,pageindex:1,total:0,loading:!1,quotedLoading:[],filterData:[{text:"正在招标",value:"正在招标"},{text:"正在竞标",value:"正在竞标"},{text:"竞标结束",value:"竞标结束"}],postData:{}}},filters:{parseTime:o.h,formatTime:o.g,parseType:function(e){return 0===e||"0"===e?"明细招标":1===e||"1"===e?"品类招标":e}},created:function(){this.getData()},methods:{filterChange:function(e){this.pageindex=1,this.postData={status:e.status[0]},console.log(e),this.getData()},filterTag:function(e,t){return t.etpOrderMain.status===e},tableRowClassName:function(e){var t=e.row;return"正在竞标"===t.etpOrderMain.status?"success-row":"竞标结束"===t.etpOrderMain.status?"warning-row":void 0},getData:function(){var e=this;this.loading=!0,Object(i.h)(r()({pageFlag:1,pageindex:this.pageindex,pagesize:this.pagesize,bidCenterFlag:1},this.postData)).then(function(t){e.loading=!1,e.tableData=t.data.data,e.currentPage=t.data.currentPage,e.total=t.data.total}).catch(function(t){console.log(t),e.loading=!1})},viewRow:function(e){this.$router.push({name:"etpdetailsale",params:{id:e}})},deleteRow:function(e){this.tableData.splice(e,1)},handleSizeChange:function(e){this.pagesize=e,this.getData()},handleCurrentChange:function(e){this.pageindex=e,this.getData()},quoted:function(e,t){var a=this;this.$set(this.quotedLoading,t,!0),e.JBid?this.$router.push({name:"biddetail",params:{id:e.JBid}}):Object(i.i)({id:e.etpOrderMain.id}).then(function(n){console.log(n),a.$set(a.quotedLoading,t,!1),a.$router.push({name:"quoted",params:{id:e.etpOrderMain.id}})}).catch(function(n){console.log(n),a.$router.push({name:"paybail",params:{id:e.etpOrderMain.id}}),a.$set(a.quotedLoading,t,!1)})},viewBidDetail:function(e){this.$router.push({name:"biddetail",params:{id:e.JBid}})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName},on:{"filter-change":e.filterChange}},[a("el-table-column",{attrs:{fixed:"",label:"招标公告号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewRow(t.row.etpOrderMain.id)}}},[e._v("\n          "+e._s(t.row.etpOrderMain.tpnumber)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"etpOrderMain.title",label:"公告标题"}}),e._v(" "),a("el-table-column",{attrs:{label:"招标类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseType")(t.row.etpOrderMain.tptype))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"etpOrderMain.status",filters:e.filterData,"filter-placement":"bottom-end","filter-multiple":!1,"column-key":"status",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"正在竞标"===t.row.etpOrderMain.status?"success":"竞标结束"===t.row.etpOrderMain.status?"info":"primary"}},[e._v(e._s(t.row.etpOrderMain.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"etpOrderMain.customname",label:"发标单位"}}),e._v(" "),a("el-table-column",{attrs:{label:"竞标开始时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.etpOrderMain.starttime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标结束时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.etpOrderMain.endtime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("parseTime")(t.row.etpOrderMain.subtime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["正在竞标"===t.row.etpOrderMain.status?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.quotedLoading[t.$index],expression:"quotedLoading[scope.$index]"}],attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.quoted(t.row,t.$index)}}},[e._v("\n          "+e._s(t.row.JBid?"再次报价":"报价")+"\n        ")]):e._e(),e._v(" "),"竞标结束"===t.row.etpOrderMain.status&&t.row.JBid?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewBidDetail(t.row)}}},[e._v("\n          查看记录\n        ")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("6/3j")},"data-v-2d29e050",null);t.default=c.exports},XGXK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("vHhr"),s=a("0xDb"),c=a("8hSj"),u={components:{Sticky:l.a},data:function(){return{planform:{quotation:{},quotationItems:[]},fetchSuccess:!0,delloading:!1}},computed:r()({sumordernum:function(){var e=0;return this.planform.quotationItems.forEach(function(t){e+=t.ordernum}),e}},Object(i.b)(["company","companyId","userInfo","visitedViews","isallow"])),filters:{parseTime:s.h},created:function(){this.getDetail()},methods:{Modify:c.a,delQuotation:function(){var e=this,t=this.visitedViews.filter(function(t){return t.path===e.$route.path});this.$confirm("确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){Object(o.m)({ticketNo:e.$route.params.ticketno,checkFlag:3}).then(function(a){e.$message({message:"删除成功"}),e.$store.dispatch("delVisitedViews",t[0]).then(function(){e.$router.push({name:"quotationorderlist"})})})})},getDetail:function(){var e=this;Object(o.e)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t),e.planform=t.data}).catch(function(t){console.log(t),e.fetchSuccess=!1})},nextpage:function(e,t){var a={quotation:this.$route.params.ticketno};t&&(a.type=t),this.$router.push({name:e,params:a})},Edit:function(){this.$router.push({name:"newquotationorder",params:{enquiryorder:this.planform.quotation.fromorderno,type:this.planform.quotation.quotationflag},query:{id:this.$route.params.ticketno}})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[1!=e.planform.quotation.status?a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[-1==e.planform.quotation.status||-2==e.planform.quotation.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"quotation")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.quotation.status&&e.isallow?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"quotation")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"quotation")}}},[e._v("驳回")])]:[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("详情")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价单号"}},[e._v("\r\n          "+e._s(e.planform.quotation.ticketno)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"询价方",prop:"quotation.customer"}},[e._v("\r\n          "+e._s(e.planform.quotation.customername)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价方",prop:"quotation.enterprise"}},[e._v("\r\n          "+e._s(e.planform.quotation.enterpricename)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"金额"}},[e._v("\r\n          ￥"+e._s(e.planform.quotation.sumamount)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建日期",prop:"quotation.createdate"}},[e._v("\r\n          "+e._s(e.planform.quotation.createdate)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价日期",prop:"quotation.quotationdate"}},[e._v("\r\n          "+e._s(e.planform.quotation.quotationdate)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建人",prop:"quotation.createuser"}},[e._v("\r\n          "+e._s(e.planform.quotation.createuser)+"\r\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"quotationItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.quotationItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialname,callback:function(a){e.$set(t.row,"materialname",a)},expression:"scope.row.materialname"}})]:a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialtag,callback:function(a){e.$set(t.row,"materialtag",a)},expression:"scope.row.materialtag"}})]:a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialrule,callback:function(a){e.$set(t.row,"materialrule",a)},expression:"scope.row.materialrule"}})]:a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialsize,callback:function(a){e.$set(t.row,"materialsize",a)},expression:"scope.row.materialsize"}})]:a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderunit,callback:function(a){e.$set(t.row,"orderunit",a)},expression:"scope.row.orderunit"}})]:a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"质保期",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:t.row.warrantydate,callback:function(a){e.$set(t.row,"warrantydate",a)},expression:"scope.row.warrantydate"}})]:a("span",[e._v(e._s(t.row.warrantydate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供货期",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:t.row.supplydate,callback:function(a){e.$set(t.row,"supplydate",a)},expression:"scope.row.supplydate"}})]:a("span",[e._v(e._s(t.row.supplydate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.row.servicer,callback:function(a){e.$set(t.row,"servicer",a)},expression:"scope.row.servicer"}},e._l(e.servicers,function(e){return a("el-option",{key:e.servicer,attrs:{label:e.servicer,value:e.servicername}})}))]:a("span",[e._v(e._s(t.row.servicername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"价格",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}})]:a("span",[e._v(e._s(t.row.memos))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("ROPh")},"data-v-eebdd35c",null);t.default=p.exports},XQtt:function(e,t){},Xc0g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("Dd8w"),i=a.n(o),l=a("E7jB"),s=a("0xDb"),c=a("NYxO"),u={data:function(){return{tableData:[],pagesize:10,pageindex:1,formInline:{searchType:"0",searchNumber:"",time:[],customer:{code:"",id:"",name:""}},tbloading:!1,loading:!1,dialogTableVisible:!1,gridData:[],gridLoading:!1,currentRow:{},total:0,currentPage:1,refundLoading:[],refundVisible:!1,refundDetail:{}}},computed:i()({},Object(c.b)(["userInfo"])),filters:{parseTime:s.h},created:function(){this.getBailData({pageFlag:1,pageindex:this.pageindex,pagesize:this.pagesize,saleenterprice:this.userInfo.companyid})},methods:{getBailData:function(){var e=this;this.tbloading=!0;var t={pageFlag:1,pageindex:this.pageindex,pagesize:this.pagesize,saleenterprice:this.userInfo.companyid};"0"===this.formInline.searchType&&this.formInline.searchNumber&&(t.tpnumber=this.formInline.searchNumber),"1"===this.formInline.searchType&&this.formInline.searchNumber&&(t.ticketno=this.formInline.searchNumber),this.formInline.customer&&this.formInline.customer.id&&(t.saleenterprice=this.formInline.customer.id),this.formInline.time&&this.formInline.time.length&&(t.startdate=Object(s.h)(this.formInline.time[0],"{y}{m}{d}"),t.enddate=Object(s.h)(this.formInline.time[1],"{y}{m}{d}")),Object(l.a)(t).then(function(t){e.tbloading=!1,e.tableData=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage}).catch(function(t){e.tbloading=!1,console.log(t)})},onSearchSubmit:function(){this.pageindex=1,this.getBailData()},getCustomer:function(){var e=this;this.dialogTableVisible=!0,this.gridData.length||(this.gridLoading=!0,Object(l.e)({ufBidBailBillRequestDTO:{pageFlag:0},buyenterprice:this.userInfo.companyid}).then(function(t){e.gridData=t.data,e.gridLoading=!1}).catch(function(t){console.log(t),e.gridLoading=!1}))},handleCurrentChange:function(e){this.currentRow=e},handelDialogConfirm:function(){this.dialogTableVisible=!1,this.formInline.customer=JSON.parse(r()(this.currentRow))},handelDialogCancel:function(){this.dialogTableVisible=!1,this.formInline.customer=JSON.parse(r()({code:"",id:"",name:""}))},handleSizeChange:function(e){this.pagesize=e,this.getBailData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getBailData()},viewRow:function(e,t){var a=this;this.$set(this.refundLoading,t,!0),Object(l.j)({norefund:e.norefund}).then(function(e){console.log(e),a.$set(a.refundLoading,t,!1),a.refundVisible=!0,a.refundDetail=e.data}).catch(function(e){console.log(e),a.$set(a.refundLoading,t,!1)})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-search"},on:{focus:e.getCustomer},model:{value:e.formInline.customer.name,callback:function(t){e.$set(e.formInline.customer,"name",t)},expression:"formInline.customer.name"}})],1),e._v(" "),a("el-form-item",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入查询号码"},model:{value:e.formInline.searchNumber,callback:function(t){e.$set(e.formInline,"searchNumber",t)},expression:"formInline.searchNumber"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.formInline.searchType,callback:function(t){e.$set(e.formInline,"searchType",t)},expression:"formInline.searchType"}},[a("el-option",{attrs:{label:"招标编号",value:"0",selected:"true"}}),e._v(" "),a("el-option",{attrs:{label:"交易流水号",value:"1"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"支付日期"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至",editable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.formInline.time,callback:function(t){e.$set(e.formInline,"time",t)},expression:"formInline.time"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearchSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tbloading,expression:"tbloading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{fixed:"",label:"招标编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.tpnumber)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交易流水号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.ticketno)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供货企业",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.salename)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交易金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        ￥"+e._s(t.row.bailamount)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"R"===t.row.paystatus?"success":"info"}},[e._v(e._s("S"===t.row.paystatus?"待退款":"已退款"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.paydate)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["R"===t.row.paystatus?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.refundLoading[t.$index],expression:"refundLoading[scope.$index]"}],attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewRow(t.row,t.$index)}}},[e._v("\r\n          详情\r\n        ")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}}),e._v(" "),a("el-dialog",{attrs:{title:"供应商选择",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.gridLoading,expression:"gridLoading"}],ref:"singleTable",attrs:{data:e.gridData,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"code",label:"企业编号"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"企业名称"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handelDialogCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!Object.keys(e.currentRow).length},on:{click:e.handelDialogConfirm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"退款详情",visible:e.refundVisible},on:{"update:visible":function(t){e.refundVisible=t}}},[a("el-form",{attrs:{model:e.refundDetail,"label-width":"120"}},[a("el-form-item",{attrs:{label:"订单交易流水号"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.ticketno))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款单流水号"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.norefund))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款状态"}},[a("el-tag",{attrs:{size:"medium",type:"S"===e.refundDetail.refundstatus?"success":"info"}},[e._v(e._s("S"===e.refundDetail.refundstatus?"退款成功":"退款失败"))])],1),e._v(" "),a("el-form-item",{attrs:{label:"退款企业"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.buyname))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款账户"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.outaccount))])]),e._v(" "),a("el-form-item",{attrs:{label:"到账企业"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.salename))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款金额"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.refundmoney))])]),e._v(" "),a("el-form-item",{attrs:{label:"退款时间"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.refunddate)+e._s(e.refundDetail.refundtime))])]),e._v(" "),e.refundDetail.actualdate?a("el-form-item",{attrs:{label:"到账日期"}},[a("span",{staticClass:"formtext"},[e._v(e._s(e.refundDetail.actualdate))])]):e._e()],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("xn8Z"),a("ct5t")},"data-v-293c8c60",null);t.default=p.exports},XjCR:function(e,t){},YBQJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("vLgD");var r={data:function(){return{list:null,listLoading:!0}},filters:{statusFilter:function(e){return{published:"success",draft:"gray",deleted:"danger"}[e]}},created:function(){this.fetchData()},methods:{fetchData:function(){var e,t=this;this.listLoading=!0,(e=this.listQuery,Object(n.a)({url:"/table/list",method:"get",params:e})).then(function(e){t.list=e.data.items,t.listLoading=!1})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Title"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.title)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Author",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.author))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Pageviews",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.pageviews)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{"class-name":"status-col",label:"Status",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v(e._s(t.row.status))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"Display_time",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(t.row.display_time))])]}}])})],1)],1)},staticRenderFns:[]},i=a("VU/8")(r,o,!1,null,null,null);t.default=i.exports},"YGj+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={props:["list","loading","totalorder","totalamount"],filters:{parseTime:a("0xDb").h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}},deliverwayFilter:function(e){switch(parseInt(e)){case 1:return"库发";case 2:return"供应商直发";case 3:return"自提";default:return""}},paymethodFilter:function(e){switch(parseInt(e)){case 1:return"货到付款";case 2:return"货到票到付款";case 3:return"先款后货";default:return""}},closedFilter:function(e){switch(parseInt(e)){case 0:return"未完结";case 1:return"完结";default:return""}}},methods:{nextpage:function(e){this.$router.push({name:"purchaseorderdetail",params:{ticketno:e.ticketno}})},getSummaries:function(e){var t=this,a=e.columns,n=[];return n[0]="合计",a.forEach(function(e,a){"订单数量"===e.label?n[a]=t.totalorder:"采购金额"===e.label&&(n[a]=t.totalamount)}),n}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"show-summary":"","summary-method":e.getSummaries,border:""}},[a("el-table-column",{attrs:{label:"状态",fixed:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购单",fixed:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpage(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"来源计划单",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.enquiryorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"已入库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumfactrecnum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"完结状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("closedFilter")(t.row.closed)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计划到货日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planarrivedate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购金额",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sumamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交货地址",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiveaddress))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"交货方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("deliverwayFilter")(t.row.deliverway)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"到达仓库",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.revstorename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.servicername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商联系人",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linkusername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商电话",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.linktel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"付款方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("paymethodFilter")(t.row.paymethod)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1)},staticRenderFns:[]};var o=a("VU/8")(n,r,!1,function(e){a("golr")},null,null);t.default=o.exports},YH52:function(e,t){},YaEn:function(e,t,a){"use strict";var n=a("Gu7T"),r=a.n(n),o=a("7+uW"),i=a("/ocq"),l=a("AkUR"),s=a("1UuX"),c={path:"/etp",component:l.default,redirect:"/etp/addetp",name:"etp",alwaysShow:!0,meta:{title:"招投标",roles:["701","710"],icon:"table"},children:[{path:"addetp",component:s("enterprice/index"),name:"addetp",meta:{title:"我要发标",icon:"form",roles:["701"]}},{path:"myetp",component:s("enterprice/myetp"),name:"myetp",meta:{title:"我的招标",icon:"busyness",roles:["701"]}},{path:"bail",component:s("bail/index"),name:"bail",meta:{title:"保证金管理",icon:"money",roles:["701"]}},{path:"etpdetail/:id",component:s("enterprice/etpdetail"),name:"etpdetail",hidden:!0,meta:{title:"招标详情",roles:["701"]}},{path:"tenderdetail/:id",component:s("enterprice/tenderdetail"),name:"tenderdetail",hidden:!0,meta:{title:"明细中标",roles:["701"]}},{path:"etpdetailsale/:id",component:s("enterprice/etpdetail"),name:"etpdetailsale",hidden:!0,meta:{title:"招标详情",roles:["710"]}},{path:"bidlist/:tpnumber",component:s("enterprice/bidlist"),name:"bidlist",hidden:!0,meta:{title:"总价中标",roles:["701"]}},{path:"etpcenter",component:s("enterprice/etpcenter"),name:"etpcenter",meta:{title:"招标公告中心",roles:["710"],icon:"example"}},{path:"bidrecord",component:s("bail/bidrecord"),name:"bidrecord",meta:{title:"竞标记录",roles:["710"],icon:"tree"}},{path:"baillist",component:s("bail/baillist"),name:"baillist",meta:{title:"已交保证金",roles:["710"],icon:"money"}},{path:"quoted/:id",component:s("enterprice/quoted"),name:"quoted",hidden:!0,meta:{title:"竞标报价",roles:["710"],icon:"example"}},{path:"biddetail/:id",component:s("enterprice/biddetail"),name:"biddetail",hidden:!0,meta:{title:"竞标详情",roles:["710","701"]}},{path:"paybail/:id",component:s("enterprice/paybail"),name:"paybail",hidden:!0,meta:{title:"支付竞标保证金",roles:["710"]}}]},u=a("0xDb"),d=a("1UuX"),p=[{path:"/planorder",component:l.default,redirect:"/planorder/newplanorder",name:"planorder",alwaysShow:!0,meta:{title:"计划单管理",icon:"plan",roles:["service_business","service_business_verify","service_market"]},children:[{path:"newplanorder",component:d("planorder/newplanorder"),name:"newplanorder",meta:{title:"新建计划单",icon:"form",roles:["service_market"]}},{path:"planorderlist",component:d("planorder/planorderlist"),name:"planorderlist",meta:{title:"查询计划单",icon:"search",roles:["service_business","service_business_verify","service_market"]}},{path:"plandetail/:ticketno",component:d("planorder/plandetail"),name:"plandetail",hidden:!0,meta:{title:"计划单详情",roles:["service_business","service_business_verify","service_market"]}}]},{path:"/quotation",component:l.default,redirect:"/quotation/quotationorderlist",name:"quotation",meta:{title:"报价单管理",icon:"quotation",roles:["service_business","service_business_verify","service_market"]},children:[{path:"newquotationorder/:enquiryorder/:type",component:d("quotation/newquotationorder"),name:"newquotationorder",hidden:!0,meta:{title:"新建报价单",icon:"form",roles:["service_business","service_business_verify"]}},{path:"serverquotationorderlist",component:d("quotation/quotationorderlist"),name:"serverquotationorderlist",meta:{title:"供应商报价单",icon:"search",roles:["service_business","service_business_verify","service_market"]}},{path:"customerquotationorderlist",component:d("quotation/quotationorderlist"),name:"customerquotationorderlist",meta:{title:"给客户报价单",icon:"search",roles:["service_business","service_business_verify","service_market"]}},{path:"quotationorderdetail/:ticketno",component:d("quotation/quotationorderdetail"),hidden:!0,name:"quotationorderdetail",meta:{title:"报价单详情",icon:"form",roles:["service_business","service_business_verify","service_market"]}}]},{path:"/purchaseorder",component:l.default,redirect:"/purchaseorder/purchaseorderlist",name:"purchaseorder",alwaysShow:!0,meta:{title:"采购订单管理",icon:"purchase",roles:["service_finance","service_business_verify","service_business","service_market"]},children:[{path:"newpurchaseorder/:enquiryorder",component:d("purchaseorder/newpurchaseorder"),name:"newpurchaseorder",hidden:!0,meta:{title:"新建采购订单",icon:"form",roles:["service_business","service_business_verify"]}},{path:"purchaseorderlist",component:d("purchaseorder/purchaseorderlist"),name:"purchaseorderlist",meta:{title:"采购订单查询",icon:"search",roles:["service_finance","service_business","service_business_verify","service_market"]}},{path:"purchaseorderdetail/:ticketno",component:d("purchaseorder/purchaseorderdetail"),name:"purchaseorderdetail",hidden:!0,meta:{title:"采购订单详情",icon:"form",roles:["service_finance","service_business","service_business_verify","service_market"]}}]},{path:"/saleorder",component:l.default,redirect:"/saleorder/saleorderlist",name:"saleorder",alwaysShow:!1,meta:{title:"销售订单管理",icon:"sale",roles:["service_finance","service_business","service_business_verify","service_market"]},children:[{path:"newsaleorder/:enquiryorder",component:d("saleorder/newsaleorder"),name:"newsaleorder",hidden:!0,meta:{title:"新建销售订单",icon:"form",roles:["service_business","service_business_verify"]}},{path:"saleorderlist",component:d("saleorder/saleorderlist"),name:"saleorderlist",meta:{title:"销售订单查询",icon:"search",roles:["service_business","service_business_verify","service_finance","service_market"]}},{path:"saleorderdetail/:ticketno",component:d("saleorder/saleorderdetail"),name:"saleorderdetail",hidden:!0,meta:{title:"销售订单详情",icon:"form",roles:["service_business","service_business_verify","service_finance","service_market"]}}]},{path:"/inmanage",component:l.default,redirect:"/inmanage/innoticelist",name:"inmanage",meta:{title:"收货管理",icon:"in",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]},children:[{path:"newinnotice/:ticketno",component:d("innotice/newinnotice"),name:"newinnotice",hidden:!0,meta:{title:"新建收货通知单",icon:"form",roles:["service_business","service_business_verify"]}},{path:"innoticelist",component:d("innotice/innoticelist"),name:"innoticelist",meta:{title:"收货通知单查询",icon:"search",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}},{path:"innoticedetail/:ticketno",component:d("innotice/innoticedetail"),hidden:!0,name:"innoticedetail",meta:{title:"收货通知单详情",icon:"form",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}},{path:"newinstore/:ticketno",component:d("instore/newinstore"),name:"newinstore",hidden:!0,meta:{title:"新建入库单",icon:"form",roles:["service_business","service_business_verify"]}},{path:"instorelist",component:d("instore/instorelist"),name:"instorelist",meta:{title:"入库单查询",icon:"search",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}},{path:"instoredetail/:ticketno",component:d("instore/instoredetail"),hidden:!0,name:"instoredetail",meta:{title:"入库单详情",icon:"form",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}}]},{path:"/outmanage",component:l.default,redirect:"/outmanage/outnoticelist",name:"outmanage",meta:{title:"发货管理",icon:"out",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]},children:[{path:"newoutnotice/:ticketno",component:d("outnotice/newoutnotice"),name:"newoutnotice",hidden:!0,meta:{title:"新建发货通知单",icon:"form",roles:["service_business","service_business_verify"]}},{path:"outnoticelist",component:d("outnotice/outnoticelist"),name:"outnoticelist",meta:{title:"发货通知单查询",icon:"search",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}},{path:"outnoticedetail/:ticketno",component:d("outnotice/outnoticedetail"),hidden:!0,name:"outnoticedetail",meta:{title:"发货通知单详情",icon:"form",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}},{path:"newoutstore/:ticketno",component:d("outstore/newoutstore"),name:"newoutstore",hidden:!0,meta:{title:"新建出库单",icon:"form",roles:["service_business","service_business_verify"]}},{path:"outstorelist",component:d("outstore/outstorelist"),name:"outstorelist",meta:{title:"出库单查询",icon:"search",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}},{path:"outstoredetail/:ticketno",component:d("outstore/outstoredetail"),hidden:!0,name:"outstoredetail",meta:{title:"出库单详情",icon:"form",roles:["service_business","service_business_verify","service_finance","service_sell","service_market"]}}]},{path:"/payment",component:l.default,redirect:"/payment/newpayment",name:"payment",meta:{title:"付款管理",icon:"tree",roles:["service_finance"]},children:[{path:"newpayment",component:d("payment/newpayment"),name:"newpayment",meta:{title:"新建付款单",icon:"form",roles:["service_finance"]}},{path:"paymentlist",component:d("payment/paymentlist"),name:"paymentlist",meta:{title:"付款单查询",icon:"search",roles:["service_finance"]}},{path:"paymentdetail/:ticketno",component:d("payment/paymentdetail"),hidden:!0,name:"paymentdetail",meta:{title:"付款单详情",icon:"form",roles:["service_finance"]}}]},{path:"/receivable",component:l.default,redirect:"/receivable/newreceivable",name:"receivable",meta:{title:"收款管理",icon:"tree",roles:["service_finance"]},children:[{path:"newreceivable",component:d("receivable/newreceivable"),name:"newreceivable",meta:{title:"新建收款单",icon:"form",roles:["service_finance"]}},{path:"receivablelist",component:d("receivable/receivablelist"),name:"receivablelist",meta:{title:"收款单查询",icon:"search",roles:["service_finance"]}},{path:"receivabledetail/:ticketno",component:d("receivable/receivabledetail"),hidden:!0,name:"receivabledetail",meta:{title:"收款单详情",icon:"form",roles:["service_finance"]}}]},{path:"/invoice/inputinvoice",component:l.default,redirect:"/invoice/inputinvoice/newinputinvoice",name:"inputinvoice",meta:{title:"进项发票",icon:"tree",roles:["service_finance"]},children:[{path:"newinputinvoice",component:d("invoice/inputinvoice/newinputinvoice"),name:"newinputinvoice",meta:{title:"新建进项发票",icon:"form",roles:["service_finance"]}},{path:"inputinvoicelist",component:d("invoice/inputinvoice/inputinvoicelist"),name:"inputinvoicelist",meta:{title:"进项发票查询",icon:"search",roles:["service_finance"]}},{path:"inputinvoicedetail/:ticketno",component:d("invoice/inputinvoice/inputinvoicedetail"),hidden:!0,name:"inputinvoicedetail",meta:{title:"进项发票详情",icon:"form",roles:["service_finance"]}}]},{path:"/invoice/outputinvoice",component:l.default,redirect:"/invoice/outputinvoice/newoutputinvoice",name:"outputinvoice",meta:{title:"销项发票",icon:"tree",roles:["service_finance"]},children:[{path:"newoutputinvoice",component:d("invoice/outputinvoice/newoutputinvoice"),name:"newoutputinvoice",meta:{title:"申请销项发票",icon:"form",roles:["service_finance"]}},{path:"outputinvoicelist",component:d("invoice/outputinvoice/outputinvoicelist"),name:"outputinvoicelist",meta:{title:"开票申请查询",icon:"search",roles:["service_finance"]}},{path:"outputinvoiceresultlist",component:d("invoice/outputinvoice/outputinvoiceresultlist"),name:"outputinvoiceresultlist",meta:{title:"开票结果查询",icon:"search",roles:["service_finance"]}},{path:"outputinvoicedetail/:ticketno",component:d("invoice/outputinvoice/outputinvoicedetail"),hidden:!0,name:"outputinvoicedetail",meta:{title:"销项开票申请详情",icon:"form",roles:["service_finance"]}},{path:"outputinvoiceresultdetail/:ticketno",component:d("invoice/outputinvoice/outputinvoiceresultdetail"),hidden:!0,name:"outputinvoiceresultdetail",meta:{title:"销项开票详情",icon:"form",roles:["service_finance"]}},{path:"makeoutinvoice/:ticketno",component:d("invoice/outputinvoice/makeoutinvoice"),hidden:!0,name:"makeoutinvoice",meta:{title:"财务开票",icon:"form",roles:["service_finance"]}}]},{path:"/stock",component:l.default,redirect:"/stock/stocklist",name:"stock",meta:{title:"库存查询",icon:"stock"},children:[{path:"stocklist",component:d("stock/stocklist"),name:"stocklist",meta:{title:"库存查询",icon:"stock"}}]},{name:"reportcenter",path:"/reportcenter",outLinkUrl:Object(u.j)("supply_invin_main"),meta:{title:"报表中心",icon:"stock"},children:[{name:"supply_invin_main",path:"supply_invin_main",outLinkUrl:Object(u.j)("supply_invin_main"),meta:{title:"采购入库明细表",icon:"stock",roles:["service_finance"]}},{name:"supply_invout_main",path:"supply_invout_main",outLinkUrl:Object(u.j)("supply_invout_main"),meta:{title:"销售出库明细表",icon:"stock",roles:["service_finance"]}},{name:"supply_stock",path:"supply_stock",outLinkUrl:Object(u.j)("supply_stock"),meta:{title:"库存明细表",icon:"stock",roles:["service_finance"]}}]}];a.d(t,"b",function(){return f}),a.d(t,"a",function(){return v});var m=a("1UuX");o.default.use(i.a);var f=[{path:"/login",redirect:"/csj_login",hidden:!0},{path:"/404",component:m("404"),hidden:!0},{path:"/401",component:m("401"),hidden:!0},{path:"/",component:l.default,redirect:"dashboard",hidden:!0,children:[{name:"dashboard",path:"/dashboard",meta:{title:"主页",noCache:!0},component:m("dashboard/index")}]}],v=(t.c=new i.a({mode:"hash",scrollBehavior:function(){return{y:0}},routes:f}),[].concat(r()(p),[c]))},YefL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-in",use:"icon-in-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-in"><defs><style type="text/css"></style></defs><path d="M832 1024H192a192 192 0 0 1-192-192v-128h128v128a64 64 0 0 0 64 64h640c35.392 0 64-28.608 64-64V192a64 64 0 0 0-64-64H192C156.672 128 128 156.672 128 192v128H0V192a192 192 0 0 1 192-192h640a192 192 0 0 1 192 192v640a192 192 0 0 1-192 192zM295.488 324.8a64.106667 64.106667 0 0 1 69.76 13.888l128 128c12.48 12.48 18.752 28.864 18.752 45.248s-6.272 32.768-18.752 45.248l-128 128a64.213333 64.213333 0 0 1-69.76 13.888A64.042667 64.042667 0 0 1 256 639.936V576H64a64 64 0 1 1 0-128h192v-64.064c0-25.856 15.616-49.28 39.488-59.136z" fill="" p-id="12038" /></symbol>'});i.a.add(l);t.default=l},Zbav:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("vHhr"),l=a("NYxO"),s=a("0xDb"),c=a("8hSj"),u={components:{Sticky:i.a},data:function(){return{planform:{outNotice:{ticketno:"",outstore:"",outstorename:"",outdate:"",enterprise:"",enterprisename:"",customer:"",customername:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",sumoutnum:"",sumordernum:"",linkaddress:"",linkuser:"",linktel:"",saleorder:"",closed:"",memos:"",isdelete:""},outNoticeItems:[]},gridData:[],gridLoading:!1,submitloading:!1,deliverway:"",revstoreList:[],fetchSuccess:!0}},computed:r()({},Object(l.b)(["company","companyId","userInfo","visitedViews","isallow","isallownew"])),filters:{parseTime:s.h},created:function(){this.getOutNoticeDetail()},methods:{Modify:c.a,getPurchaseDetail:function(){var e=this;Object(o.t)({ticketno:this.planform.outNotice.saleorder}).then(function(t){console.log(t),e.deliverway=t.data.saleOrder.deliverway}).catch(function(e){console.log(e)})},getOutNoticeDetail:function(){var e=this;this.loading=!0,Object(o.n)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t),e.loading=!1,e.planform=t.data,e.getPurchaseDetail()}).catch(function(t){console.log(t),e.loading=!1,e.fetchSuccess=!1})},nextpage:function(e){this.$router.push({name:e})},Edit:function(){this.$router.push({name:"newoutnotice",params:{ticketno:this.planform.outNotice.saleorder},query:{id:this.$route.params.ticketno}})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[1==e.planform.outNotice.status&&e.isallownew?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:1==e.deliverway||1==e.planform.outNotice.closed},on:{click:function(t){e.nextpage("newoutstore")}}},[e._v("登记出库单")]):-1==e.planform.outNotice.status||-2==e.planform.outNotice.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"outNotice")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.outNotice.status&&e.isallow?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"outNotice")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"outNotice")}}},[e._v("驳回")])]:[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("详情")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货通知单号",prop:"outNotice.ticketno"}},[e._v("\r\n          "+e._s(e.planform.outNotice.ticketno)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货企业"}},[e._v("\r\n          "+e._s(e.planform.outNotice.customername)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售订单号",prop:"outNotice.saleorder"}},[e._v("\r\n          "+e._s(e.planform.outNotice.saleorder)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划到达日期",prop:"outNotice.outdate"}},[e._v("\r\n          "+e._s(e.planform.outNotice.outdate)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"outNotice.linkuser"}},[e._v("\r\n          "+e._s(e.planform.outNotice.linkuser)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货地址",prop:"outNotice.linkaddress"}},[e._v("\r\n          "+e._s(e.planform.outNotice.linkaddress)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系电话",prop:"outNotice.linktel"}},[e._v("\r\n          "+e._s(e.planform.outNotice.linktel)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单数量合计",prop:"outNotice.sumordernum"}},[e._v("\r\n          "+e._s(e.planform.outNotice.sumordernum)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"备注"}},[e._v("\r\n          "+e._s(e.planform.outNotice.memos)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货仓库",prop:"outNotice.outstore"}},[e._v("\r\n          "+e._s(e.planform.outNotice.outstorename)+"\r\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"outNoticeItems"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.planform.outNoticeItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单数量",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ordernum))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("63v7")},"data-v-7a9f1b26",null);t.default=p.exports},Zlwr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"商品名称",fixed:"left",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(t.row.materialtag)+"\n    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(t.row.materialrule)+"\n    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.storename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"160",label:"采购单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.purchorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"库存单位",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"库存数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialnum))])]}}])})],1)},staticRenderFns:[]};var r=a("VU/8")({props:["list","loading"]},n,!1,function(e){a("tBvx")},null,null);t.default=r.exports},a9GE:function(e,t){},aXys:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("MOmO"),r=a.n(n),o={name:"page401",data:function(){return{errGif:r.a+"?"+ +new Date,ewizardClap:"https://wpimg.wallstcn.com/007ef517-bafd-4066-aae4-6883632d9646",dialogVisible:!1}},methods:{back:function(){this.$route.query.noGoBack?this.$router.push({path:"/dashboard"}):this.$router.go(-1)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"errPage-container"},[a("el-button",{staticClass:"pan-back-btn",attrs:{icon:"arrow-left"},on:{click:e.back}},[e._v("返回")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",{staticClass:"text-jumbo text-ginormous"},[e._v("Oops!")]),e._v("\n      gif来源"),a("a",{attrs:{href:"https://zh.airbnb.com/",target:"_blank"}},[e._v("airbnb")]),e._v(" 页面\n      "),a("h2",[e._v("你没有权限去该页面")]),e._v(" "),a("h6",[e._v("如有不满请联系你领导")]),e._v(" "),a("ul",{staticClass:"list-unstyled"},[a("li",[e._v("或者你可以去:")]),e._v(" "),a("li",{staticClass:"link-type"},[a("router-link",{attrs:{to:"/dashboard"}},[e._v("回首页")])],1),e._v(" "),a("li",{staticClass:"link-type"},[a("a",{attrs:{href:"https://www.taobao.com/"}},[e._v("随便看看")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.dialogVisible=!0}}},[e._v("点我看图")])])])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("img",{attrs:{src:e.errGif,width:"313",height:"428",alt:"Girl has dropped her ice cream."}})])],1),e._v(" "),a("el-dialog",{attrs:{title:"随便看",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{staticClass:"pan-img",attrs:{src:e.ewizardClap}})])],1)},staticRenderFns:[]};var l=a("VU/8")(o,i,!1,function(e){a("gKN/")},"data-v-5385ff88",null);t.default=l.exports},b93q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("0xDb"),s=a("8hSj"),c={components:{Sticky:a("vHhr").a},data:function(){return{planform:{innotice:{ticketno:"",instore:"",instorename:"",indate:"",enterprise:"",enterprisename:"",servicer:"",servicername:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",suminnum:"",sumordernum:"",linkaddress:"",linkuser:"",linktel:"",purchorder:"",closed:"",memos:"",isdelete:""},innoticeItems:[]},deliverway:"",fetchSuccess:!0}},computed:r()({},Object(i.b)(["company","companyId","userInfo","visitedViews","isallow","isallownew"])),filters:{parseTime:l.h},created:function(){this.getinnoticeDetail()},methods:{Modify:s.a,getPurchaseInfo:function(){var e=this;Object(o.r)({ticketno:this.planform.innotice.purchorder}).then(function(t){console.log(t),e.deliverway=t.data.purchorder.deliverway}).catch(function(t){console.log(t),e.fetchSuccess=!1})},getinnoticeDetail:function(){var e=this;this.loading=!0,Object(o.h)({ticketno:this.$route.params.ticketno,flag:0}).then(function(t){console.log(t),e.loading=!1,e.planform.innoticeItems=t.data}).catch(function(t){console.log(t),e.loading=!1,e.fetchSuccess=!1}),Object(o.i)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t),e.planform.innotice=t.data.data[0],e.getPurchaseInfo()}).catch(function(t){console.log(t),e.fetchSuccess=!1})},nextpage:function(e){this.$router.push({name:e,params:{ticketno:this.$route.params.ticketno}})},Edit:function(){this.$router.push({name:"newinnotice",params:{ticketno:this.planform.innotice.purchorder},query:{id:this.$route.params.ticketno}})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[1==e.planform.innotice.status&&e.isallownew?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:1==e.deliverway||1==e.planform.innotice.closed},on:{click:function(t){e.nextpage("newinstore")}}},[e._v("登记入库单")]):-1==e.planform.innotice.status||-2==e.planform.innotice.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"innotice")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.innotice.status&&e.isallow?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"innotice")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"innotice")}}},[e._v("驳回")])]:[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("详情")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货通知单号"}},[e._v("\r\n          "+e._s(e.planform.innotice.ticketno)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"送货供应商"}},[e._v("\r\n          "+e._s(e.planform.innotice.servicername)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"采购订单号"}},[e._v("\r\n          "+e._s(e.planform.innotice.purchorder)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划到达日期",prop:"innotice.outdate"}},[e._v("\r\n          "+e._s(e.planform.innotice.indate)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"innotice.linkuser"}},[e._v("\r\n          "+e._s(e.planform.innotice.linkuser)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货地址",prop:"innotice.linkaddress"}},[e._v("\r\n          "+e._s(e.planform.innotice.linkaddress)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系电话",prop:"innotice.linktel"}},[e._v("\r\n          "+e._s(e.planform.innotice.linktel)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单数量合计",prop:"innotice.sumordernum"}},[e._v("\r\n          "+e._s(e.planform.innotice.sumordernum)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货仓库"}},[e._v("\r\n          "+e._s(e.planform.innotice.instorename)+"\r\n        ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.planform.innotice.memos,expression:"planform.innotice.memos"}],attrs:{span:16}},[a("el-form-item",{attrs:{label:"备注"}},[e._v("\r\n          "+e._s(e.planform.innotice.memos)+"\r\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"innoticeItems"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.planform.innoticeItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单数量",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ordernum))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("ERKx")},"data-v-683f27cc",null);t.default=d.exports},bDgm:function(e,t){},baFT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),r=a.n(n),o=a("Dd8w"),i=a.n(o),l=a("sJ5/"),s=a("NYxO"),c=a("0xDb"),u={},d={name:"planorderlist",data:function(){return{planform:{enquiryOrder:{customer:"",customname:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",createtime:"",status:"",checkuser:"",checkdate:"",checktime:"",checkadvice:"",sumordernum:"",sumamount:"",memos:"",customerorderno:"",enquirydate:"",enquiryenddate:"",paymethod:"",postenquirydate:[]}},postform:{},loading:!1,list:[],pagesize:10,pageindex:1,total:0,currentPage:1,paymethod:[{name:"货到付款",value:"1"},{name:"货到票到付款",value:"2"},{name:"先款后货",value:"3"}]}},computed:i()({},Object(s.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:c.h,paymethodFilter:function(e){switch(parseInt(e)){case 1:return"货到付款";case 2:return"货到票到付款";case 3:return"先款后货";default:return""}}},created:function(){this.gridData.length||this.$store.dispatch("GetGysList")},mounted:function(){var e=this;this.$nextTick(function(){e.activated||e.getListData()})},activated:function(){this.activated=!0,this.planform=u.planform,this.list=u.list,this.pagesize=u.pagesize,this.pageindex=u.pageindex,this.total=u.total,this.currentPage=u.currentPage},deactivated:function(){u=r()({},this)},methods:{printUrl:c.i,handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this,t=this.postform;t.postenquirydate&&t.postenquirydate.length&&(t.enquirystartsdate=Object(c.h)(t.postenquirydate[0]),t.enquiryendsdate=Object(c.h)(t.postenquirydate[1]),t.enquirydate=""),this.loading=!0,Object(l.l)(i()({pagesize:this.pagesize,pageindex:this.pageindex},t)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,console.log(t),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.postform=this.planform.enquiryOrder,this.pageindex=1,this.pagesize=10,this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={enquiryOrder:{},enquiryOrderItems:[]},this.pagesize=10,this.pageindex=1}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"询价方",prop:"enquiryOrder.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.enquiryOrder.customer,callback:function(t){e.$set(e.planform.enquiryOrder,"customer",t)},expression:"planform.enquiryOrder.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价方",prop:"enquiryOrder.enterprise"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.enquiryOrder.enterprise,callback:function(t){e.$set(e.planform.enquiryOrder,"enterprise",t)},expression:"planform.enquiryOrder.enterprise"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方式",prop:"enquiryOrder.paymethod"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.planform.enquiryOrder.paymethod,callback:function(t){e.$set(e.planform.enquiryOrder,"paymethod",t)},expression:"planform.enquiryOrder.paymethod"}},e._l(e.paymethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"询价日期",prop:"enquiryOrder.postenquirydate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.enquiryOrder.postenquirydate,callback:function(t){e.$set(e.planform.enquiryOrder,"postenquirydate",t)},expression:"planform.enquiryOrder.postenquirydate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划单号"}},[a("el-input",{model:{value:e.planform.enquiryOrder.ticketno,callback:function(t){e.$set(e.planform.enquiryOrder,"ticketno",t)},expression:"planform.enquiryOrder.ticketno"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"350px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRow(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"询价企业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"询价日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.enquirydate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"报价截止日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.enquiryenddate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"付款方式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("paymethodFilter")(t.row.paymethod)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:e.printUrl("bss_enquiryorder_schedule",t.row.ticketno),target:"_blank"}},[a("el-button",{attrs:{type:"text"}},[e._v("查看进度")])],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("TLxN")},"data-v-4983ef0a",null);t.default=m.exports},bpIP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("0TzL"),r={data:function(){return{bidlist:[],formInline:{servername:""},loading:!1,tbloading:!1}},filters:{parseTime:a("0xDb").h},created:function(){this.getBidList({tpnumber:this.$route.params.tpnumber})},methods:{getBidList:function(e){var t=this;this.tbloading=!0,Object(n.c)(e).then(function(e){console.log(e),t.bidlist=e.data.data,t.tbloading=!1}).catch(function(e){console.log(e),t.tbloading=!1})},onSearchSubmit:function(){this.getBidList({tpnumber:this.$route.params.tpnumber,servername:this.formInline.servername})},setBid:function(e,t){var a=this;this.loading=!0,Object(n.j)({id:e.id}).then(function(n){console.log(n),a.loading=!1,a.$message({message:n.message,type:"success"}),e.status="已中标",a.$set(a.bidlist,t,e)}).catch(function(e){console.log(e),a.loading=!1})},viewRow:function(e,t){console.log(e),"zb"===t&&this.$router.push({name:"etpdetail",params:{id:e.zbId},query:{d:Date.now()}}),"jb"===t&&this.$router.push({name:"biddetail",params:{id:e.id},query:{d:Date.now()}})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"竞标单位（供应商）"}},[a("el-input",{attrs:{placeholder:"请输入竞标单位"},model:{value:e.formInline.servername,callback:function(t){e.$set(e.formInline,"servername",t)},expression:"formInline.servername"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSearchSubmit}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tbloading,expression:"tbloading"}],staticStyle:{width:"100%"},attrs:{data:e.bidlist,border:""}},[a("el-table-column",{attrs:{fixed:"",label:"招标公告号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewRow(t.row,"zb")}}},[e._v("\r\n          "+e._s(t.row.tpnumber)+"\r\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标单号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewRow(t.row,"jb")}}},[e._v("\r\n          "+e._s(t.row.bdnumber)+"\r\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"已中标"===t.row.status?"success":"info"}},[e._v(e._s(t.row.status?t.row.status:"正在竞标"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总金额",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        ￥"+e._s(t.row.bdamount)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标单位",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(t.row.servername)+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后竞标时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n        "+e._s(e._f("parseTime")(t.row.zbEndTime))+"\r\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"200",label:"设置"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status&&"正在竞标"!==t.row.status?e._e():a("el-button",{attrs:{type:"primary",loading:e.loading,size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.setBid(t.row,t.$index)}}},[e._v("\r\n          设为中标\r\n        ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewRow(t.row,"jb")}}},[e._v("\r\n          竞标明细\r\n        ")])]}}])})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(r,o,!1,function(e){a("vWyl")},null,null);t.default=i.exports},c6RL:function(e,t){},cmzJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Gu7T"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("mvHQ"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("woOf"),p=a.n(d),m=a("sJ5/"),f=a("NYxO"),v=a("0xDb"),h={enquiryOrder:{customer:"",customname:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",createtime:"",status:"",checkuser:"",checkdate:"",checktime:"",checkadvice:"",sumordernum:0,sumamount:"",memos:"",customerorderno:"",enquirydate:"",enquiryenddate:"",paymethod:""},enquiryOrderItems:[]},b={name:"newplanorder",data:function(){return{planform:p()({},h),rules:{enquiryOrder:{customer:[{required:!0,message:"请选择询价方",trigger:"blur"}],enterprise:[{required:!0,message:"请选报价方",trigger:"blur"}],enquirydate:[{required:!0,message:"请选择询价日期",trigger:"change"}],enquiryenddate:[{required:!0,message:"请选择询价截止日期",trigger:"change"}],paymethod:[{required:!0,message:"请选择付款方式",trigger:"change"}]},enquiryOrderItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("物品明细不能空"));setTimeout(function(){a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/excel/equiryOrder/new/export",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,multipleSelection:[],submitloading:!1,templetUrl:"/static/templet/enquiry.xls",special:!1,paymethod:[{name:"货到付款",value:"1"},{name:"货到票到付款",value:"2"},{name:"先款后货",value:"3"}]}},computed:u()({uploadData:function(){return{companyId:this.planform.enquiryOrder.customer}},sumordernum:function(){var e=0;return this.planform.enquiryOrderItems.forEach(function(t){parseFloat(t.ordernum)&&(e+=parseFloat(t.ordernum))}),e},enterprisename:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.enquiryOrder.enterprise&&(t=a.name)}),t},customname:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.planform.enquiryOrder.customer&&(t=a.name)}),t}},Object(f.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:v.h},created:function(){this.getTemplate(),this.planform=p()({},h)},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort())},getTemplate:function(){var e=this;Object(m.a)().then(function(t){console.log(t),e.$store.commit("SET_GYSLIST",t.data),e.planform.enquiryOrder.enterprise=e.companyId}).catch(function(e){console.log(e)})},customerChange:function(e){var t=this;console.log(e);var a="";this.special=!1,this.gridData.map(function(n){n.requestid===e&&(a=n.remark,n.remark&&(t.special=!0))}),this.templetUrl=a||"/static/templet/enquiry.xls"},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(console.log(t),!t)return console.log("error submit!!"),!1;if(e.planform.enquiryOrder.enquirydate>=e.planform.enquiryOrder.enquiryenddate)return e.$message({message:"询价截止日期不能早于询价日期",type:"warn"}),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path}),n=JSON.parse(s()(e.planform));n.enquiryOrder.enterprisename=e.enterprisename,n.enquiryOrder.customname=e.customname,n.enquiryOrder.createuser=e.userInfo.truename,Object(m.E)(n).then(function(t){console.log(t),"200"===t.code&&t.data&&(h.enquiryOrder={customer:"",customname:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",createtime:"",status:"",checkuser:"",checkdate:"",checktime:"",checkadvice:"",sumordernum:0,sumamount:"",memos:"",customerorderno:"",enquirydate:"",enquiryenddate:"",paymethod:""},h.enquiryOrderItems=[],e.$confirm("新建计划单成功！","提示",{confirmButtonText:"详情",cancelButtonText:"计划单列表",type:"success"}).then(function(n){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"plandetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"planorderlist"})})})),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},handleUploadSuccess:function(e,t,a){var n=this;"200"===e.code?(this.$confirm(e.message,"提示",{confirmButtonText:"完成",cancelButtonText:"继续导入",type:"success"}).then(function(e){n.dialogVisible=!1}).catch(function(e){}),e.data.map(function(e){e.edit=!1}),h.enquiryOrderItems=[].concat(r()(this.planform.enquiryOrderItems),r()(e.data)),this.planform=p()({},h)):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},submitUpload:function(){this.$refs.upload.submit()},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleDelete:function(e,t){h.enquiryOrderItems.splice(e,1),this.planform=p()({},h),this.$message({message:"成功删除一条记录！",type:"success"})},getservicename:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},editRow:function(e){e.servicername=this.getservicename(e.servicer),e.edit=!1,h.enquiryOrderItems=this.planform.enquiryOrderItems},goeditrow:function(e){h.enquiryOrderItems[e].edit=!0,this.planform=p()({},h)},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},importEXL:function(){this.dialogVisible=!0},addDetail:function(){h.enquiryOrderItems.push({servicer:"",servicername:"",itemno:"",material:"",materialno:"",materialname:"",materialrule:"",materialsize:"",materialtag:"",orderunit:"",orderprice:"",orderamount:"",ordernum:0,warrantydate:"",supplydate:"",memos:"",edit:!0}),this.planform=p()({},h)},handleCurrentChange:function(e){this.currentRow=e},handleSelectionChange:function(e){this.multipleSelection=e},onCancel:function(){this.$router.back()},handelDialogConfirm:function(){this.dialogTableVisible=!1,this.planform.enquiryOrder.customer=JSON.parse(s()(this.currentRow))},handelDialogCancel:function(){this.dialogTableVisible=!1,this.planform.enquiryOrder.customer=JSON.parse(s()({code:"",id:"",name:""}))},delChecked:function(){var e=this,t=this.planform.enquiryOrderItems.filter(function(t){return!e.multipleSelection.includes(t)});this.planform.enquiryOrderItems=JSON.parse(s()(t))}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"询价方",prop:"enquiryOrder.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择","prefix-icon":"el-icon-search",size:"100%"},on:{change:e.customerChange},model:{value:e.planform.enquiryOrder.customer,callback:function(t){e.$set(e.planform.enquiryOrder,"customer",t)},expression:"planform.enquiryOrder.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价方",prop:"enquiryOrder.enterprise"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.enquiryOrder.enterprise,callback:function(t){e.$set(e.planform.enquiryOrder,"enterprise",t)},expression:"planform.enquiryOrder.enterprise"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"询价日期",prop:"enquiryOrder.enquirydate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.enquiryOrder.enquirydate,callback:function(t){e.$set(e.planform.enquiryOrder,"enquirydate",t)},expression:"planform.enquiryOrder.enquirydate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"报价截止日期",prop:"enquiryOrder.enquiryenddate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.enquiryOrder.enquiryenddate,callback:function(t){e.$set(e.planform.enquiryOrder,"enquiryenddate",t)},expression:"planform.enquiryOrder.enquiryenddate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"数量合计"}},[a("el-input",{attrs:{value:e.sumordernum,disabled:!0}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方式",prop:"enquiryOrder.paymethod"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.planform.enquiryOrder.paymethod,callback:function(t){e.$set(e.planform.enquiryOrder,"paymethod",t)},expression:"planform.enquiryOrder.paymethod"}},e._l(e.paymethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        计划单物品明细\r\n        "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importEXL}},[e._v("\r\n          导入Excel\r\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addDetail}},[e._v("\r\n          新增一行\r\n        ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.multipleSelection.length,expression:"multipleSelection.length"}],attrs:{size:"mini",type:"warning"},on:{click:e.delChecked}},[e._v("\r\n          删除选中\r\n        ")])],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"enquiryOrderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.enquiryOrderItems,border:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.itemno,callback:function(a){e.$set(t.row,"itemno",a)},expression:"scope.row.itemno"}})]:a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialname,callback:function(a){e.$set(t.row,"materialname",a)},expression:"scope.row.materialname"}})]:a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小分类",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.categoryname,callback:function(a){e.$set(t.row,"categoryname",a)},expression:"scope.row.categoryname"}})]:a("span",[e._v(e._s(t.row.categoryname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialtag,callback:function(a){e.$set(t.row,"materialtag",a)},expression:"scope.row.materialtag"}})]:a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialrule,callback:function(a){e.$set(t.row,"materialrule",a)},expression:"scope.row.materialrule"}})]:a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.materialsize,callback:function(a){e.$set(t.row,"materialsize",a)},expression:"scope.row.materialsize"}})]:a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.orderunit,callback:function(a){e.$set(t.row,"orderunit",a)},expression:"scope.row.orderunit"}})]:a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"质保期",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.warrantydate,callback:function(a){e.$set(t.row,"warrantydate",a)},expression:"scope.row.warrantydate"}})]:a("span",[e._v(e._s(t.row.warrantydate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供货期",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.supplydate,callback:function(a){e.$set(t.row,"supplydate",a)},expression:"scope.row.supplydate"}})]:a("span",[e._v(e._s(t.row.supplydate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"供应商",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.row.servicer,callback:function(a){e.$set(t.row,"servicer",a)},expression:"scope.row.servicer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))]:a("span",[e._v(e._s(t.row.servicername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.memos,callback:function(a){e.$set(t.row,"memos",a)},expression:"scope.row.memos"}})]:a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,data:e.uploadData,name:"myFile",accept:".xls,.xlsx","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls和xlsx文件,文件最大不能超过5M。\r\n        "),a("a",{staticClass:"dlink",attrs:{href:e.templetUrl}},[e._v("下载"+e._s(e.special?"专用":"")+"模板")])])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(b,_,!1,function(e){a("fNsy")},"data-v-4d678e3e",null);t.default=g.exports},ct5t:function(e,t){},dgA8:function(e,t){},dwkA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("E7jB"),i=a("0xDb"),l=a("NYxO"),s={data:function(){return{tabelData:[],total:0,currentPage:1,pagesize:10,pageindex:1}},computed:r()({},Object(l.b)(["company","companyId"])),filters:{parseTime:i.h,parseType:function(e){return 0===e||"0"===e?"明细招标":1===e||"1"===e?"品类招标":e}},created:function(){this.getTableData()},methods:{tagstatus:function(e){return"未中标"===e?"danger":"已中标"===e?"success":"部分中标"===e?"warning":"正在竞标"===e?"primary":"info"},getTableData:function(){var e=this;Object(o.c)({pageFlag:1,pagesize:this.pagesize,pageindex:this.pageindex,belongserver:this.companyId}).then(function(t){console.log(t),e.tabelData=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage}).catch(function(e){console.log(e)})},viewBidDetail:function(e){this.$router.push({name:"biddetail",params:{id:e.id},query:{t:+new Date}})},viewEtpDetail:function(e){this.$router.push({name:"etpdetailsale",params:{id:e.zbId}})},handleSizeChange:function(e){this.pagesize=e,this.getTableData()},handleCurrentChange:function(e){this.pageindex=e,this.getTableData()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tabelData}},[a("el-table-column",{attrs:{label:"招标公告号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewEtpDetail(t.row)}}},[e._v(e._s(t.row.tpnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"招标标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.zbTitle))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标单号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewBidDetail(t.row)}}},[e._v(e._s(t.row.bdnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"招标类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseType")(t.row.zbtyType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.tagstatus(t.row.status)}},[e._v(e._s(t.row.status?t.row.status:"未出竞标结果"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后竞标日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.makebidtime?a("span",[e._v(e._s(e._f("parseTime")(t.row.makebidtime)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.viewBidDetail(t.row)}}},[e._v("\r\n          竞标详情\r\n        ")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("m3qe")},null,null);t.default=u.exports},ehIy:function(e,t,a){"use strict";t.b=function(e){return Object(n.a)({url:"/jqmapi/api/inputInvoice/addOrUpdateInputInvoice",method:"post",data:e})},t.d=function(e){return Object(n.a)({url:"/jqmapi/api/inputInvoice/createInputInvoice",method:"post",data:e})},t.i=function(e){return Object(n.a)({url:"/jqmapi/api/inputInvoice/getItemDetail",method:"post",data:e})},t.j=function(e){return Object(n.a)({url:"/jqmapi/api/inputInvoice/getMainDetail",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/yyjapi/api/outputInvoice/addOrUpdateOutputInvoice",method:"post",data:e})},t.e=function(e){return Object(n.a)({url:"/yyjapi/api/outputInvoice/createOutputInvoice",method:"post",data:e})},t.k=function(e){return Object(n.a)({url:"/yyjapi/api/outputInvoice/getItemDetail",method:"post",data:e})},t.l=function(e){return Object(n.a)({url:"/yyjapi/api/outputInvoice/getMainDetail",method:"post",data:e})},t.a=function(e){return Object(n.a)({url:"/yyjapi/api/applyInvoice/addOrUpdateApplyInvoice",method:"post",data:e})},t.h=function(e){return Object(n.a)({url:"/yyjapi/api/applyInvoice/getCanOutputInvoice",method:"post",data:e})},t.f=function(e){return Object(n.a)({url:"/yyjapi/api/applyInvoice/getItemDetail",method:"post",data:e})},t.g=function(e){return Object(n.a)({url:"/yyjapi/api/applyInvoice/getMainDetail",method:"post",data:e})};var n=a("vLgD")},eisF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("woOf"),i=a.n(o),l=a("xh2W"),s=a("vHhr"),c=a("0xDb"),u=a("ehIy"),d=a("NYxO"),p={inputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:"",memos:"",planinvoiceamount:"",planinvoicenum:"",pretaxamount:"",receivedate:"",receiveuser:"",servicer:"",servicername:"",status:"",taxamount:"",ticketno:"",verifyamount:0},inputInvoiceItems:[]},m={postinstoredate:null,servicer:null,servicername:null,contractNo:null,ticketNo:null},f=[],v={name:"newinputinvoice",components:{CompanyChoice:l.a,Sticky:s.a},data:function(){return{inputInvoiceform:i()({},p),searchForm:i()({},m),addServicerShow:!1,fetchSuccess:!0,invoicetype:c.b,loading:!1,rules:{inputInvoice:{invoicetype:[{required:!0,message:"请选择发票类型",trigger:"change"}],receivedate:[{required:!0,message:"请选择票到日期",trigger:"change"}],invoicedate:[{required:!0,message:"请选择发票日期",trigger:"change"}],invoiceno:[{required:!0,message:"请输入发票号",trigger:"blur"}]}},multipleSelection:f,searchLoading:!1,searchRules:{servicer:[{required:!0,message:"请选择供应商",trigger:"change"}]},planinvoiceamount:null,invoiceamount:null,pretaxamount:null,taxamount:null}},computed:r()({contentShortLength:function(){return this.inputInvoiceform.inputInvoice.memos.length}},Object(d.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),watch:{multipleSelection:function(e,t){var a=this;this.inputInvoiceform.inputInvoiceItems.map(function(e){e.edit=!1,e.invoicenum=0}),e.map(function(e){a.inputInvoiceform.inputInvoiceItems.map(function(t){e.index===t.index&&(t.edit=!0,t.invoicenum=t.planinvoicenum)})}),this.reflashData()}},created:function(){var e=this;this.reflashData(),this.$nextTick(function(){e.multipleSelection.map(function(t){e.$refs.inputInvoiceTable.toggleRowSelection(t,!0)})})},methods:{parseTime:c.h,checkSelectable:function(e){return e.planinvoicenum>0},rowClass:function(e){return e.edit?"checkedrow":""},reflashData:function(){var e=this;this.$nextTick(function(){e.getPlaninvoiceamount(),e.getInvoiceamount(),e.getPretaxamount(),e.getTaxamount()})},getPlaninvoiceamount:function(){var e=0;this.multipleSelection.map(function(t){e+=t.planinvoiceamount}),this.planinvoiceamount=e.toFixed(2)},getTaxamount:function(){var e=0;this.inputInvoiceform.inputInvoiceItems.map(function(t){e=e+t.invoicenum*t.price-t.invoicenum*t.price/(1+t.taxrate/100)}),this.taxamount=e.toFixed(2)},getPretaxamount:function(){var e=0;this.inputInvoiceform.inputInvoiceItems.map(function(t){e+=t.invoicenum*t.price/(1+t.taxrate/100)}),this.pretaxamount=e.toFixed(2)},getInvoiceamount:function(){var e=0;this.inputInvoiceform.inputInvoiceItems.map(function(t){e+=t.invoicenum*t.price}),this.invoiceamount=e.toFixed(2)},handleSelectionChange:function(e){this.multipleSelection=e},addServicer:function(){this.addServicerShow=!0},diClose:function(){this.addServicerShow=!1},subCompany:function(e){this.searchForm.servicer=e.requestid,this.searchForm.servicername=e.name},onSubmit:function(){var e=this;this.$refs.searchForm.validate(function(t){if(t){e.searchLoading=!0;var a={servicer:e.searchForm.servicer?e.searchForm.servicer:null,contractNo:e.searchForm.contractNo?e.searchForm.contractNo:null,ticketNo:e.searchForm.ticketNo?e.searchForm.ticketNo:null,instartdate:e.searchForm.postinstoredate?Object(c.h)(e.searchForm.postinstoredate[0]):null,inenddate:e.searchForm.postinstoredate?Object(c.h)(e.searchForm.postinstoredate[1]):null};Object(u.d)(a).then(function(t){console.log(t),e.searchLoading=!1,t.data.length?(t.data.map(function(e,t){e.index=t}),e.inputInvoiceform.inputInvoiceItems=t.data):(e.$message.warning("未查询到入库单,请选择其他供应商再试"),e.inputInvoiceform.inputInvoiceItems=[])}).catch(function(t){console.log(t),e.searchLoading=!1})}})},onCancel:function(){m={postinstoredate:[],servicer:null,servicername:null,contractNo:null,ticketNo:null},this.searchForm=i()({},m)},submitForm:function(){var e=this;this.$refs.postForm.validate(function(t){if(t){if(Date.parse(e.inputInvoiceform.inputInvoice.receivedate)<Date.parse(e.inputInvoiceform.inputInvoice.invoicedate))return e.$message.error("发票日期不能在收票日期之后"),!1;var a=i()({},e.inputInvoiceform),n=[];a.inputInvoice.servicer=e.searchForm.servicer,a.inputInvoice.servicername=e.searchForm.servicername,a.inputInvoice.enterprise=e.companyId,a.inputInvoice.enterprisename=e.company,a.inputInvoice.createuser=e.userInfo.truename,a.inputInvoice.invoicedate=e.parseTime(a.inputInvoice.invoicedate),a.inputInvoice.receivedate=e.parseTime(a.inputInvoice.receivedate),a.inputInvoiceItems.map(function(t){e.multipleSelection.map(function(e){e.index===t.index&&n.push(t)})}),a.inputInvoiceItems=n,e.loading=!0;var r=e.visitedViews.filter(function(t){return t.path===e.$route.path});Object(u.b)(a).then(function(t){console.log(t),e.loading=!1,"200"===t.code&&t.data&&e.$confirm("新建进项发票成功！","提示",{confirmButtonText:"详情",cancelButtonText:"关闭",type:"success"}).then(function(a){e.$store.dispatch("delVisitedViews",r[0]).then(function(){e.$router.push({name:"inputinvoicedetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",r[0]).then(function(){e.$router.push("/")})}),p={inputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:"",memos:"",planinvoiceamount:"",planinvoicenum:"",pretaxamount:"",receivedate:"",receiveuser:"",servicer:"",servicername:"",status:"",taxamount:"",ticketno:"",verifyamount:0},inputInvoiceItems:[]},m={postinstoredate:[],servicer:null,servicername:null,contractNo:null,ticketNo:null},f=[]}).catch(function(t){console.log(t),e.loading=!1})}})},draftForm:function(){p=this.inputInvoiceform,m=this.searchForm,f=this.multipleSelection}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.multipleSelection.length?a("sticky",{staticStyle:{"margin-bottom":"20px"},attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.submitForm()}}},[e._v("提交\r\n      ")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"warning"},on:{click:e.draftForm}},[e._v("保存草稿")])]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("el-row",[a("el-steps",{attrs:{active:-1,simple:""}},[a("el-step",{attrs:{title:"查询相应入库单"}}),e._v(" "),a("el-step",{attrs:{title:"勾选开票相应单据"}}),e._v(" "),a("el-step",{attrs:{title:"核对金额填写剩余信息"}})],1),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,rules:e.searchRules,"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"供应商",prop:"servicer"}},[a("el-input",{attrs:{placeholder:"请选择供应商","prefix-icon":"el-icon-search"},on:{focus:e.addServicer},model:{value:e.searchForm.servicername,callback:function(t){e.$set(e.searchForm,"servicername",t)},expression:"searchForm.servicername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"采购单号"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入采购单号"},model:{value:e.searchForm.ticketNo,callback:function(t){e.$set(e.searchForm,"ticketNo",t)},expression:"searchForm.ticketNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同编号"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入合同编号"},model:{value:e.searchForm.contractNo,callback:function(t){e.$set(e.searchForm,"contractNo",t)},expression:"searchForm.contractNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库日期"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.postinstoredate,callback:function(t){e.$set(e.searchForm,"postinstoredate",t)},expression:"searchForm.postinstoredate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.searchLoading,expression:"searchLoading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"createPost-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.inputInvoiceform.inputInvoiceItems.length,expression:"!inputInvoiceform.inputInvoiceItems.length"}],staticClass:"noresult"},[a("i",{staticClass:"el-icon-search"}),e._v("没有对应的入库单...\r\n      ")]),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.inputInvoiceform.inputInvoiceItems.length,expression:"inputInvoiceform.inputInvoiceItems.length"}],ref:"postForm",staticClass:"form-container",attrs:{model:e.inputInvoiceform,rules:e.rules}},[a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{attrs:{span:21}},[a("div",{staticClass:"postInfo-container"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"发票号:",prop:"inputInvoice.invoiceno"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入发票号"},model:{value:e.inputInvoiceform.inputInvoice.invoiceno,callback:function(t){e.$set(e.inputInvoiceform.inputInvoice,"invoiceno",t)},expression:"inputInvoiceform.inputInvoice.invoiceno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"100px",label:"发票日期:",prop:"inputInvoice.invoicedate"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:e.inputInvoiceform.inputInvoice.invoicedate,callback:function(t){e.$set(e.inputInvoiceform.inputInvoice,"invoicedate",t)},expression:"inputInvoiceform.inputInvoice.invoicedate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"100px",label:"到票日期:",prop:"inputInvoice.receivedate"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:e.inputInvoiceform.inputInvoice.receivedate,callback:function(t){e.$set(e.inputInvoiceform.inputInvoice,"receivedate",t)},expression:"inputInvoiceform.inputInvoice.receivedate"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"实际开票金额:"}},[a("el-input",{attrs:{type:"text",value:e.invoiceamount,placeholder:"请输入开票金额",disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"100px",label:"税额:"}},[a("el-input",{staticStyle:{"min-width":"220px"},attrs:{placeholder:"税额",value:e.taxamount,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"100px",label:"发票种类:",prop:"inputInvoice.invoicetype"}},[a("el-select",{staticStyle:{"min-width":"220px"},attrs:{filterable:"",clearable:"",placeholder:"请选择发票种类","prefix-icon":"el-icon-search"},model:{value:e.inputInvoiceform.inputInvoice.invoicetype,callback:function(t){e.$set(e.inputInvoiceform.inputInvoice,"invoicetype",t)},expression:"inputInvoiceform.inputInvoice.invoicetype"}},e._l(e.invoicetype,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"计划开票金额:"}},[a("el-input",{attrs:{type:"text",value:e.planinvoiceamount,placeholder:"计划开票金额",disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"100px",label:"税前金额:"}},[a("el-input",{staticStyle:{"min-width":"220px"},attrs:{placeholder:"税前金额",value:e.pretaxamount,disabled:""}})],1)],1)],1)],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"45px",label:"备注:"}},[a("el-input",{staticClass:"article-textarea",attrs:{type:"textarea",rows:1,autosize:"",placeholder:"请输入内容"},model:{value:e.inputInvoiceform.inputInvoice.memos,callback:function(t){e.$set(e.inputInvoiceform.inputInvoice,"memos",t)},expression:"inputInvoiceform.inputInvoice.memos"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.contentShortLength,expression:"contentShortLength"}],staticClass:"word-counter"},[e._v(e._s(e.contentShortLength)+"字")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"0"}},[a("el-table",{ref:"inputInvoiceTable",staticStyle:{width:"100%"},attrs:{data:e.inputInvoiceform.inputInvoiceItems,"row-class-name":e.rowClass,border:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:e.checkSelectable,fixed:"left",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"入库单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.inorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购订单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.purchorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购合同号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoiceamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"110",label:"大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticStyle:{"max-width":"150px"},model:{value:t.row.bigcategoryname,callback:function(a){e.$set(t.row,"bigcategoryname",a)},expression:"scope.row.bigcategoryname"}})]:a("span",[e._v(e._s(t.row.bigcategoryname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"110",label:"计划开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本次开票数量",fixed:"right",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{staticStyle:{"max-width":"150px"},attrs:{min:1,max:t.row.planinvoicenum},on:{change:e.reflashData},model:{value:t.row.invoicenum,callback:function(a){e.$set(t.row,"invoicenum",a)},expression:"scope.row.invoicenum"}})]:a("span",[e._v(e._s(t.row.invoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票金额",fixed:"right",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoicenum*t.row.price))])]}}])})],1)],1)],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:"选择供应商",visible:e.addServicerShow,center:"",width:"80%"},on:{"update:visible":function(t){e.addServicerShow=t}}},[a("CompanyChoice",{on:{subCompany:e.subCompany,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var b=a("VU/8")(v,h,!1,function(e){a("naNR")},"data-v-1f5c2876",null);t.default=b.exports},fNsy:function(e,t){},foNj:function(e,t){},"gKN/":function(e,t){},gLUy:function(e,t){},gLd7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("jsD9"),u=a("NYxO"),d=a("0xDb"),p={data:function(){return{receivableform:{receivable:{checkadvice:"",checkdate:"",checkuser:"",contractno:"",createdate:"",createuser:"",enclosure:"",enterprise:"",enterprisename:"",fundnature:"",interestrate:"",isdelete:null,memos:"",payer:"",payername:"",recamount:null,recdate:"",receivables:"",receivablesname:"",saleorder:"",settlementmethod:"",status:"",ticketno:"",postrecdate:null}},list:[],pagesize:10,pageindex:1,total:0,currentPage:1,statusList:d.e,fundnature:d.a,settlementmethod:d.d,loading:!1}},computed:s()({},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this,t=this.receivableform.receivable;t.postpaydate&&t.postpaydate.length&&(t.recstartdate=Object(d.h)(t.postrecdate[0]),t.recenddate=Object(d.h)(t.postrecdate[1]),t.recdate="");var a={},n=!0,o=!1,l=void 0;try{for(var u,p=i()(r()(t));!(n=(u=p.next()).done);n=!0){var m=u.value;null!==t[m]&&""!==t[m]&&(a[m]=t[m])}}catch(e){o=!0,l=e}finally{try{!n&&p.return&&p.return()}finally{if(o)throw l}}this.loading=!0,Object(c.c)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"receivabledetail",params:{ticketno:e.ticketno}})},viewsalorderRow:function(e){this.$router.push({name:"saleorderdetail",params:{ticketno:e.saleorder}})},onCancel:function(){this.receivableform={receivable:{}}}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.receivableform,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款单号",prop:"receivable.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.receivableform.receivable.ticketno,callback:function(t){e.$set(e.receivableform.receivable,"ticketno",t)},expression:"receivableform.receivable.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售单号",prop:"receivable.saleorder"}},[a("el-input",{attrs:{type:"text"},model:{value:e.receivableform.receivable.saleorder,callback:function(t){e.$set(e.receivableform.receivable,"saleorder",t)},expression:"receivableform.receivable.saleorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单据状态",prop:"receivable.status"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择","prefix-icon":"el-icon-search"},model:{value:e.receivableform.receivable.status,callback:function(t){e.$set(e.receivableform.receivable,"status",t)},expression:"receivableform.receivable.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方",prop:"receivable.payer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择客户","prefix-icon":"el-icon-search"},model:{value:e.receivableform.receivable.payer,callback:function(t){e.$set(e.receivableform.receivable,"payer",t)},expression:"receivableform.receivable.payer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"款项性质",prop:"receivable.fundnature"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择款项性质","prefix-icon":"el-icon-search"},model:{value:e.receivableform.receivable.fundnature,callback:function(t){e.$set(e.receivableform.receivable,"fundnature",t)},expression:"receivableform.receivable.fundnature"}},e._l(e.fundnature,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"结算方式",prop:"receivable.settlementmethod"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择结算方式","prefix-icon":"el-icon-search"},model:{value:e.receivableform.receivable.settlementmethod,callback:function(t){e.$set(e.receivableform.receivable,"settlementmethod",t)},expression:"receivableform.receivable.settlementmethod"}},e._l(e.settlementmethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"收款日期",prop:"receivable.recdate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.receivableform.receivable.postrecdate,callback:function(t){e.$set(e.receivableform.receivable,"postrecdate",t)},expression:"receivableform.receivable.postrecdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同编号",prop:"receivable.contractno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.receivableform.receivable.contractno,callback:function(t){e.$set(e.receivableform.receivable,"contractno",t)},expression:"receivableform.receivable.contractno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"120px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRow(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"收款日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.recdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"付款方"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.payername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收款方",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receivablesname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"款项性质"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("fundnatureFilter")(t.row.fundnature)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结算方式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("settlementmethodFilter")(t.row.settlementmethod)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"来源销售订单",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewsalorderRow(t.row)}}},[e._v(e._s(t.row.saleorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同编号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本次实收金额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.recamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单据状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核结果",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkadvice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("0Fni")},"data-v-6fcf9dae",null);t.default=f.exports},gejV:function(e,t){},golr:function(e,t){},h7S6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("0TzL"),i=a("NYxO"),l=a("vHhr"),s=a("0xDb"),c=a("uXZL"),u=a.n(c),d={data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateDate:function(e){var t=e.header,a=e.results;this.excelData.header=t,this.excelData.results=a,this.$emit("on-selected-file",this.excelData)},handleDrop:function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;if(1===t.length){var a=t[0];this.readerData(a),e.stopPropagation(),e.preventDefault()}else this.$message.error("Only support uploading one file!")},handleDragover:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleUpload:function(){document.getElementById("excel-upload-input").click()},handkeFileChange:function(e){var t=e.target.files[0];t&&(this.readerData(t),this.$refs["excel-upload-input"].value=null)},readerData:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=e.target.result,n=t.fixdata(a),r=u.a.read(btoa(n),{type:"base64"}),o=r.SheetNames[0],i=r.Sheets[o],l=t.get_header_row(i),s=u.a.utils.sheet_to_json(i);t.generateDate({header:l,results:s})},a.readAsArrayBuffer(e)},fixdata:function(e){for(var t="",a=0,n=10240;a<e.byteLength/n;++a)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*n,a*n+n)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(a*n)))},get_header_row:function(e){var t=[],a=u.a.utils.decode_range(e["!ref"]),n=void 0,r=a.s.r;for(n=a.s.c;n<=a.e.c;++n){var o=e[u.a.utils.encode_cell({c:n,r:r})],i="UNKNOWN "+n;o&&o.t&&(i=u.a.utils.format_cell(o)),t.push(i)}return t}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{ref:"excel-upload-input",staticClass:"c-hide",attrs:{id:"excel-upload-input",type:"file",accept:".xlsx, .xls"},on:{change:e.handkeFileChange}}),e._v(" "),a("div",{attrs:{id:"drop"},on:{drop:e.handleDrop,dragover:e.handleDragover,dragenter:e.handleDragover}},[e._v("\n    拖入Excel文件，或者按钮\n    "),a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{size:"mini",type:"primary"},on:{click:e.handleUpload}},[e._v("浏览")])],1)])},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("2z3A")},"data-v-53dacfc6",null).exports,f={components:{Sticky:l.a,UploadExcelComponent:m},data:function(){return{form:{etpOrderMain:{},items:[]},fetchSuccess:!0,loading:!1,jbloading:!1,topShow:!0,downloadLoading:!1,dialogVisible:!1,rules:{etpOrderMain:{makebidtime:[{required:!0,message:"请选择竞标时间",trigger:"change"}]},items:[{validator:function(e,t,a){if(!t.length)return a(new Error("竞标物品明细不能空"));setTimeout(function(){t.forEach(function(e){if(!e.supplierno||!e.bidprice)return a(new Error("物品明细的竞标方货号和本轮竞标价必填"))}),a()},300)},required:!0,trigger:"blur"}]}}},computed:r()({totalAmount:function(){var e=0;return this.form.items.forEach(function(t){e+=t.bidprice*t.pdtnumber}),e}},Object(i.b)(["company","companyId"])),filters:{parseTime:s.h,parseType:function(e){return 0===e||"0"===e?"明细招标":1===e||"1"===e?"品类招标":e}},created:function(){this.getDetail(),"etpdetailsale"===this.$route.name&&(this.topShow=!1)},methods:{selected:function(e){var t=[];e.results.map(function(e){var a={};a.thirdlevno=e["小分类编码"],a.thirdlev=e["小分类名称"],a.pdtno=e["商品编号"],a.pdtname=e["商品名称"],a.pdtbrand=e["品牌"],a.pdtmodel=e["规格"],a.pdtsize=e["型号"],a.pdtnumber=e["数量"],a.pdtunit=e["单位"],a.pdtprice=e["参考单价"],a.supplierno=e["竞标方货号"],a.bidprice=e["本轮竞标价"],a.beizhu=e["备注"],t.push(a)}),this.form.items=t,console.log(e),this.dialogVisible=!1},getDetail:function(){var e=this;Object(o.g)({id:this.$route.params.id}).then(function(t){console.log(t),t.data.etpOrderMain.makebidtime=new Date,e.form=t.data}).catch(function(t){console.log(t),e.fetchSuccess=!1})},doStartEtpOrder:function(){var e=this;this.jbloading=!0,Object(o.l)({id:this.$route.params.id}).then(function(t){console.log(t),e.jbloading=!1,e.$message({message:t.message,type:"success"}),e.$set(e.form.etpOrderMain,"status","正在竞标")}).catch(function(t){e.jbloading=!1})},renderHeader:function(e){return e("div",{class:"renderd"},["操作"])},handleDelete:function(e,t){this.form.items.splice(e,1),this.$message({message:"成功删除一条记录！",type:"success"})},importExcel:function(){this.dialogVisible=!0},exportExcel:function(){var e=this;this.$prompt("请输入导出的表格名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\w/,inputErrorMessage:"表格命名不规范"}).then(function(t){var n=t.value;e.downloadLoading=!0,a.e(0).then(a.bind(null,"zWO4")).then(function(t){var a=e.form.items,r=e.formatJson(["thirdlevno","thirdlev","pdtno","pdtname","pdtbrand","pdtmodel","pdtsize","pdtnumber","pdtunit","pdtprice","supplierno","bidprice","beizhu"],a);t.export_json_to_excel({header:["小分类编码","小分类名称","商品编号","商品名称","品牌","规格","型号","数量","单位","参考单价","竞标方货号","本轮竞标价","备注"],data:r,filename:n,autoWidth:!0}),e.downloadLoading=!1})}).catch(function(){e.$message({type:"info",message:"取消导出"})})},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"timestamp"===e?Object(s.h)(t[e]):t[e]})})},doAddOrUpdateEtpBid:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.jbloading=!0;var a={etpBidMain:{tpnumber:e.form.etpOrderMain.tpnumber,bdamount:e.totalAmount,subtime:e.form.etpOrderMain.subtime,belongserver:e.companyId,beizhu:e.form.etpOrderMain.beizhu,servername:e.company,tpid:e.form.etpOrderMain.id,status:e.form.etpOrderMain.status,tptype:e.form.etpOrderMain.tptype,makebidtime:e.form.etpOrderMain.makebidtime},items:e.form.items};Object(o.a)(a).then(function(t){console.log(t),e.jbloading=!1,e.$alert("报价成功","提示",{confirmButtonText:"确定",type:"success",callback:function(a){e.$router.push({name:"biddetail",params:{id:t.data}})}})}).catch(function(t){console.log(t),e.jbloading=!1})})}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.topShow?a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?["正在竞标"===e.form.etpOrderMain.status?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.jbloading,expression:"jbloading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.doAddOrUpdateEtpBid}},[e._v("开始竞标\r\n      ")]):e._e(),e._v(" "),a("div",{staticStyle:{height:"50px"}})]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"招标单号"}},[e._v("\r\n        "+e._s(e.form.etpOrderMain.tpnumber)+"\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"招标标题"}},[e._v("\r\n        "+e._s(e.form.etpOrderMain.title)+"\r\n      ")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标总金额"}},[e._v("\r\n            "+e._s(e.totalAmount)+"元\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标时间",prop:"etpOrderMain.makebidtime"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.form.etpOrderMain.makebidtime,callback:function(t){e.$set(e.form.etpOrderMain,"makebidtime",t)},expression:"form.etpOrderMain.makebidtime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标单位"}},[e._v("\r\n            "+e._s(e.company)+"\r\n          ")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"竞标状态"}},[a("el-tag",{attrs:{type:"正在竞标"===e.form.etpOrderMain.status?"success":"竞标结束"===e.form.etpOrderMain.status?"info":"primary"}},[e._v(e._s(e.form.etpOrderMain.status))])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"竞标备注"}},[a("el-input",{staticStyle:{float:"right"},attrs:{type:"textarea",rows:"5",placeholder:"竞标备注"},model:{value:e.form.etpOrderMain.beizhu,callback:function(t){e.$set(e.form.etpOrderMain,"beizhu",t)},expression:"form.etpOrderMain.beizhu"}})],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n          竞标物品明细\r\n          "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.downloadLoading,expression:"downloadLoading"}],attrs:{size:"mini",type:"primary",icon:"el-icon-add"},on:{click:e.exportExcel}},[e._v("\r\n            导出Excel\r\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-add"},on:{click:e.importExcel}},[e._v("\r\n            导入Excel\r\n          ")])],1),e._v(" "),a("el-form-item",{attrs:{prop:"items","label-width":"0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.items,border:""}},[a("el-table-column",{attrs:{fixed:"left","render-header":e.renderHeader,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.thirdlevno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdlev",label:"小分类名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品编号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtbrand))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtmodel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pdtunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                  "+e._s(t.row.pdtprice)+"\r\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"竞标方货号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.supplierno,callback:function(a){e.$set(t.row,"supplierno",a)},expression:"scope.row.supplierno"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本轮竞标价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.bidprice,callback:function(a){e.$set(t.row,"bidprice",a)},expression:"scope.row.bidprice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小计",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n                  "+e._s(1e3*t.row.bidprice*t.row.pdtnumber/1e3)+"\r\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.beizhu,callback:function(a){e.$set(t.row,"beizhu",a)},expression:"scope.row.beizhu"}})]}}])})],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("upload-excel-component",{on:{"on-selected-file":e.selected}})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("i4SY")},"data-v-d6752eec",null);t.default=h.exports},hiNR:function(e,t){},hlem:function(e,t){},htXt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("0xDb"),s={components:{quotable:a("5mLW").default},data:function(){return{planform:{quotation:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprice:"",enterpricename:"",fromorderno:"",isdelete:0,memos:"",quotationdate:"",status:"",sumamount:"",ticketno:"",postquotationdate:[],postcreatedate:[]},quotationItems:[]},list:[],pagesize:10,pageindex:1,total:0,currentPage:1,statusList:[{name:"草稿",value:-1},{name:"待审核",value:0},{name:"确认通过",value:1},{name:"驳回",value:-2}],loading:!1}},computed:r()({saleData:function(){return this.gridData.filter(function(e){return 1===e.sale})}},Object(i.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:l.h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this,t=this.planform.quotation;t.postquotationdate&&t.postquotationdate.length&&(t.quotationstartdate=Object(l.h)(t.postquotationdate[0]),t.quotationenddate=Object(l.h)(t.postquotationdate[1]),t.quotationdate=""),t.postcreatedate&&t.postcreatedate.length&&(t.createstartdate=Object(l.h)(t.postcreatedate[0]),t.createenddate=Object(l.h)(t.postcreatedate[1]),t.createdate=""),"customerquotationorderlist"===this.$route.name?t.quotationflag="0":"serverquotationorderlist"===this.$route.name&&(t.quotationflag="1"),this.loading=!0,Object(o.f)(r()({pagesize:this.pagesize,pageindex:this.pageindex},t)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},onCancel:function(){this.planform={quotation:{},quotationItems:[]}}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},["serverquotationorderlist"===e.$route.name?a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"报价企业",prop:"quotation.enterprice"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.quotation.enterprice,callback:function(t){e.$set(e.planform.quotation,"enterprice",t)},expression:"planform.quotation.enterprice"}},e._l(e.saleData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1):a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"询价企业",prop:"quotation.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请搜索或选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.quotation.customer,callback:function(t){e.$set(e.planform.quotation,"customer",t)},expression:"planform.quotation.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"报价日期"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.quotation.postquotationdate,callback:function(t){e.$set(e.planform.quotation,"postquotationdate",t)},expression:"planform.quotation.postquotationdate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"报价单号",prop:"quotation.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.quotation.ticketno,callback:function(t){e.$set(e.planform.quotation,"ticketno",t)},expression:"planform.quotation.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"创建日期",prop:"quotation.createdate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.quotation.postcreatedate,callback:function(t){e.$set(e.planform.quotation,"postcreatedate",t)},expression:"planform.quotation.postcreatedate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"单据状态",prop:"quotation.status"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.planform.quotation.status,callback:function(t){e.$set(e.planform.quotation,"status",t)},expression:"planform.quotation.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联计划单"}},[a("el-input",{model:{value:e.planform.quotation.fromorderno,callback:function(t){e.$set(e.planform.quotation,"fromorderno",t)},expression:"planform.quotation.fromorderno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"80px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("quotable",{attrs:{list:e.list,loading:e.loading}}),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("F6wA")},"data-v-e92684c0",null);t.default=u.exports},i4SY:function(e,t){},"if/M":function(e,t){},ig9B:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-money",use:"icon-money-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-money"><defs><style type="text/css"></style></defs><path d="M841.704141 99.863429l-659.418514 0c-45.51666 0-82.417081 36.910655-82.417081 82.437547l0 659.408281c0 45.51666 36.900422 82.427314 82.417081 82.427314l659.418514 0c45.526893 0 82.427314-36.910655 82.427314-82.427314l0-659.408281C924.131455 136.774083 887.231033 99.863429 841.704141 99.863429zM718.058053 429.572686l0 82.427314L553.213657 512l0 82.427314 164.844395 0 0 82.417081L553.213657 676.844395l0 123.646088-82.427314 0 0-123.646088-164.854629 0 0-82.417081 164.854629 0 0-82.427314-164.854629 0 0-82.427314 178.024579 0-219.243353-206.052936 123.646088 0 123.635855 123.625622 123.646088-123.625622 123.635855 0-210.801077 206.052936L718.058053 429.572686z" p-id="1571" /></symbol>'});i.a.add(l);t.default=l},izaZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),i=a.n(o),l=a("ehIy"),s={data:function(){return{inputInvoiceDetail:{inputInvoice:{},inputInvoiceItems:[]}}},created:function(){this.getInputInvoiceDetail()},methods:{getInputInvoiceDetail:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.j)({inputInvoice:{ticketno:e.$route.params.ticketno}}).then(function(t){console.log(t),e.inputInvoiceDetail.inputInvoice=t.data.data[0]}).catch(function(e){console.log(e)});case 2:return t.next=4,Object(l.i)({ticketno:e.$route.params.ticketno}).then(function(t){console.log(t),e.inputInvoiceDetail.inputInvoiceItems=t.data}).catch(function(e){console.log(e)});case 4:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createPost-container"},[a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.inputInvoiceDetail}},[a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{attrs:{span:21}},[a("div",{staticClass:"postInfo-container"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"开票单号:"}},[e._v("\n                  "+e._s(e.inputInvoiceDetail.inputInvoice.ticketno)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"服务商:"}},[e._v("\n                  "+e._s(e.inputInvoiceDetail.inputInvoice.servicername)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"开票日期:"}},[e._v("\n                  "+e._s(e.inputInvoiceDetail.inputInvoice.invoicedate)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"发票号码:"}},[e._v("\n                  "+e._s(e.inputInvoiceDetail.inputInvoice.invoiceno)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"单据状态:"}},[e._v("\n                  "+e._s(e._f("statusFilter")(e.inputInvoiceDetail.inputInvoice.status))+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"税前金额:"}},[e._v("\n                  ￥"+e._s(e.inputInvoiceDetail.inputInvoice.pretaxamount)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"税额:"}},[e._v("\n                  ￥"+e._s(e.inputInvoiceDetail.inputInvoice.taxamount)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"实际开票金额:"}},[e._v("\n                  ￥"+e._s(e.inputInvoiceDetail.inputInvoice.invoiceamount)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"计划开票金额:"}},[e._v("\n                  ￥"+e._s(e.inputInvoiceDetail.inputInvoice.planinvoiceamount)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.inputInvoiceDetail.inputInvoice.checkuser,expression:"inputInvoiceDetail.inputInvoice.checkuser"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"审核人:"}},[e._v("\n                  ￥"+e._s(e.inputInvoiceDetail.inputInvoice.checkuser)+"\n                ")])],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.inputInvoiceDetail.inputInvoice.checkdate,expression:"inputInvoiceDetail.inputInvoice.checkdate"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"80px",label:"审核日期:"}},[e._v("\n                  ￥"+e._s(e.inputInvoiceDetail.inputInvoice.checkdate)+"\n                ")])],1)],1)],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"0"}},[a("el-table",{ref:"inputInvoiceTable",staticStyle:{width:"100%"},attrs:{data:e.inputInvoiceDetail.inputInvoiceItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"入库单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.inorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购订单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.purchorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购合同号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoiceamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticStyle:{"max-width":"150px"},model:{value:t.row.bigcategoryname,callback:function(a){e.$set(t.row,"bigcategoryname",a)},expression:"scope.row.bigcategoryname"}})]:a("span",[e._v(e._s(t.row.bigcategoryname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"计划开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本次开票数量",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{staticStyle:{"max-width":"150px"},attrs:{min:1,max:t.row.planinvoicenum},on:{change:e.reflashData},model:{value:t.row.invoicenum,callback:function(a){e.$set(t.row,"invoicenum",a)},expression:"scope.row.invoicenum"}})]:a("span",[e._v(e._s(t.row.invoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票金额",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoicenum*t.row.price))])]}}])})],1)],1)],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("foNj")},"data-v-3d016e34",null);t.default=u.exports},"j+mQ":function(e,t,a){"use strict";t.a=function(e){return Object(n.a)({url:"/jqmapi/api/payment/addOrUpdatePayment",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/jqmapi/api/payment/getPaymentDetail",method:"post",data:e})},t.b=function(e){return Object(n.a)({url:"/jqmapi/api/payment/createPayment",method:"post",data:e})};var n=a("vLgD")},j8u2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("woOf"),u=a.n(c),d=a("0xDb"),p=a("ehIy"),m=a("NYxO"),f={inputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:"",memos:"",planinvoiceamount:"",planinvoicenum:"",pretaxamount:"",receivedate:"",receiveuser:"",servicer:"",servicername:"",status:"",taxamount:"",ticketno:""}},v={name:"inputinvoicelist",components:{CompanyChoice:a("xh2W").a},data:function(){return{searchForm:u()({postinvoicedate:null,postcreatedate:null},f),invoicetype:d.b,list:[],pagesize:10,pageindex:1,total:0,currentPage:1,loading:!1,status:d.e,addServicerShow:!1}},computed:s()({},Object(m.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{parseTime:d.h,onSubmit:function(){this.pageindex=1,this.getListData()},onCancel:function(){this.pageindex=1,this.searchForm={inputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:"",memos:"",planinvoiceamount:"",planinvoicenum:"",pretaxamount:"",receivedate:"",receiveuser:"",servicer:"",servicername:"",status:"",taxamount:"",ticketno:""}}},addServicer:function(){this.addServicerShow=!0},diClose:function(){this.addServicerShow=!1},subCompany:function(e){this.searchForm.inputInvoice.servicer=e.requestid,this.searchForm.inputInvoice.servicername=e.name},getListData:function(){var e=this,t=this.searchForm.inputInvoice;t.postinvoicedate&&t.postinvoicedate.length&&(t.voicestartdate=Object(d.h)(t.postinvoicedate[0]),t.voiceenddate=Object(d.h)(t.postinvoicedate[1]),t.voicedate=""),t.createdate&&(t.createdate=this.parseTime(t.createdate,"{y}-{m}-{d}"));var a={},n=!0,o=!1,l=void 0;try{for(var c,u=i()(r()(t));!(n=(c=u.next()).done);n=!0){var m=c.value;null!==t[m]&&""!==t[m]&&(a[m]=t[m])}}catch(e){o=!0,l=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw l}}this.loading=!0,Object(p.j)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},viewRow:function(e){this.$router.push({name:"inputinvoicedetail",params:{ticketno:e.ticketno}})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发票号码"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入发票号码"},model:{value:e.searchForm.inputInvoice.invoiceno,callback:function(t){e.$set(e.searchForm.inputInvoice,"invoiceno",t)},expression:"searchForm.inputInvoice.invoiceno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-search"},on:{focus:e.addServicer},model:{value:e.searchForm.inputInvoice.servicername,callback:function(t){e.$set(e.searchForm.inputInvoice,"servicername",t)},expression:"searchForm.inputInvoice.servicername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单据状态"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择单据状态","prefix-icon":"el-icon-search"},model:{value:e.searchForm.inputInvoice.status,callback:function(t){e.$set(e.searchForm.inputInvoice,"status",t)},expression:"searchForm.inputInvoice.status"}},e._l(e.status,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开票单号"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入开票单号"},model:{value:e.searchForm.inputInvoice.ticketno,callback:function(t){e.$set(e.searchForm.inputInvoice,"ticketno",t)},expression:"searchForm.inputInvoice.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"发票日期"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.inputInvoice.postinvoicedate,callback:function(t){e.$set(e.searchForm.inputInvoice,"postinvoicedate",t)},expression:"searchForm.inputInvoice.postinvoicedate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"创建日期",editable:!1},model:{value:e.searchForm.inputInvoice.createdate,callback:function(t){e.$set(e.searchForm.inputInvoice,"createdate",t)},expression:"searchForm.inputInvoice.createdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"开票单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRow(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"发票号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoiceno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"供应商"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.servicername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"应开票金额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoiceamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"实际开票金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoiceamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单据状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发票日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoicedate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"票到日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receivedate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"选择供应商",visible:e.addServicerShow,center:"",width:"80%"},on:{"update:visible":function(t){e.addServicerShow=t}}},[a("CompanyChoice",{on:{subCompany:e.subCompany,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var b=a("VU/8")(v,h,!1,function(e){a("rWhb")},null,null);t.default=b.exports},jQCD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("sJ5/"),u=a("NYxO"),d=a("0xDb"),p={data:function(){return{planform:{outOrder:{ticketno:"",enclosure:"",outstore:"",outstorename:"",outdate:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",linkaddress:"",linkuser:"",linktel:"",outOrder:"",closed:"",memos:"",outnum:"",isdelete:""},outOrderItems:[]},rules:{outOrder:{outstore:[{required:!0,message:"请选择发货仓库",trigger:"change"}],outdate:[{required:!0,message:"请选择计划到达日期",trigger:"change"}]},outOrderItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("明细不能空"));setTimeout(function(){a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/fileupload/getfile",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,submitloading:!1}},computed:s()({sumoutnum:function(){var e=0;return this.planform.outOrderItems.forEach(function(t){e+=t.outnum}),e},sumbacknum:function(){var e=0;return this.planform.outOrderItems.forEach(function(t){e+=t.backnum}),e},sumamount:function(){var e=0;return this.planform.outOrderItems.forEach(function(t){e+=t.ordernum*t.orderprice}),e},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.outOrder.outstore&&(t=a.storename)}),t}},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h},created:function(){this.$route.query.id?this.getDetail():this.getInfo(),this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.gridData.length||this.$store.dispatch("GetGysList")},beforeRouteLeave:function(e,t,a){this.$confirm("离开页面后输入内容将不被保存，确定离开吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort())},getDetail:function(){var e=this;Object(c.p)({ticketno:this.$route.query.id}).then(function(t){console.log(t),e.planform=t.data}).catch(function(e){console.log(e)})},getInfo:function(){var e=this;Object(c.G)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t);var a=t.data;a.outOrder.outdate="",a.outOrderItems.forEach(function(e){e.edit=!0,e.backnum=e.outnum}),e.planform=a}).catch(function(e){console.log(e)})},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},submitUpload:function(){this.$refs.upload.submit()},handleUploadSuccess:function(e,t,a){"200"===e.code?(this.$message({message:"上传附件成功~",type:"success"}),this.dialogVisible=!1,this.planform.outOrder.enclosure=e.data):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},importFile:function(){this.dialogVisible=!0},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path});e.planform.outOrderItems.forEach(function(e){e.edit=!1});var n=JSON.parse(r()(e.planform));n.outOrder.outstorename=e.storename,n.outOrder.outdate=Object(d.h)(e.planform.outOrder.outdate),n.outOrder.createuser=e.userInfo.truename,n.outOrder.sumoutnum=e.sumoutnum,Object(c.A)(n).then(function(t){console.log(t),e.$confirm("新建出库单成功！","提示",{confirmButtonText:"查看",cancelButtonText:"继续",type:"success"}).then(function(n){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"outstoredetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"outnoticelist"})})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},editRow:function(e){e.edit=!1},goeditrow:function(e){this.planform.outOrderItems[e].edit=!0,this.planform=JSON.parse(r()(this.planform))},onCancel:function(){this.$router.back()}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货通知单号",prop:"outOrder.outnotice"}},[a("el-input",{attrs:{disabled:""},model:{value:e.planform.outOrder.outnotice,callback:function(t){e.$set(e.planform.outOrder,"outnotice",t)},expression:"planform.outOrder.outnotice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货仓库",prop:"outOrder.outstore"}},[a("el-select",{attrs:{filterable:"",clearable:"",size:"100%",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.outOrder.outstore,callback:function(t){e.$set(e.planform.outOrder,"outstore",t)},expression:"planform.outOrder.outstore"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库日期",prop:"outOrder.outdate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.outOrder.outdate,callback:function(t){e.$set(e.planform.outOrder,"outdate",t)},expression:"planform.outOrder.outdate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库数量合计",prop:"outOrder.sumoutnum"}},[a("el-input",{attrs:{value:e.sumoutnum,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"上传附件"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importFile}},[e._v("\r\n            "+e._s(e.planform.outOrder.enclosure?"重新上传":"上传附件")+"\r\n          ")]),e._v("\r\n          "+e._s(e.planform.outOrder.enclosure)+"\r\n        ")],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"outOrderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.outOrderItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库数量",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{attrs:{min:0,max:t.row.backnum},model:{value:t.row.outnum,callback:function(a){e.$set(t.row,"outnum",a)},expression:"scope.row.outnum"}})]:a("span",[e._v(e._s(t.row.outnum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.query.id?"修改出库单":"创建出库单"))]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"before-upload":e.beforeUpload,"on-exceed":e.handleExceed,name:"myFile","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1个文件,文件最大不能超过5M。 ")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("7TAQ")},"data-v-56d1e81c",null);t.default=f.exports},jRH0:function(e,t){},jsD9:function(e,t,a){"use strict";t.a=function(e){return Object(n.a)({url:"/jqmapi/api/receivable/addOrUpdateReceivable",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/jqmapi/api/receivable/getReceivableDetail",method:"post",data:e})},t.b=function(e){return Object(n.a)({url:"/jqmapi/api/receivable/createReceivable",method:"post",data:e})};var n=a("vLgD")},kAXv:function(e,t){},klhe:function(e,t){},l9QO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("Dd8w"),i=a.n(o),l=a("sJ5/"),s=a("NYxO"),c=a("0xDb"),u={data:function(){return{planform:{outNotice:{ticketno:"",outstore:"",outstorename:"",outdate:"",enterprise:"",enterprisename:"",customer:"",customername:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",sumoutnum:"",sumordernum:"",linkaddress:"",linkuser:"",linktel:"",saleorder:"",closed:"",memos:"",isdelete:""},outNoticeItems:[]},rules:{outNotice:{outstore:[{required:!0,message:"请选择发货仓库",trigger:"change"}],outdate:[{required:!0,message:"请选择计划到达日期",trigger:"change"}],linkuser:[{required:!0,message:"请输入收货人",trigger:"blur"}],linkaddress:[{required:!0,message:"请输入收货地址",trigger:"blur"}],linktel:[{required:!0,message:"收货人电话",trigger:"blur"}]},outNoticeItems:[{validator:function(e,t,a){if(!t.length)return a(new Error("明细不能空"));setTimeout(function(){a()},300)},required:!0,trigger:"blur"}]},dialogVisible:!1,uploadUrl:"/planapi/api/excel/outNotice/export",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,gridLoading:!1,currentRow:{},multipleSelection:[],submitloading:!1}},computed:i()({sumordernum:function(){var e=0;return this.planform.outNoticeItems.forEach(function(t){e+=t.ordernum}),e},sumbacknum:function(){var e=0;return this.planform.outNoticeItems.forEach(function(t){e+=t.backnum}),e},sumamount:function(){var e=0;return this.planform.outNoticeItems.forEach(function(t){e+=t.ordernum*t.orderprice}),e},storename:function(){var e=this,t="";return this.revstoreList.length&&this.revstoreList.map(function(a){a.requestid===e.planform.outNotice.outstore&&(t=a.storename)}),t}},Object(s.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:c.h},created:function(){this.$route.query.id?this.getDetail():this.getSaleInfo(),this.revstoreList.length||this.$store.dispatch("GetStoreList"),this.gridData.length||this.$store.dispatch("GetGysList")},beforeRouteLeave:function(e,t,a){this.$confirm("离开页面后输入内容将不被保存，确定离开吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a()}).catch(function(){})},methods:{getDetail:function(){var e=this;Object(l.n)({ticketno:this.$route.query.id}).then(function(t){console.log(t);var a=t.data;a.outNoticeItems.forEach(function(e){e.backnum=e.ordernum}),e.planform=a}).catch(function(e){console.log(e)})},getSaleInfo:function(){var e=this;Object(l.g)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t);var a=t.data;a.outNoticeItems.forEach(function(e){e.edit=!0,e.backnum=e.ordernum}),e.planform=a}).catch(function(e){console.log(e)})},getName:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path}),n=JSON.parse(r()(e.planform));n.outNotice.outstorename=e.storename,n.outNotice.outdate=Object(c.h)(e.planform.outNotice.outdate),n.outNotice.createuser=e.userInfo.truename,n.outNotice.sumordernum=e.sumordernum,Object(l.z)(n).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("新建发货通知单成功！","提示",{confirmButtonText:"继续",cancelButtonText:"关闭",type:"success"}).then(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"saleorderlist"})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push("/")})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},editRow:function(e){e.edit=!1},goeditrow:function(e){this.planform.outNoticeItems[e].edit=!0,this.planform=JSON.parse(r()(this.planform))},onCancel:function(){this.$router.back()}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货企业",prop:"outNotice.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search",disabled:""},model:{value:e.planform.outNotice.customer,callback:function(t){e.$set(e.planform.outNotice,"customer",t)},expression:"planform.outNotice.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售订单号",prop:"outNotice.saleorder"}},[a("el-input",{attrs:{disabled:""},model:{value:e.planform.outNotice.saleorder,callback:function(t){e.$set(e.planform.outNotice,"saleorder",t)},expression:"planform.outNotice.saleorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货仓库",prop:"outNotice.outstore"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择",size:"100%","prefix-icon":"el-icon-search"},model:{value:e.planform.outNotice.outstore,callback:function(t){e.$set(e.planform.outNotice,"outstore",t)},expression:"planform.outNotice.outstore"}},e._l(e.revstoreList,function(e){return a("el-option",{key:e.id,attrs:{label:e.storename,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划到达日期",prop:"outNotice.outdate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.planform.outNotice.outdate,callback:function(t){e.$set(e.planform.outNotice,"outdate",t)},expression:"planform.outNotice.outdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货人",prop:"outNotice.linkuser"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outNotice.linkuser,callback:function(t){e.$set(e.planform.outNotice,"linkuser",t)},expression:"planform.outNotice.linkuser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货地址",prop:"outNotice.linkaddress"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outNotice.linkaddress,callback:function(t){e.$set(e.planform.outNotice,"linkaddress",t)},expression:"planform.outNotice.linkaddress"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"联系电话",prop:"outNotice.linktel"}},[a("el-input",{attrs:{type:"number"},model:{value:e.planform.outNotice.linktel,callback:function(t){e.$set(e.planform.outNotice,"linktel",t)},expression:"planform.outNotice.linktel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"订单数量合计",prop:"outNotice.sumordernum"}},[a("el-input",{attrs:{value:e.sumordernum,disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"可用金额"}},[a("el-input",{attrs:{type:"number",value:"0",disabled:""}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"备注",prop:"outNotice.memos"}},[a("el-input",{model:{value:e.planform.outNotice.memos,callback:function(t){e.$set(e.planform.outNotice,"memos",t)},expression:"planform.outNotice.memos"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        订单明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"outNoticeItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.outNoticeItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请数量",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{attrs:{min:0,max:t.row.backnum},model:{value:t.row.ordernum,callback:function(a){e.$set(t.row,"ordernum",a)},expression:"scope.row.ordernum"}})]:a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.$route.query.id?"修改发货通知单":"创建发货通知单"))]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("c6RL")},"data-v-0abe3b94",null);t.default=p.exports},lNUM:function(e,t){},lYaw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("pFYg"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("woOf"),p=a.n(d),m=a("0xDb"),f=a("ehIy"),v=a("NYxO"),h={outputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:null,memos:"",planinvoiceamount:null,planinvoicenum:null,pretaxamount:null,status:null,taxamount:null,ticketno:""}},b={name:"outputinvoicelist",components:{CompanyChoice:a("xh2W").a},data:function(){return{searchForm:p()({postlastinvoicedate:null},h),invoicetype:m.b,list:[],postForm:{},pagesize:10,pageindex:1,total:0,currentPage:1,loading:!1,status:m.e,addServicerShow:!1}},computed:u()({},Object(v.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{parseTime:m.h,onSubmit:function(){this.pageindex=1,this.postForm=this.searchForm.outputInvoice,this.getListData()},onCancel:function(){this.pageindex=1,this.searchForm={outputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:null,memos:"",planinvoiceamount:null,planinvoicenum:null,pretaxamount:null,status:null,taxamount:null,ticketno:""}}},addServicer:function(){this.addServicerShow=!0},diClose:function(){this.addServicerShow=!1},subCompany:function(e){this.searchForm.outputInvoice.customer=e.requestid,this.searchForm.outputInvoice.customername=e.name},getListData:function(){var e=this,t=this.postForm;t.postlastinvoicedate&&t.postlastinvoicedate.length&&(t.lastinvoicestartdate=Object(m.h)(t.postlastinvoicedate[0]),t.lastinvoiceenddate=Object(m.h)(t.postlastinvoicedate[1]),t.lastinvoicedate=""),t.createdate&&"object"===s()(t.createdate)&&(t.createdate=this.parseTime(t.createdate,"{y}-{m}-{d}"));var a={},n=!0,o=!1,l=void 0;try{for(var c,d=i()(r()(t));!(n=(c=d.next()).done);n=!0){var p=c.value;null!==t[p]&&""!==t[p]&&(a[p]=t[p])}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}this.loading=!0,Object(f.l)(u()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},viewRow:function(e){this.$router.push({name:"outputinvoiceresultdetail",params:{ticketno:e.ticketno}})},viewApplyRow:function(e){this.$router.push({name:"outputinvoicedetail",params:{ticketno:e.applyticketno}})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-card",{staticClass:"box-card"},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户"}},[a("el-input",{attrs:{placeholder:"请选择客户","prefix-icon":"el-icon-search"},on:{focus:e.addServicer},model:{value:e.searchForm.outputInvoice.customername,callback:function(t){e.$set(e.searchForm.outputInvoice,"customername",t)},expression:"searchForm.outputInvoice.customername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"单据状态"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择单据状态","prefix-icon":"el-icon-search"},model:{value:e.searchForm.outputInvoice.status,callback:function(t){e.$set(e.searchForm.outputInvoice,"status",t)},expression:"searchForm.outputInvoice.status"}},e._l(e.status,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开票单号","label-width":"100px"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入开票单号"},model:{value:e.searchForm.outputInvoice.ticketno,callback:function(t){e.$set(e.searchForm.outputInvoice,"ticketno",t)},expression:"searchForm.outputInvoice.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发票号","label-width":"100px"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入开票单号"},model:{value:e.searchForm.outputInvoice.invoiceno,callback:function(t){e.$set(e.searchForm.outputInvoice,"invoiceno",t)},expression:"searchForm.outputInvoice.invoiceno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"最迟开票日期","label-width":"110px"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.outputInvoice.postlastinvoicedate,callback:function(t){e.$set(e.searchForm.outputInvoice,"postlastinvoicedate",t)},expression:"searchForm.outputInvoice.postlastinvoicedate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"开票日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开票日期",editable:!1},model:{value:e.searchForm.outputInvoice.createdate,callback:function(t){e.$set(e.searchForm.outputInvoice,"createdate",t)},expression:"searchForm.outputInvoice.createdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"开票单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewRow(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票申请单号",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.viewApplyRow(t.row)}}},[e._v(e._s(t.row.applyinvoice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"发票号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoiceno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票金额",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoiceamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",label:"发票类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("invoicetypeFilter")(t.row.invoicetype)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单据状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最迟票日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lastinvoicedate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"选择客户",visible:e.addServicerShow,center:"",width:"80%"},on:{"update:visible":function(t){e.addServicerShow=t}}},[a("CompanyChoice",{on:{subCompany:e.subCompany,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(b,_,!1,function(e){a("5irT")},null,null);t.default=g.exports},"m/tv":function(e,t){},m2Lx:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=[],l={data:function(){return{gridData:[],pagesize:10,pageindex:1,total:0,currentPage:1,loading:!1,postData:{productname:"",categoryno:"",productno:"",productrule:"",productsize:""},multipleSelection:[],ispul:!1,checkboxVal:i,key:1,formTheadOptions:[{name:"规格",value:"productrule"},{name:"型号",value:"productsize"}],formThead:i}},watch:{checkboxVal:function(e){this.formThead=this.formTheadOptions.filter(function(t){return e.includes(t.value)}),this.key=this.key+1}},created:function(){this.gridData.length||this.getList()},methods:{onConfirm:function(){this.$emit("subProduct",this.multipleSelection),this.$refs.productTable.clearSelection(),this.$emit("diClose")},onCancel:function(){this.$refs.productTable.clearSelection()},onPuls:function(){this.ispul=!this.ispul},getList:function(){var e=this;this.loading=!0,Object(o.d)(r()({pagesize:this.pagesize,pageindex:this.pageindex},this.postData)).then(function(t){console.log(t),e.gridData=t.data.purchorders,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},handleSizeChange:function(e){this.pagesize=e,this.getList()},handleCurrentPageChange:function(e){this.pageindex=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},onSubmit:function(){this.getList()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.postData,labelWidth:"80px"}},[a("el-form-item",{attrs:{label:"商品编号"}},[a("el-input",{attrs:{placeholder:"商品编号"},model:{value:e.postData.productno,callback:function(t){e.$set(e.postData,"productno",t)},expression:"postData.productno"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.postData.productname,callback:function(t){e.$set(e.postData,"productname",t)},expression:"postData.productname"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:e.ispul?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:e.onPuls}},[e._v(e._s(e.ispul?"收起":"展开")+"条件")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ispul,expression:"ispul"}]},[a("el-form-item",{attrs:{label:"商品分类"}},[a("el-input",{attrs:{placeholder:"商品分类"},model:{value:e.postData.categoryno,callback:function(t){e.$set(e.postData,"categoryno",t)},expression:"postData.categoryno"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格"}},[a("el-input",{attrs:{placeholder:"规格"},model:{value:e.postData.productrule,callback:function(t){e.$set(e.postData,"productrule",t)},expression:"postData.productrule"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"型号"}},[a("el-input",{attrs:{placeholder:"型号"},model:{value:e.postData.productsize,callback:function(t){e.$set(e.postData,"productsize",t)},expression:"postData.productsize"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"filter-container"},[a("el-checkbox-group",{model:{value:e.checkboxVal,callback:function(t){e.checkboxVal=t},expression:"checkboxVal"}},[a("el-checkbox",{attrs:{label:"productrule"}},[e._v("规格")]),e._v(" "),a("el-checkbox",{attrs:{label:"productsize"}},[e._v("型号")])],1)],1),e._v(" "),a("el-table",{key:e.key,ref:"productTable",attrs:{"highlight-current-row":"","max-height":"600",data:e.gridData,loading:e.loading},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{property:"productno",label:"商品编号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{property:"categoryno",label:"分类",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{property:"productname",label:"商品名称"}}),e._v(" "),e._l(e.formThead,function(t){return a("el-table-column",{key:t.value,attrs:{label:t.name,width:"250"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n        "+e._s(a.row[t.value])+"\n      ")]}}])})})],2),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("确 定")])],1),e._v(" "),a("div",{staticClass:"clearfix"})],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("0JdX")},null,null);t.default=c.exports},m3qe:function(e,t){},nYVg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("j+mQ"),u=a("NYxO"),d=a("0xDb"),p={components:{orderchoice:a("9Mqp").default},data:function(){var e=this;return{paymentform:{payment:{createuser:"",enclosure:"",enterprise:"",enterprisename:"",fundnature:"",memos:"",payamount:"",contractno:"",paydate:"",payer:"",payername:"",purchorder:"",receivables:"",receivablesname:"",settlementmethod:"",status:"0"}},rules:{payment:{paydate:[{required:!0,message:"请选择付款日期",trigger:"change"}],fundnature:[{required:!0,message:"请选择款项性质",trigger:"blur"}],payamount:[{validator:function(t,a,n){return a.length>15?n(new Error("长度不能大于15")):a<=0?n(new Error("输入值需大于0")):parseFloat(a)?"1"===e.paymentform.payment.fundnature&&parseFloat(a)>e.paymentform.payment.residualamount?n(new Error("付款金额不能超过应付金额")):void n():n(new Error("请输入数字"))},required:!0,trigger:"blur"}],contractno:[{required:!0,message:"请输入合同编号",trigger:"blur"}],receivables:[{required:!0,message:"请选择收款方名称",trigger:"change"}],purchorder:[{required:!0,message:"请输入采购单",trigger:"change"}],settlementmethod:[{required:!0,message:"请选择结算方式",trigger:"change"}]}},dialogVisible:!1,uploadUrl:"/planapi/api/fileupload/getfile",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,multipleSelection:[],submitloading:!1,fundnature:[{name:"货款",value:1},{name:"服务费",value:2},{name:"投标保证金",value:3}],settlementmethod:d.d,orderchoiceshow:!1}},computed:s()({getEntName:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.paymentform.payment.enterprise&&(t=a.name)}),t},getCusname:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.paymentform.payment.receivables&&(t=a.name)}),t}},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.$route.query.id&&this.getDetail(this.$route.query.id)},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort())},delenclosure:function(){this.paymentform.payment.enclosure=""},getDetail:function(e){var t=this;Object(c.c)({ticketno:e}).then(function(e){t.paymentform.payment=e.data.data[0],console.log(e)}).catch(function(e){console.log(e)})},subOrder:function(e){var t={};e&&i()(e).length&&(t=e),this.paymentform.payment.purchorder=t.ticketno,this.paymentform.payment.contractno=t.contractno,this.paymentform.payment.receivables=t.servicer,this.paymentform.payment.residualamount=t.residualamount,this.paymentform.payment.enterprise=t.enterprise,this.paymentform.payment.enterprisename=t.enterprisename},purchorderFocus:function(){this.orderchoiceshow=!0},diClose:function(){this.orderchoiceshow=!1},importFile:function(){this.dialogVisible=!0},submitUpload:function(){this.$refs.upload.submit()},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},handleUploadSuccess:function(e,t,a){"200"===e.code?(this.$message({message:"上传附件成功~",type:"success"}),this.dialogVisible=!1,this.paymentform.payment.enclosure=e.data):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(console.log(t),!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path}),n=JSON.parse(r()(e.paymentform));n.payment.payer=e.companyId,n.payment.payername=e.company,n.payment.receivablesname=e.getCusname,n.payment.paydate=Object(d.h)(e.paymentform.payment.paydate),n.payment.createuser=e.userInfo.truename,console.log("send data: "+r()(n)),Object(c.a)(n.payment).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("操作成功！","提示",{confirmButtonText:"详情",cancelButtonText:"关闭",type:"success"}).then(function(n){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"paymentdetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push("/")})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},onCancel:function(){this.paymentform={payment:{}}}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.paymentform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"款项类型",prop:"payment.fundnature"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择款项类型","prefix-icon":"el-icon-search"},model:{value:e.paymentform.payment.fundnature,callback:function(t){e.$set(e.paymentform.payment,"fundnature",t)},expression:"paymentform.payment.fundnature"}},e._l(e.fundnature,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),1==e.paymentform.payment.fundnature?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联采购单",prop:"payment.purchorder"}},[a("el-input",{attrs:{type:"text","prefix-icon":"el-icon-search"},on:{focus:e.purchorderFocus},model:{value:e.paymentform.payment.purchorder,callback:function(t){e.$set(e.paymentform.payment,"purchorder",t)},expression:"paymentform.payment.purchorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号",prop:"payment.contractno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.paymentform.payment.contractno,callback:function(t){e.$set(e.paymentform.payment,"contractno",t)},expression:"paymentform.payment.contractno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款方",prop:"payment.receivables"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择收款客户","prefix-icon":"el-icon-search"},model:{value:e.paymentform.payment.receivables,callback:function(t){e.$set(e.paymentform.payment,"receivables",t)},expression:"paymentform.payment.receivables"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1):e._e(),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"结算方式",prop:"payment.settlementmethod"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择结算方式","prefix-icon":"el-icon-search"},model:{value:e.paymentform.payment.settlementmethod,callback:function(t){e.$set(e.paymentform.payment,"settlementmethod",t)},expression:"paymentform.payment.settlementmethod"}},e._l(e.settlementmethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款日期",prop:"payment.paydate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.paymentform.payment.paydate,callback:function(t){e.$set(e.paymentform.payment,"paydate",t)},expression:"paymentform.payment.paydate"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"本次付款金额",prop:"payment.payamount"}},[a("el-input",{attrs:{type:"text"},model:{value:e.paymentform.payment.payamount,callback:function(t){e.$set(e.paymentform.payment,"payamount",t)},expression:"paymentform.payment.payamount"}}),e._v(" "),1==e.paymentform.payment.fundnature&&e.paymentform.payment.purchorder?a("span",[e._v("该笔采购订单应付"+e._s(e.paymentform.payment.residualamount)+"元")]):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"上传附件",prop:"payment.enclosure"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importFile}},[e._v("\n            "+e._s(e.paymentform.payment.enclosure?"重新上传":"上传附件")+"\n          ")]),e._v(" "),a("span",[e._v(e._s(e.paymentform.payment.enclosure))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.paymentform.payment.enclosure,expression:"paymentform.payment.enclosure"}],attrs:{type:"text"},on:{click:e.delenclosure}},[e._v("删除")])],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"备注",prop:"payment.memos"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.paymentform.payment.memos,callback:function(t){e.$set(e.paymentform.payment,"memos",t)},expression:"paymentform.payment.memos"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新建付款单")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"before-upload":e.beforeUpload,"on-exceed":e.handleExceed,name:"myFile","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1个文件,文件最大不能超过5M。 ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择采购单",visible:e.orderchoiceshow,center:"",width:"80%"},on:{"update:visible":function(t){e.orderchoiceshow=t}}},[a("orderchoice",{on:{subOrder:e.subOrder,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("pts9")},"data-v-636ea30b",null);t.default=f.exports},nZAF:function(e,t){},naNR:function(e,t){},oSYw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-table",use:"icon-table-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-table"><defs><style type="text/css"></style></defs><path d="M568.6 0h454.9v454.9H568.6V0z m0 568.6h454.9v454.9H568.6V568.6zM0 568.6h454.9v454.9H0V568.6zM0 0h454.9v454.9H0V0z" fill="" p-id="5071" /></symbol>'});i.a.add(l);t.default=l},oud0:function(e,t){},owjh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("ehIy"),u=a("8hSj"),d=a("vHhr"),p=a("NYxO"),m={components:{Sticky:d.a},data:function(){return{planform:{OutputInvoice:{},OutputInvoiceItems:[]},fetchSuccess:!0,loading:!1}},computed:s()({},Object(p.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews"})),created:function(){this.getOutputInvoiceDetail()},methods:{Modify:u.a,needfresh:function(){this.getOutputInvoiceDetail()},nextpage:function(e,t){this.$router.push({name:e,params:{ticketno:this.$route.params.ticketno}})},getOutputInvoiceDetail:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.l)({ticketno:e.$route.params.ticketno}).then(function(t){console.log(t),e.planform.OutputInvoice=t.data.data[0]}).catch(function(t){console.log(t),e.fetchSuccess=!1});case 2:return t.next=4,Object(c.k)({ticketno:e.$route.params.ticketno}).then(function(t){console.log(t),e.planform.OutputInvoiceItems=t.data}).catch(function(t){console.log(t),e.fetchSuccess=!1});case 4:case"end":return t.stop()}},t,e)}))()}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createPost-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[-1==e.planform.OutputInvoice.status||-2==e.planform.OutputInvoice.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"OutputInvoice")}}},[e._v("删除")])]:0==e.planform.OutputInvoice.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"OutputInvoice",!0)}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"OutputInvoice",!0)}}},[e._v("驳回")])]:[a("el-tag",[e._v("暂无操作")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.planform}},[a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{attrs:{span:21}},[a("div",{staticClass:"postInfo-container"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"开票单号:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.ticketno)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"客户:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.customername)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"最迟开票日期:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.lastinvoicedate)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"实际开票金额:"}},[e._v("\n                  ￥"+e._s(e.planform.OutputInvoice.invoiceamount)+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"单据状态:"}},[e._v("\n                  "+e._s(e._f("statusFilter")(e.planform.OutputInvoice.status))+"\n                ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"申请人:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.createuser)+"\n                ")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"发票号:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.invoiceno)+"\n                ")])],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.planform.OutputInvoice.checkuser,expression:"planform.OutputInvoice.checkuser"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"审核人:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.checkuser)+"\n                ")])],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.planform.OutputInvoice.checkdate,expression:"planform.OutputInvoice.checkdate"}],attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"审核日期:"}},[e._v("\n                  "+e._s(e.planform.OutputInvoice.checkdate)+"\n                ")])],1)],1)],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"0"}},[a("el-table",{ref:"OutputInvoiceTable",staticStyle:{width:"100%"},attrs:{data:e.planform.OutputInvoiceItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"出库单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售订单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.saleorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售合同号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"大类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.bigcategoryname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"税额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"110",label:"税前金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pretaxamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开票金额",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoiceamount))])]}}])})],1)],1)],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(m,f,!1,function(e){a("a9GE")},"data-v-2c70d05a",null);t.default=v.exports},pmKY:function(e,t){},pts9:function(e,t){},rRYy:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("BO1k"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("sJ5/"),u=a("NYxO"),d=a("0xDb"),p={data:function(){return{planform:{outOrder:{ticketno:"",enclosure:"",outstore:"",outstorename:"",outdate:"",enterprise:"",enterprisename:"",createuser:"",createdate:"",status:"",checkuser:"",checkdate:"",checkadvice:"",linkaddress:"",linkuser:"",linktel:"",outOrder:"",closed:"",memos:"",outnum:"",isdelete:"",postoutdate:[]},outOrderItems:[]},statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],list:[],pagesize:10,pageindex:1,total:0,currentPage:1,deliverway:[{name:"库发",value:"1"},{name:"供应商直发",value:"2"},{name:"自提",value:"3"}],loading:!1}},computed:s()({},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h,statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.getListData()},methods:{handleSizeChange:function(e){this.pagesize=e,this.getListData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getListData()},getListData:function(){var e=this;this.loading=!0;var t=this.planform.outOrder;t.postoutdate&&t.postoutdate.length&&(t.outstartdate=Object(d.h)(t.postoutdate[0]),t.outenddate=Object(d.h)(t.postoutdate[1]),t.outdate="");var a={},n=!0,o=!1,l=void 0;try{for(var u,p=i()(r()(t));!(n=(u=p.next()).done);n=!0){var m=u.value;""!==t[m]&&(a[m]=t[m])}}catch(e){o=!0,l=e}finally{try{!n&&p.return&&p.return()}finally{if(o)throw l}}Object(c.q)(s()({pagesize:this.pagesize,pageindex:this.pageindex},a)).then(function(t){e.list=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1,console.log(t)}).catch(function(t){console.log(t),e.loading=!1})},onSubmit:function(){this.getListData()},viewRow:function(e){this.$router.push({name:"plandetail",params:{ticketno:e.ticketno}})},onCancel:function(){this.planform={outOrder:{},outOrderItems:[]}},nextpage:function(e){this.$router.push({name:"outstoredetail",params:{ticketno:e.ticketno}})},nextsalepage:function(e){this.$router.push({name:"outnoticedetail",params:{ticketno:e.outnotice}})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"出库单号",prop:"outOrder.ticketno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outOrder.ticketno,callback:function(t){e.$set(e.planform.outOrder,"ticketno",t)},expression:"planform.outOrder.ticketno"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"发货通知单号"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outOrder.outnotice,callback:function(t){e.$set(e.planform.outOrder,"outnotice",t)},expression:"planform.outOrder.outnotice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收货企业",prop:"outOrder.customer"}},[a("el-select",{attrs:{filterable:"",clearable:"",size:"100%",placeholder:"请选择","prefix-icon":"el-icon-search"},model:{value:e.planform.outOrder.customer,callback:function(t){e.$set(e.planform.outOrder,"customer",t)},expression:"planform.outOrder.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"出库日期",prop:"outOrder.postoutdate"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.planform.outOrder.postoutdate,callback:function(t){e.$set(e.planform.outOrder,"postoutdate",t)},expression:"planform.outOrder.postoutdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"创建人",prop:"outOrder.createuser"}},[a("el-input",{attrs:{type:"text"},model:{value:e.planform.outOrder.createuser,callback:function(t){e.$set(e.planform.outOrder,"createuser",t)},expression:"planform.outOrder.createuser"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"350px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"出库单号",fixed:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextpage(t.row)}}},[e._v(e._s(t.row.ticketno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发货通知单号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.nextsalepage(t.row)}}},[e._v(e._s(t.row.outnotice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收货企业",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.customername))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库仓库",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outstorename))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outnum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"出库金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"制单时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核人",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkuser))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"审核时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.checkdate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("RFze")},"data-v-6269d973",null);t.default=f.exports},rWhb:function(e,t){},rp0l:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("fZjL"),r=a.n(n),o=a("mvHQ"),i=a.n(o),l=a("Gu7T"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("NYxO"),p=a("0xDb"),m=a("0TzL"),f={data:function(){var e=function(e,t,a){if("etpOrderMain.bidbailamount"===e.field&&!t)return a();var n=parseFloat(t);return n.toString()!==t?a(new Error("请输入数值")):isNaN(n)?a(new Error("请输入数值")):(a(),void setTimeout(function(){"number"!=typeof n?a(new Error("请输入数值")):n<=0?a(new Error("必须大于0")):a()},300))};return{form:{etpOrderMain:{tptype:"0"},items:[]},uploadButtonVisible:!1,dialogVisible:!1,mxdialogVisible:!1,formLabelWidth:"120px",fileList:[],mxform:{pdtno:"",pdtnumber:"",pdtprice:"",beizhu:""},rules:{etpOrderMain:{title:[{required:!0,message:"请输入招标标题",trigger:"blur"},{min:3,max:45,message:"长度在 3 到 45 个字符",trigger:"blur"}],tptype:[{required:!0,message:"请选择招标类型",trigger:"change"}],subtime:[{required:!0,message:"请选择发标时间",trigger:"change"}],jbtime:[{required:!0,message:"请选择竞标时间",trigger:"change"}],bidbailamount:[{validator:e,trigger:"blur"}],registeramount:[{validator:e,required:!0,trigger:"blur"}]},items:[{validator:function(e,t,a){if(!t.length)return a(new Error("招标物品明细不能空"));setTimeout(function(){a()},300)},required:!0,trigger:"blur"}]},mxrules:{pdtno:[{required:!0,message:"请输入商品编号",trigger:"blur"}],pdtnumber:[{validator:e,required:!0,trigger:"blur"}],pdtprice:[{validator:e,required:!0,trigger:"blur"}]},loading:!1,mxindex:0}},computed:u()({uploadUrl:function(){return"0"===this.form.etpOrderMain.tptype?"/api/import/autoDetailType":"1"===this.form.etpOrderMain.tptype?"/api/import/categoryType":void 0},totalAmount:function(){var e=0;return this.form.items.forEach(function(t){e+=t.pdtprice*t.pdtnumber}),e}},Object(d.b)(["company","companyId"])),created:function(){this.$route.query.id&&this.getData()},methods:{getData:function(){var e=this;Object(m.g)({id:this.$route.query.id}).then(function(t){console.log(t),e.form.items=[].concat(s()(t.data.items)),e.form.etpOrderMain=u()({},t.data.etpOrderMain),e.form.etpOrderMain.amount=e.totalAmount,e.form.etpOrderMain.customname=e.company,e.form.etpOrderMain.belongcustom=e.companyId,e.form.etpOrderMain.subtime=new Date(e.form.etpOrderMain.subtime),e.form.etpOrderMain.jbtime=[e.form.etpOrderMain.starttime,e.form.etpOrderMain.endtime],e.form.etpOrderMain.tptype=e.form.etpOrderMain.tptype.toString()}).catch(function(e){console.log(e)})},goeditrow:function(e){this.form.items[e].edit=!0,this.form=JSON.parse(i()(this.form))},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(console.log(t),!t)return console.log("error submit!!"),!1;var a=JSON.parse(i()(e.form));a.etpOrderMain.amount=e.totalAmount,a.etpOrderMain.customname=e.company,a.etpOrderMain.belongcustom=e.companyId,a.etpOrderMain.jbtime&&(a.etpOrderMain.starttime=Object(p.h)(a.etpOrderMain.jbtime[0]),a.etpOrderMain.endtime=Object(p.h)(a.etpOrderMain.jbtime[1])),a.etpOrderMain.subtime=Object(p.h)(a.etpOrderMain.subtime),Object(m.b)(a).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("发布招标成功！","提示",{confirmButtonText:"立即查看",cancelButtonText:"关闭",type:"success"}).then(function(a){e.$router.push({name:"etpdetail",params:{id:t.data}})}).catch(function(t){e.$router.push({name:"myetp"})})}).catch(function(e){console.log(e)})})},onmxformSubmit:function(){var e=this;this.$refs.mxForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,Object(m.f)({pdtno:e.mxform.pdtno}).then(function(t){console.log(t),e.loading=!1;var a=t.data;e.form.items.push(u()({edit:!1},a,e.mxform)),e.mxdialogVisible=!1,e.$message({message:"成功增加一条商品明细!",type:"success"})}).catch(function(t){console.log(t),e.loading=!1})})},onCancel:function(){this.form={etpOrderMain:{tptype:"0"},items:[]}},editRow:function(e){e.edit=!1},addDetail:function(){"0"!==this.form.etpOrderMain.tptype?"1"===this.form.etpOrderMain.tptype&&this.form.items.push({rownumber:"",firstlev:"",secondlev:"",thirdlev:"",pdtname:"",pdtbrand:"",pdtsize:"",pdtnumber:"",pdtunit:"",beizhu:"",edit:!0}):this.mxdialogVisible=!0},handleDelete:function(e,t){this.form.items.splice(e,1),this.$message({message:"成功删除一条记录！",type:"success"})},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},importEXL:function(){this.dialogVisible=!0},renderHeader:function(e){return e("div",[e("div",{class:"renderd"},["操作"]),e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-add"},on:{click:this.importEXL}},["上传Excel"]),e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-add"},on:{click:this.addDetail}},["新增一条"])])},handelUploadChange:function(e,t){r()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},submitUpload:function(){this.$refs.upload.submit()},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleUploadSuccess:function(e,t,a){var n=this;"200"===e.code?(this.$confirm(e.message,"提示",{confirmButtonText:"完成",cancelButtonText:"继续导入",type:"success"}).then(function(e){n.dialogVisible=!1}).catch(function(e){}),e.data.map(function(e){e.edit=!1}),this.form.items=[].concat(s()(this.form.items),s()(e.data))):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},tptypeChange:function(e){}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"招标标题",prop:"etpOrderMain.title"}},[a("el-input",{model:{value:e.form.etpOrderMain.title,callback:function(t){e.$set(e.form.etpOrderMain,"title",t)},expression:"form.etpOrderMain.title"}})],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"招标类型",prop:"etpOrderMain.tptype"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!!e.$route.query.id},on:{change:e.tptypeChange},model:{value:e.form.etpOrderMain.tptype,callback:function(t){e.$set(e.form.etpOrderMain,"tptype",t)},expression:"form.etpOrderMain.tptype"}},[a("el-option",{attrs:{label:"明细招标",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"品类招标",value:"1"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"应缴保证金",prop:"etpOrderMain.bidbailamount"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入应缴保证金额"},model:{value:e.form.etpOrderMain.bidbailamount,callback:function(t){e.$set(e.form.etpOrderMain,"bidbailamount",t)},expression:"form.etpOrderMain.bidbailamount"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"招标总金额"}},[a("el-input",{attrs:{type:"number",value:e.totalAmount,disabled:!0}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发标时间",prop:"etpOrderMain.subtime"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.form.etpOrderMain.subtime,callback:function(t){e.$set(e.form.etpOrderMain,"subtime",t)},expression:"form.etpOrderMain.subtime"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"竞标时间",prop:"etpOrderMain.jbtime"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.etpOrderMain.jbtime,callback:function(t){e.$set(e.form.etpOrderMain,"jbtime",t)},expression:"form.etpOrderMain.jbtime"}})],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发标单位"}},[a("el-input",{attrs:{value:e.company,disabled:!0}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"参标方要求",prop:"etpOrderMain.registeramount"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.etpOrderMain.registeramount,callback:function(t){e.$set(e.form.etpOrderMain,"registeramount",t)},expression:"form.etpOrderMain.registeramount"}},[a("template",{slot:"prepend"},[e._v("注册资本不低于")]),e._v(" "),a("template",{slot:"append"},[e._v("万元")])],2)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"详细说明"}},[a("el-input",{staticStyle:{float:"right"},attrs:{type:"textarea",rows:"5",placeholder:"招标公告详细内容说明"},model:{value:e.form.etpOrderMain.smcontent,callback:function(t){e.$set(e.form.etpOrderMain,"smcontent",t)},expression:"form.etpOrderMain.smcontent"}})],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\n        招标物品明细\n        "),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-add"},on:{click:e.importEXL}},[e._v("\n          导入Excel\n        ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-add"},on:{click:e.addDetail}},[e._v("\n          新增一行\n        ")])],1),e._v(" "),"0"===e.form.etpOrderMain.tptype?a("el-form-item",{attrs:{"label-width":"0",prop:"items"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.items,border:"","max-height":"250"}},[a("el-table-column",{attrs:{label:"小分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.thirdlevno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdlev",label:"小分类名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品编号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtno,callback:function(a){e.$set(t.row,"pdtno",a)},expression:"scope.row.pdtno"}})]:a("span",[e._v(e._s(t.row.pdtno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtname,callback:function(a){e.$set(t.row,"pdtname",a)},expression:"scope.row.pdtname"}})]:a("span",[e._v(e._s(t.row.pdtname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtbrand,callback:function(a){e.$set(t.row,"pdtbrand",a)},expression:"scope.row.pdtbrand"}})]:a("span",[e._v(e._s(t.row.pdtbrand))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtmodel,callback:function(a){e.$set(t.row,"pdtmodel",a)},expression:"scope.row.pdtmodel"}})]:a("span",[e._v(e._s(t.row.pdtmodel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtsize,callback:function(a){e.$set(t.row,"pdtsize",a)},expression:"scope.row.pdtsize"}})]:a("span",[e._v(e._s(t.row.pdtsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtnumber,callback:function(a){e.$set(t.row,"pdtnumber",a)},expression:"scope.row.pdtnumber"}})]:a("span",[e._v(e._s(t.row.pdtnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtunit,callback:function(a){e.$set(t.row,"pdtunit",a)},expression:"scope.row.pdtunit"}})]:a("span",[e._v(e._s(t.row.pdtunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtprice,callback:function(a){e.$set(t.row,"pdtprice",a)},expression:"scope.row.pdtprice"}})]:a("span",[e._v(e._s(t.row.pdtprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1e3*t.row.pdtprice*t.row.pdtnumber/1e3))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.beizhu,callback:function(a){e.$set(t.row,"beizhu",a)},expression:"scope.row.beizhu"}})]:a("span",[e._v(e._s(t.row.beizhu))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1):e._e(),e._v(" "),"1"===e.form.etpOrderMain.tptype?a("el-form-item",{attrs:{"label-width":"0",prop:"items"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.items,border:"","max-height":"250"}},[a("el-table-column",{attrs:{label:"序号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.rownumber,callback:function(a){e.$set(t.row,"rownumber",a)},expression:"scope.row.rownumber"}})]:a("span",[e._v(e._s(t.row.rownumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"大类",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.firstlev,callback:function(a){e.$set(t.row,"firstlev",a)},expression:"scope.row.firstlev"}})]:a("span",[e._v(e._s(t.row.firstlev))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"中分类",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.secondlev,callback:function(a){e.$set(t.row,"secondlev",a)},expression:"scope.row.secondlev"}})]:a("span",[e._v(e._s(t.row.secondlev))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小分类",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.thirdlev,callback:function(a){e.$set(t.row,"thirdlev",a)},expression:"scope.row.thirdlev"}})]:a("span",[e._v(e._s(t.row.thirdlev))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtname,callback:function(a){e.$set(t.row,"pdtname",a)},expression:"scope.row.pdtname"}})]:a("span",[e._v(e._s(t.row.pdtname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtbrand,callback:function(a){e.$set(t.row,"pdtbrand",a)},expression:"scope.row.pdtbrand"}})]:a("span",[e._v(e._s(t.row.pdtbrand))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtsize,callback:function(a){e.$set(t.row,"pdtsize",a)},expression:"scope.row.pdtsize"}})]:a("span",[e._v(e._s(t.row.pdtsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"采购数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtnumber,callback:function(a){e.$set(t.row,"pdtnumber",a)},expression:"scope.row.pdtnumber"}})]:a("span",[e._v(e._s(t.row.pdtnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计量单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtunit,callback:function(a){e.$set(t.row,"pdtunit",a)},expression:"scope.row.pdtunit"}})]:a("span",[e._v(e._s(t.row.pdtunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.beizhu,callback:function(a){e.$set(t.row,"beizhu",a)},expression:"scope.row.beizhu"}})]:a("span",[e._v(e._s(t.row.beizhu))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.editRow(t.row)}}},[e._v("确定")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goeditrow(t.$index)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定发标")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,name:"myFile",accept:".xls,.xlsx","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xls和xlsx文件,文件最大不能超过5M。\n        "),"0"===e.form.etpOrderMain.tptype?a("a",{staticClass:"dlink",attrs:{href:"/static/templet/newetp.xls"}},[e._v("下载明细模板")]):e._e(),e._v(" "),"1"===e.form.etpOrderMain.tptype?a("a",{staticClass:"dlink",attrs:{href:"/static/templet/Typeofbidding.xls"}},[e._v("下载品类模板")]):e._e()])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增招标物品明细",visible:e.mxdialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.mxdialogVisible=t}}},[a("el-form",{ref:"mxForm",attrs:{model:e.mxform,rules:e.mxrules}},[a("el-form-item",{attrs:{label:"商品编号","label-width":e.formLabelWidth,prop:"pdtno"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.mxform.pdtno,callback:function(t){e.$set(e.mxform,"pdtno",t)},expression:"mxform.pdtno"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数量","label-width":e.formLabelWidth,prop:"pdtnumber"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.mxform.pdtnumber,callback:function(t){e.$set(e.mxform,"pdtnumber",t)},expression:"mxform.pdtnumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参考单价","label-width":e.formLabelWidth,prop:"pdtprice"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.mxform.pdtprice,callback:function(t){e.$set(e.mxform,"pdtprice",t)},expression:"mxform.pdtprice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{float:"right"},attrs:{type:"textarea",rows:"3"},model:{value:e.mxform.beizhu,callback:function(t){e.$set(e.mxform,"beizhu",t)},expression:"mxform.beizhu"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.mxdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.onmxformSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("gLUy"),a("if/M")},"data-v-d3674564",null);t.default=h.exports},"s+WH":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-out",use:"icon-out-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-out"><defs><style type="text/css"></style></defs><path d="M832 0C938.048 0 1024 85.952 1024 192L1024 832C1024 938.048 938.048 1024 832 1024L192 1024C85.952 1024 0 938.048 0 832L0 719.424 56.256 775.68C76.8 796.224 101.376 810.88 128 820.288L128 832C128 867.392 156.672 896 192 896L832 896C867.392 896 896 867.392 896 832L896 192C896 156.672 867.392 128 832 128L192 128C156.672 128 128 156.672 128 192L128 203.648C101.44 213.056 76.864 227.648 56.256 248.192L0 304.448 0 192C0 85.952 85.952 0 192 0L832 0ZM216.512 324.8C240.384 334.656 256 358.08 256 383.936L256 448 448 448C483.392 448 512 476.672 512 512 512 547.392 483.392 576 448 576L256 576 256 639.936C256 665.792 240.384 689.216 216.512 699.072 192.576 708.928 165.056 703.424 146.752 685.184L18.752 557.184C6.272 544.704 0 528.32 0 511.936 0 495.552 6.272 479.168 18.752 466.688L146.752 338.688C165.056 320.384 192.576 314.944 216.512 324.8Z" p-id="16495" /></symbol>'});i.a.add(l);t.default=l},"sJ5/":function(e,t,a){"use strict";t.F=function(){return Object(n.a)({url:"/yyjapi/api/gys/getdata",method:"get"})},t.E=function(e){return Object(n.a)({url:"/planapi/api/enquiryOrder/addOrUpdateEnquiryOrder",method:"post",data:e})},t.l=function(e){return Object(n.a)({url:"/planapi/api/enquiryOrder/main/list",method:"post",data:e})},t.b=function(e){return Object(n.a)({url:"/planapi/api/enquiryOrder/detailInfo",method:"post",data:e})},t.D=function(e){return Object(n.a)({url:"/planapi/api/saleOrder/addOrUpdateSaleOrder",method:"post",data:e})},t.B=function(e){return Object(n.a)({url:"/yyjapi/api/purchorder/addOrUpdatePurchaseOrder",method:"post",data:e})},t.w=function(e){return Object(n.a)({url:"/yyjapi/api/store/getdata",method:"get",data:e})},t.u=function(e){return Object(n.a)({url:"/planapi/api/saleOrder/main/list",method:"post",data:e})},t.t=function(e){return Object(n.a)({url:"/planapi/api/saleOrder/detailInfo",method:"post",data:e})},t.s=function(e){return Object(n.a)({url:"/yyjapi/api/purchorder/getpurchorderMain",method:"post",data:e})},t.r=function(e){return Object(n.a)({url:"/yyjapi/api/purchorder/getpurchorder",method:"post",data:e})},t.C=function(e){return Object(n.a)({url:"/planapi/api/quotation/addOrUpdateQuotationOrder",method:"post",data:e})},t.c=function(e){return Object(n.a)({url:"/planapi/api/quotation/getEnquiryInfo",method:"post",data:e})},t.f=function(e){return Object(n.a)({url:"/planapi/api/quotation/main/list",method:"post",data:e})},t.e=function(e){return Object(n.a)({url:"/planapi/api/quotation/detailInfo",method:"post",data:e})},t.m=function(e){return Object(n.a)({url:"/jqmapi/api/order/orderOperate",method:"post",data:e})},t.g=function(e){return Object(n.a)({url:"/planapi/api/outNotice/getSaleOrderInfo",method:"post",data:e})},t.z=function(e){return Object(n.a)({url:"/planapi/api/outNotice/addOrUpdateOutNotice",method:"post",data:e})},t.o=function(e){return Object(n.a)({url:"/planapi/api/outNotice/main/list",method:"post",data:e})},t.n=function(e){return Object(n.a)({url:"/planapi/api/outNotice/detailInfo",method:"post",data:e})},t.y=function(e){return Object(n.a)({url:"/jqmapi/api/inoticeOrder/addOrUpdateInoticeOrder",method:"post",data:e})},t.i=function(e){return Object(n.a)({url:"/jqmapi/api/inoticeOrder/getMainDetail",method:"post",data:e})},t.h=function(e){return Object(n.a)({url:"/jqmapi/api/inoticeOrder/getItemDetail",method:"post",data:e})},t.G=function(e){return Object(n.a)({url:"/planapi/api/outOrder/getOutNoticeInfo",method:"post",data:e})},t.A=function(e){return Object(n.a)({url:"/planapi/api/outOrder/addOrUpdateOutOrder",method:"post",data:e})},t.q=function(e){return Object(n.a)({url:"/planapi/api/outOrder/main/list",method:"post",data:e})},t.p=function(e){return Object(n.a)({url:"/planapi/api/outOrder/detailInfo",method:"post",data:e})},t.k=function(e){return Object(n.a)({url:"/yyjapi/api/inorder/getinorderMain",method:"post",data:e})},t.x=function(e){return Object(n.a)({url:"/yyjapi/api/inorder/addOrUpdateInOrder",method:"post",data:e})},t.j=function(e){return Object(n.a)({url:"/yyjapi/api/inorder/getinorder",method:"post",data:e})},t.v=function(e){return Object(n.a)({url:"/jqmapi/api/stock/getDetail",method:"post",data:e})},t.a=function(e){return Object(n.a)({url:"/planapi/api/modelExcel/getModelData",method:"post",data:e})},t.d=function(e){return Object(n.a)({url:"/yyjapi/api/ufproduct/getufproduct",method:"post",data:e})};var n=a("vLgD")},sTIr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-form",use:"icon-form-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-form"><defs><style type="text/css"></style></defs><path d="M942.827259 80.3367c-11.42419-11.406794-26.41051-17.117866-41.377386-17.117866-14.985296 0-29.952172 5.711072-41.358967 17.117866L719.392444 221.014696l-19.441794 19.441794L681.577187 258.832 569.516971 370.909611 375.99749 564.411697l0 0.019443 0 84.372619 81.145112 0 0.010233 0 95.418186-95.435583 213.398228-213.400275 3.14155-3.14155-0.019443 0 9.979282-9.977235 0 0L942.827259 163.073052C965.697129 140.259464 965.697129 103.186104 942.827259 80.3367z" p-id="3231" /><path d="M793.542234 367.521444 580.14196 580.939115 484.72582 676.376745 473.299583 687.800935 457.152834 687.800935 375.99749 687.800935 337.000314 687.800935 337.000314 648.803759 337.000314 564.411697 337.000314 548.264948 348.424504 536.838711 541.943986 343.338672 654.004201 231.259014 665.428392 219.834824 64.020082 219.834824 64.020082 960.781166 804.966425 960.781166 804.966425 356.116697 796.607036 364.475062Z" p-id="3232" /></symbol>'});i.a.add(l);t.default=l},"t+aG":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-stock",use:"icon-stock-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-stock"><defs><style type="text/css"></style></defs><path d="M368.281249 572.365856l-70.691015 0c-27.085892 0-32.697703 5.607718-32.697703 32.69361l0 71.675436c0 27.083845 5.611811 32.69361 32.697703 32.69361l70.691015 0c27.085892 0 32.694633-5.609765 32.694633-32.69361l0-71.675436C400.975882 577.974597 395.367141 572.365856 368.281249 572.365856z" p-id="2567" /><path d="M368.281249 396.975267l-70.691015 0c-27.085892 0-32.697703 5.609765-32.697703 32.69668l0 71.672366c0 27.085892 5.611811 32.695656 32.697703 32.695656l70.691015 0c27.085892 0 32.694633-5.608741 32.694633-32.695656l0-71.672366C400.975882 402.586055 395.367141 396.975267 368.281249 396.975267z" p-id="2568" /><path d="M368.281249 747.988736l-70.691015 0c-27.085892 0-32.697703 5.609765-32.697703 32.695656l0 71.669296c0 27.092032 5.611811 32.697703 32.697703 32.697703l70.691015 0c27.085892 0 32.694633-5.611811 32.694633-32.697703l0-71.669296C400.975882 753.599524 395.367141 747.988736 368.281249 747.988736z" p-id="2569" /><path d="M553.315476 747.988736l-70.686922 0c-27.084868 0-32.695656 5.609765-32.695656 32.695656l0 71.669296c0 27.092032 5.609765 32.697703 32.695656 32.697703l70.686922 0c27.092032 0 32.69975-5.611811 32.69975-32.697703l0-71.669296C586.015226 753.599524 580.406484 747.988736 553.315476 747.988736z" p-id="2570" /><path d="M553.315476 572.365856l-70.686922 0c-27.084868 0-32.695656 5.607718-32.695656 32.69361l0 71.675436c0 27.083845 5.609765 32.69361 32.695656 32.69361l70.686922 0c27.092032 0 32.69975-5.609765 32.69975-32.69361l0-71.675436C586.015226 577.974597 580.406484 572.365856 553.315476 572.365856z" p-id="2571" /><path d="M950.571129 371.311771 534.769075 78.640058c-3.218298-3.239787-6.897084-5.739724-10.770298-7.444553-12.291954-7.05365-29.065989-2.601244-39.072901 10.543124L73.407382 372.289028c-12.766768 9.012258-14.725376 28.382421-4.373611 43.265386 10.357905 14.883989 29.093619 19.642362 41.86141 10.635221l28.688389-20.25737 0 479.361649c0 18.048051 14.630209 32.67212 32.674167 32.67212s32.67519-14.628162 32.67519-32.67212L204.932927 359.792413 512.06191 142.948713l313.558415 220.709751 0 521.635451c0 18.048051 14.630209 32.67212 32.682353 32.67212 18.042935 0 32.673144-14.628162 32.673144-32.67212L890.975822 409.656077l22.022573 15.505136c12.793374 9.008164 31.573089 4.249791 41.947368-10.615779C965.324134 399.673725 963.364503 380.320958 950.571129 371.311771z" p-id="2572" /><path d="M738.591203 747.988736l-70.923306 0c-27.092032 0-32.701796 5.609765-32.701796 32.695656l0 71.669296c0 27.092032 5.609765 32.697703 32.701796 32.697703l70.923306 0c27.086915 0 32.69668-5.611811 32.69668-32.697703l0-71.669296C771.287883 753.599524 765.677095 747.988736 738.591203 747.988736z" p-id="2573" /></symbol>'});i.a.add(l);t.default=l},tBvx:function(e,t){},tG1M:function(e,t){},thQc:function(e,t){},tlvQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("NYxO"),i={name:"SidebarItem",props:{routes:{type:Array},isNest:{type:Boolean,default:!1}},computed:r()({enterprise:function(){return this.companyId?"&enterprise="+this.companyId:""}},Object(o.b)({company:"company",companyId:"companyId",userInfo:"userInfo"}))},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"menu-wrapper"},[e._l(e.routes,function(t){return!t.hidden&&t.children?[t.outLinkUrl?[1!==t.children.length||t.children[0].children||t.alwaysShow?a("el-submenu",{key:t.name,attrs:{index:t.name||t.path}},[a("template",{slot:"title"},[t.meta&&t.meta.icon?a("svg-icon",{attrs:{"icon-class":t.meta.icon}}):e._e(),e._v(" "),t.meta&&t.meta.title?a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.title))]):e._e()],1),e._v(" "),e._l(t.children,function(n){return n.hidden?e._e():[n.children&&n.children.length>0?a("sidebar-item",{key:n.path,staticClass:"nest-menu",attrs:{"is-nest":!0,routes:[n]}}):a("a",{key:n.name,attrs:{target:"_blank",href:n.outLinkUrl+e.enterprise}},[a("el-menu-item",{attrs:{index:t.path+"/"+n.path}},[n.meta&&n.meta.icon?a("svg-icon",{attrs:{"icon-class":n.meta.icon}}):e._e(),e._v(" "),n.meta&&n.meta.title?a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.meta.title))]):e._e()],1)],1)]})],2):a("a",{key:t.children[0].name,attrs:{target:"_blank",href:t.outLinkUrl+e.enterprise}},[a("el-menu-item",{class:{"submenu-title-noDropdown":!e.isNest},attrs:{index:t.path+"/"+t.children[0].path}},[t.children[0].meta&&t.children[0].meta.icon?a("svg-icon",{attrs:{"icon-class":t.children[0].meta.icon}}):e._e(),e._v(" "),t.children[0].meta&&t.children[0].meta.title?a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.children[0].meta.title))]):e._e()],1)],1)]:[1!==t.children.length||t.children[0].children||t.alwaysShow?a("el-submenu",{key:t.name,attrs:{index:t.name||t.path}},[a("template",{slot:"title"},[t.meta&&t.meta.icon?a("svg-icon",{attrs:{"icon-class":t.meta.icon}}):e._e(),e._v(" "),t.meta&&t.meta.title?a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.title))]):e._e()],1),e._v(" "),e._l(t.children,function(n){return n.hidden?e._e():[n.children&&n.children.length>0?a("sidebar-item",{key:n.path,staticClass:"nest-menu",attrs:{"is-nest":!0,routes:[n]}}):a("router-link",{key:n.name,attrs:{to:t.path+"/"+n.path}},[a("el-menu-item",{attrs:{index:t.path+"/"+n.path}},[n.meta&&n.meta.icon?a("svg-icon",{attrs:{"icon-class":n.meta.icon}}):e._e(),e._v(" "),n.meta&&n.meta.title?a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.meta.title))]):e._e()],1)],1)]})],2):a("router-link",{key:t.children[0].name,attrs:{to:t.path+"/"+t.children[0].path}},[a("el-menu-item",{class:{"submenu-title-noDropdown":!e.isNest},attrs:{index:t.path+"/"+t.children[0].path}},[t.children[0].meta&&t.children[0].meta.icon?a("svg-icon",{attrs:{"icon-class":t.children[0].meta.icon}}):e._e(),e._v(" "),t.children[0].meta&&t.children[0].meta.title?a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.children[0].meta.title))]):e._e()],1)],1)]]:e._e()})],2)},staticRenderFns:[]},s=a("VU/8")(i,l,!1,null,null,null);t.default=s.exports},tvR6:function(e,t){},uMhA:function(e,t){},vHhr:function(e,t,a){"use strict";var n={name:"Sticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String}},data:function(){return{active:!1,position:"",currentTop:"",width:void 0,height:void 0,child:null,stickyHeight:0}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{sticky:function(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px")},reset:function(){this.active&&(this.position="",this.width="auto",this.active=!1)},handleScroll:function(){this.width=this.$el.getBoundingClientRect().width,this.$el.getBoundingClientRect().top<=this.stickyTop?this.sticky():this.reset()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{height:e.height+"px",zIndex:e.zIndex}},[a("div",{class:e.className,style:{top:e.stickyTop+"px",zIndex:e.zIndex,position:e.position,width:e.width,height:e.height+"px"}},[e._t("default",[a("div",[e._v("sticky")])])],2)])},staticRenderFns:[]},o=a("VU/8")(n,r,!1,null,null,null);t.a=o.exports},vLgD:function(e,t,a){"use strict";var n=a("//Fk"),r=a.n(n),o=a("mtWM"),i=a.n(o),l=a("IcnI"),s=a("zL8q"),c=(a.n(s),a("0xDb")),u=i.a.create({baseURL:"",timeout:15e3});u.interceptors.response.use(function(e){var t=e.data;return"0"!==t.code&&"200"!==t.code&&"success"!==t.code?(Object(s.Message)({message:t.message,type:"error",duration:5e3}),"512"===t.code&&s.MessageBox.alert("验证失败,请重新登录").then(function(e){l.a.dispatch("LogOut").then(function(){location.href=c.c+"/logout?service="+location.origin+"/csj_login"}).catch(function(){location.href=c.c+"/logout?service="+location.origin+"/csj_login"})}),r.a.reject(t)):e.data},function(e){return console.log("err"+e),Object(s.Message)({message:e.message,type:"error",duration:5e3}),r.a.reject(e)}),t.a=u},vWyl:function(e,t){},w8FE:function(e,t){},wOYz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("jsD9"),u=a("NYxO"),d=a("0xDb"),p={components:{orderchoice:a("yJ5x").default},data:function(){var e=this;return{receivableform:{receivable:{checkadvice:"",checkdate:"",checkuser:"",contractno:"",createdate:"",createuser:"",enclosure:"",enterprise:"",enterprisename:"",fundnature:"",interestrate:"",isdelete:0,memos:"",payer:"",payername:"",recamount:0,recdate:"",receivables:"",receivablesname:"",saleorder:"",settlementmethod:"",status:0,ticketno:""}},rules:{receivable:{paydate:[{required:!0,message:"请选择付款日期",trigger:"change"}],recdate:[{required:!0,message:"请选择收款日期",trigger:"change"}],fundnature:[{required:!0,message:"请选择款项性质",trigger:"blur"}],recamount:[{validator:function(t,a,n){return a.length>15?n(new Error("长度不能大于15")):a<=0?n(new Error("输入值需大于0")):parseFloat(a)?"1"===e.receivableform.receivable.fundnature&&parseFloat(a)>e.receivableform.receivable.residualamount?n(new Error("收款金额不能超过应收金额")):void n():n(new Error("请输入数字"))},required:!0,trigger:"blur"}],contractno:[{required:!0,message:"请输入合同编号",trigger:"blur"}],payer:[{required:!0,message:"请选择付款方",trigger:"change"}],saleorder:[{required:!0,message:"请输入销售单",trigger:"change"}],settlementmethod:[{required:!0,message:"请选择结算方式",trigger:"change"}]}},dialogVisible:!1,uploadUrl:"/planapi/api/fileupload/getfile",fileList:[],uploadButtonVisible:!1,dialogTableVisible:!1,multipleSelection:[],submitloading:!1,fundnature:d.a,settlementmethod:d.d,orderchoiceshow:!1}},computed:s()({getEntName:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.receivableform.receivable.enterprise&&(t=a.name)}),t},getCusname:function(){var e=this,t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e.receivableform.receivable.payer&&(t=a.name)}),t}},Object(u.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),filters:{parseTime:d.h},created:function(){this.gridData.length||this.$store.dispatch("GetGysList"),this.$route.query.id&&this.getDetail()},methods:{beforeUpload:function(e){e.size>5e6&&(this.$message.error("上传附件不能大于5M"),this.$refs.upload.abort())},delenclosure:function(){this.receivableform.receivable.enclosure=""},getDetail:function(){var e=this;Object(c.c)({ticketno:this.$route.params.ticketno}).then(function(t){e.receivableform.receivable=t.data.data[0],console.log(t)}).catch(function(e){console.log(e)})},subOrder:function(e){var t={};e&&i()(e).length&&(t=e),this.receivableform.receivable.saleorder=t.ticketno,this.receivableform.receivable.contractno=t.contractno,this.receivableform.receivable.payer=t.customer,this.receivableform.receivable.residualamount=t.residualamount,this.receivableform.receivable.enterprise=t.enterprise,this.receivableform.receivable.enterprisename=t.enterprisename},saleorderFocus:function(){this.orderchoiceshow=!0},diClose:function(){this.orderchoiceshow=!1},importFile:function(){this.dialogVisible=!0},submitUpload:function(){this.$refs.upload.submit()},handleExceed:function(e,t){this.$message.warning("当前限制选择上传 1 个文件")},handelUploadChange:function(e,t){i()(e).length&&t.length?this.uploadButtonVisible=!0:this.uploadButtonVisible=!1},handleUploadSuccess:function(e,t,a){"200"===e.code?(this.$message({message:"上传附件成功~",type:"success"}),this.dialogVisible=!1,this.receivableform.receivable.enclosure=e.data):this.$message({message:e.message,type:"error"}),this.$refs.upload.clearFiles()},onSubmit:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(console.log(t),!t)return console.log("error submit!!"),!1;e.submitloading=!0;var a=e.visitedViews.filter(function(t){return t.path===e.$route.path}),n=JSON.parse(r()(e.receivableform));n.receivable.payername=e.getCusname,n.receivable.receivables=e.companyId,n.receivable.receivablesname=e.company,n.receivable.recdate=Object(d.h)(e.receivableform.receivable.recdate),n.receivable.createuser=e.userInfo.truename,console.log("send data: "+r()(n)),Object(c.a)(n.receivable).then(function(t){console.log(t),"200"===t.code&&t.data&&e.$confirm("新建收款单成功！","提示",{confirmButtonText:"详情",cancelButtonText:"关闭",type:"success"}).then(function(n){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push({name:"receivabledetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",a[0]).then(function(){e.$router.push("/")})}),e.submitloading=!1}).catch(function(t){console.log(t),e.submitloading=!1})})},onCancel:function(){this.receivableform={receivable:{}}}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.receivableform,rules:e.rules,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"款项类型",prop:"receivable.fundnature"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择款项类型","prefix-icon":"el-icon-search"},model:{value:e.receivableform.receivable.fundnature,callback:function(t){e.$set(e.receivableform.receivable,"fundnature",t)},expression:"receivableform.receivable.fundnature"}},e._l(e.fundnature,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1)],1),e._v(" "),1==e.receivableform.receivable.fundnature?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联销售单",prop:"receivable.saleorder"}},[a("el-input",{attrs:{type:"text","prefix-icon":"el-icon-search"},on:{focus:e.saleorderFocus},model:{value:e.receivableform.receivable.saleorder,callback:function(t){e.$set(e.receivableform.receivable,"saleorder",t)},expression:"receivableform.receivable.saleorder"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号",prop:"receivable.contractno"}},[a("el-input",{attrs:{type:"text"},model:{value:e.receivableform.receivable.contractno,callback:function(t){e.$set(e.receivableform.receivable,"contractno",t)},expression:"receivableform.receivable.contractno"}})],1)],1)],1):e._e(),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"结算方式",prop:"receivable.settlementmethod"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择结算方式","prefix-icon":"el-icon-search"},model:{value:e.receivableform.receivable.settlementmethod,callback:function(t){e.$set(e.receivableform.receivable,"settlementmethod",t)},expression:"receivableform.receivable.settlementmethod"}},e._l(e.settlementmethod,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款日期",prop:"receivable.recdate"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期时间",align:"right"},model:{value:e.receivableform.receivable.recdate,callback:function(t){e.$set(e.receivableform.receivable,"recdate",t)},expression:"receivableform.receivable.recdate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"付款方",prop:"receivable.payer"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择付款客户","prefix-icon":"el-icon-search"},model:{value:e.receivableform.receivable.payer,callback:function(t){e.$set(e.receivableform.receivable,"payer",t)},expression:"receivableform.receivable.payer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"本次收款金额",prop:"receivable.recamount"}},[a("el-input",{attrs:{type:"number"},model:{value:e.receivableform.receivable.recamount,callback:function(t){e.$set(e.receivableform.receivable,"recamount",t)},expression:"receivableform.receivable.recamount"}}),e._v(" "),1==e.receivableform.receivable.fundnature&&e.receivableform.receivable.saleorder?a("span",[e._v("该笔销售订单应收"+e._s(e.receivableform.receivable.residualamount)+"元")]):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"上传附件",prop:"receivable.enclosure"}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.importFile}},[e._v("\n            "+e._s(e.receivableform.receivable.enclosure?"重新上传":"上传附件")+"\n          ")]),e._v(" "),a("span",[e._v(e._s(e.receivableform.receivable.enclosure))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.receivableform.receivable.enclosure,expression:"receivableform.receivable.enclosure"}],attrs:{type:"text"},on:{click:e.delenclosure}},[e._v("删除")])],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"备注",prop:"receivable.memos"}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.receivableform.receivable.memos,callback:function(t){e.$set(e.receivableform.receivable,"memos",t)},expression:"receivableform.receivable.memos"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-form-item",[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.submitloading,expression:"submitloading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("新建收款单")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"file-list":e.fileList,"on-exceed":e.handleExceed,"before-upload":e.beforeUpload,name:"myFile","on-change":e.handelUploadChange,"on-success":e.handleUploadSuccess,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.uploadButtonVisible,expression:"uploadButtonVisible"}],staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传1个文件,文件最大不能超过5M。 ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择销售单",visible:e.orderchoiceshow,center:"",width:"80%"},on:{"update:visible":function(t){e.orderchoiceshow=t}}},[a("orderchoice",{on:{subOrder:e.subOrder,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,m,!1,function(e){a("+Ihy")},"data-v-9034b156",null);t.default=f.exports},whyo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("sJ5/"),i=a("NYxO"),l=a("vHhr"),s=a("0xDb"),c=a("8hSj"),u={components:{Sticky:l.a},data:function(){return{planform:{saleOrder:{},saleOrderItems:[]},fetchSuccess:!0}},computed:r()({sumordernum:function(){var e=0;return this.planform.saleOrderItems.forEach(function(t){e+=t.ordernum}),e}},Object(i.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList",isallow:"isallow",isallownew:"isallownew"})),filters:{parseTime:s.h,paymethodFilter:function(e){switch(parseInt(e)){case 1:return"货到收款";case 2:return"预收款";default:return""}},statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}},deliverwayFilter:function(e){switch(parseInt(e)){case 1:return"库发";case 2:return"供应商直发";case 3:return"自提";default:return""}}},created:function(){this.getDetail(),this.gridData.length||this.$store.dispatch("GetGysList")},methods:{getName:function(e){var t="";return this.gridData.length&&this.gridData.map(function(a){a.requestid===e&&(t=a.name)}),t},getDetail:function(){var e=this;Object(o.t)({ticketno:this.$route.params.ticketno}).then(function(t){console.log(t),e.planform=t.data,e.fetchSuccess=!0}).catch(function(t){console.log(t),e.fetchSuccess=!1})},nextpage:function(e){this.$router.push({name:e,params:{ticketno:this.$route.params.ticketno}})},Modify:c.a,Edit:function(){this.$router.push({name:"newsaleorder",params:{enquiryorder:this.planform.saleOrder.enquiryorder},query:{id:this.$route.params.ticketno}})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[1==e.planform.saleOrder.status&&e.isallownew?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:1==e.planform.saleOrder.closed},on:{click:function(t){e.nextpage("newoutnotice")}}},[e._v("登记发货通知单")]):-1==e.planform.saleOrder.status||-2==e.planform.saleOrder.status?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning"},on:{click:function(t){e.Modify(3,"saleOrder")}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.Edit}},[e._v("修改")])]:0==e.planform.saleOrder.status&&e.isallow?[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.Modify(0,"saleOrder")}}},[e._v("审核")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"error"},on:{click:function(t){e.Modify(1,"saleOrder")}}},[e._v("驳回")])]:[a("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v("详情")])]]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.planform,"label-width":"80px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"销售单号",prop:"saleOrder.ticketno"}},[a("span",[e._v(e._s(e.planform.saleOrder.ticketno))])])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态",prop:"saleOrder.status"}},[a("el-tag",[e._v(e._s(e._f("statusFilter")(e.planform.saleOrder.status)))])],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"计划单号"}},[a("span",[e._v(e._s(e.planform.saleOrder.enquiryorder))])])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货日期",prop:"saleOrder.planarrivedate"}},[e._v("\r\n          "+e._s(e.planform.saleOrder.planarrivedate)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制单人",prop:"saleOrder.createuser"}},[e._v("\r\n          "+e._s(e.planform.saleOrder.createuser)+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户",prop:"saleOrder.customer"}},[e._v("\r\n          "+e._s(e.getName(e.planform.saleOrder.customer))+"\r\n        ")])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"收款方式",prop:"saleOrder.recmethod"}},[e._v("\r\n          "+e._s(e._f("paymethodFilter")(e.planform.saleOrder.recmethod))+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"交货方式",prop:"saleOrder.deliverway"}},[e._v("\r\n          "+e._s(e._f("deliverwayFilter")(e.planform.saleOrder.deliverway))+"\r\n        ")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"合同编号",prop:"saleOrder.contractno"}},[e._v("\r\n          "+e._s(e.planform.saleOrder.contractno)+"\r\n        ")])],1)],1),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("\r\n        销售单物品明细\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{"label-width":"0",prop:"saleOrderItems"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planform.saleOrderItems,border:"","max-height":"600"}},[a("el-table-column",{attrs:{label:"序号",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.custommaterialno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialtag))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ordernum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.saleprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.saleprice*t.row.ordernum).toFixed(2)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.memos))])]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,d,!1,function(e){a("AqdD")},"data-v-edb86958",null);t.default=p.exports},xKBK:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("0TzL"),i=a("NYxO"),l=a("vHhr"),s=a("0xDb"),c={components:{Sticky:l.a},data:function(){return{form:{etpOrderMain:{},items:[]},fetchSuccess:!0,loading:!1,jbloading:!1,topShow:!0}},computed:r()({totalAmount:function(){var e=0;return this.form.items.forEach(function(t){e+=t.pdtprice*t.pdtnumber}),e}},Object(i.b)(["company","companyId"])),filters:{parseTime:s.h,parseType:function(e){return 0===e||"0"===e?"明细招标":1===e||"1"===e?"品类招标":e}},created:function(){this.getDetail(),"etpdetailsale"===this.$route.name&&(this.topShow=!1)},methods:{getDetail:function(){var e=this;Object(o.g)({id:this.$route.params.id,myOrderFlag:"1"}).then(function(t){console.log(t),e.form=t.data}).catch(function(t){console.log(t),e.fetchSuccess=!1})},makebid:function(){var e=this;console.log(this.form);var t=[];if(this.form.items.map(function(e){e.tender&&t.push({belongserver:e.tender,pdtno:e.pdtno})}),!t.length)return this.$message({message:"未设置中标信息或无人竞标",type:"warning"}),!1;this.loading=!0,Object(o.k)({etpBidMain:{tpnumber:this.form.etpOrderMain.tpnumber},items:t}).then(function(t){console.log(t),e.loading=!1,e.$message({message:"设置中标成功！",type:"success"})}).catch(function(t){console.log(t),e.loading=!1})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.topShow?a("sticky",{attrs:{className:"sub-navbar published"}},[e.fetchSuccess?["正在竞标"===e.form.etpOrderMain.status?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"warning"},on:{click:e.makebid}},[e._v("一键中标")]):e._e(),e._v(" "),"竞标结束"===e.form.etpOrderMain.status?a("el-button",{attrs:{type:"info"}},[e._v("竞标结束")]):e._e(),e._v(" "),a("div",{staticStyle:{height:"50px"}})]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2):e._e(),e._v(" "),a("div",{staticClass:"app-container"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"招标单号"}},[e._v("\r\n        "+e._s(e.form.etpOrderMain.tpnumber)+"\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"招标标题"}},[e._v("\r\n        "+e._s(e.form.etpOrderMain.title)+"\r\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"详细说明"}},[e._v("\r\n        "+e._s(e.form.etpOrderMain.smcontent)+"\r\n      ")]),e._v(" "),a("div",{staticClass:"itemscont"},[a("h3",[e._v("招标物品明细")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.items,border:""}},[a("el-table-column",{attrs:{label:"小分类编码",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.thirdlevno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"thirdlev",label:"小分类名称",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品编号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtno,callback:function(a){e.$set(t.row,"pdtno",a)},expression:"scope.row.pdtno"}})]:a("span",[e._v(e._s(t.row.pdtno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtname,callback:function(a){e.$set(t.row,"pdtname",a)},expression:"scope.row.pdtname"}})]:a("span",[e._v(e._s(t.row.pdtname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtbrand,callback:function(a){e.$set(t.row,"pdtbrand",a)},expression:"scope.row.pdtbrand"}})]:a("span",[e._v(e._s(t.row.pdtbrand))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtmodel,callback:function(a){e.$set(t.row,"pdtmodel",a)},expression:"scope.row.pdtmodel"}})]:a("span",[e._v(e._s(t.row.pdtmodel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtsize,callback:function(a){e.$set(t.row,"pdtsize",a)},expression:"scope.row.pdtsize"}})]:a("span",[e._v(e._s(t.row.pdtsize))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtnumber,callback:function(a){e.$set(t.row,"pdtnumber",a)},expression:"scope.row.pdtnumber"}})]:a("span",[e._v(e._s(t.row.pdtnumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtunit,callback:function(a){e.$set(t.row,"pdtunit",a)},expression:"scope.row.pdtunit"}})]:a("span",[e._v(e._s(t.row.pdtunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.pdtprice,callback:function(a){e.$set(t.row,"pdtprice",a)},expression:"scope.row.pdtprice"}})]:a("span",[e._v(e._s(t.row.pdtprice))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参考金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1e3*t.row.pdtprice*t.row.pdtnumber/1e3))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.beizhu,callback:function(a){e.$set(t.row,"beizhu",a)},expression:"scope.row.beizhu"}})]:a("span",[e._v(e._s(t.row.beizhu))])]}}])}),e._v(" "),"正在竞标"===e.form.etpOrderMain.status?a("el-table-column",{attrs:{label:"设置中标",fixed:"right",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.companyList.length?[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.items[t.$index].tender,callback:function(a){e.$set(e.form.items[t.$index],"tender",a)},expression:"form.items[scope.$index].tender"}},e._l(t.row.companyList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.supplierno)+"|"+e._s(t.bidprice))])])}))]:[a("span",[e._v("无人竞标")])]]}}])}):e._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("kAXv")},"data-v-65db75de",null);t.default=d.exports},"xQI/":function(e,t){},xh2W:function(e,t,a){"use strict";var n=a("Gu7T"),r=a.n(n),o=a("Dd8w"),i=a.n(o),l=a("NYxO"),s={data:function(){return{postForm:{code:"",name:""},pagesize:10,pageindex:1,total:0,currentPage:1,currentData:[]}},computed:i()({},Object(l.b)({gridData:"gysList"})),created:function(){var e=this;this.gridData.length?this.getCurrentData():this.$store.dispatch("GetGysList").then(function(){e.getCurrentData()})},methods:{onSubmit:function(){var e=this,t=this.gridData.filter(function(t){return t.name.includes(e.postForm.name)&&t.code.includes(e.postForm.code)});this.getCurrentData(t)},onReset:function(){this.pageindex=1,this.pagesize=10,this.postForm={code:"",name:""},this.getCurrentData()},handleCurrentChange:function(e){e&&(this.$emit("subCompany",e),this.$emit("diClose"))},getCurrentData:function(e){var t=e||[].concat(r()(this.gridData));this.currentData=t.slice((this.pageindex-1)*this.pagesize,this.pagesize*this.pageindex),this.total=(e?e.length:null)||this.gridData.length},handleSizeChange:function(e){this.pagesize=e,this.getCurrentData()},handleCurrentPageChange:function(e){this.pageindex=e,this.getCurrentData()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.postForm,labelWidth:"120px"}},[a("el-form-item",{attrs:{label:"企业编号"}},[a("el-input",{attrs:{placeholder:"请输入企业编号"},model:{value:e.postForm.code,callback:function(t){e.$set(e.postForm,"code",t)},expression:"postForm.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.postForm.name,callback:function(t){e.$set(e.postForm,"name",t)},expression:"postForm.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{ref:"singleTable",attrs:{data:e.currentData,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{property:"code",label:"企业编号"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"企业名称"}})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}})],1)},staticRenderFns:[]};var u=a("VU/8")(s,c,!1,function(e){a("gejV")},null,null);t.a=u.exports},xn8Z:function(e,t){},yJ5x:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),r=a.n(n),o=a("fZjL"),i=a.n(o),l=a("BO1k"),s=a.n(l),c=a("Dd8w"),u=a.n(c),d=a("jsD9"),p=a("NYxO"),m=[],f={data:function(){return{orderList:[],pagesize:10,pageindex:1,total:0,currentPage:1,loading:!1,postData:{},postForm:{status:"",enquiryorder:"",contractno:"",servicer:"",paymethod:""},currentRow:null,ispul:!1,checkboxVal:m,key:1,formTheadOptions:[{name:"来源计划单",value:"enquiryorder"},{name:"合同编号",value:"contractno"}],formThead:m,statusList:[{name:"草稿",value:"-1"},{name:"待审核",value:"0"},{name:"确认通过",value:"1"},{name:"驳回",value:"-2"}],paymethod:[{name:"货到付款",value:"1"},{name:"货到票到付款",value:"2"},{name:"先款后货",value:"3"}]}},watch:{checkboxVal:function(e){this.formThead=this.formTheadOptions.filter(function(t){return e.includes(t.value)}),this.key=this.key+1}},computed:u()({},Object(p.b)({gridData:"gysList"})),filters:{statusFilter:function(e){switch(parseInt(e)){case-1:return"草稿";case 0:return"待审核";case 1:return"确认通过";case-2:return"驳回";default:return""}}},created:function(){this.orderList.length||this.getList(),this.gridData.length||this.$store.dispatch("GetGysList")},methods:{onConfirm:function(){this.$emit("subOrder",this.currentRow),this.$emit("diClose")},onCancel:function(){this.$refs.singleTable.setCurrentRow()},onPuls:function(){this.ispul=!this.ispul},getList:function(){var e=this;this.loading=!0;var t={},a=!0,n=!1,r=void 0;try{for(var o,l=s()(i()(this.postData));!(a=(o=l.next()).done);a=!0){var c=o.value;""!==this.postData[c]&&(t[c]=this.postData[c])}}catch(e){n=!0,r=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw r}}Object(d.b)(u()({pagesize:this.pagesize,pageindex:this.pageindex},t)).then(function(t){console.log(t),e.orderList=t.data.data,e.total=t.data.total,e.currentPage=t.data.currentPage,e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},handleSizeChange:function(e){this.pagesize=e,this.getList()},handleCurrentPageChange:function(e){this.pageindex=e,this.getList()},handleCurrentChange:function(e){this.currentRow=e},onSubmit:function(){this.postData=r()({},this.postForm),this.getList()}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.postForm,labelWidth:"120px"}},[a("el-form-item",{attrs:{label:"合同编号"}},[a("el-input",{attrs:{placeholder:"合同编号"},model:{value:e.postForm.contractno,callback:function(t){e.$set(e.postForm,"contractno",t)},expression:"postForm.contractno"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:e.ispul?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:e.onPuls}},[e._v(e._s(e.ispul?"收起":"展开")+"条件")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ispul,expression:"ispul"}]},[a("el-form-item",{attrs:{label:"来源计划单"}},[a("el-input",{attrs:{placeholder:"来源计划单号"},model:{value:e.postForm.enquiryorder,callback:function(t){e.$set(e.postForm,"enquiryorder",t)},expression:"postForm.enquiryorder"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择供应商","prefix-icon":"el-icon-search"},model:{value:e.postForm.customer,callback:function(t){e.$set(e.postForm,"customer",t)},expression:"postForm.customer"}},e._l(e.gridData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.requestid}})}))],1)],1)],1),e._v(" "),a("div",{staticClass:"filter-container"},[a("el-checkbox-group",{model:{value:e.checkboxVal,callback:function(t){e.checkboxVal=t},expression:"checkboxVal"}},[a("el-checkbox",{attrs:{label:"enquiryorder"}},[e._v("来源计划单")]),e._v(" "),a("el-checkbox",{attrs:{label:"contractno"}},[e._v("合同编号")])],1)],1),e._v(" "),a("el-table",{key:e.key,ref:"singleTable",attrs:{"highlight-current-row":"","max-height":"600",data:e.orderList,loading:e.loading},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{property:"ticketno",label:"销售单号",width:"160"}}),e._v(" "),e._l(e.formThead,function(t){return a("el-table-column",{key:t.value,attrs:{label:t.name,width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n        "+e._s(a.row[t.value])+"\n      ")]}}])})}),e._v(" "),a("el-table-column",{attrs:{property:"sumorderamount",label:"销售金额"}}),e._v(" "),a("el-table-column",{attrs:{property:"customername",label:"客户",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{property:"status",label:"状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("statusFilter")(t.row.status))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"memos",label:"备注"}})],2),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPageChange}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onConfirm}},[e._v("确 定")])],1),e._v(" "),a("div",{staticClass:"clearfix"})],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(e){a("NA3b")},null,null);t.default=h.exports},yVtu:function(e,t){},yh13:function(e,t){},yq9s:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),o=a("woOf"),i=a.n(o),l=a("xh2W"),s=a("vHhr"),c=a("0xDb"),u=a("ehIy"),d=a("NYxO"),p={outputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:null,memos:"",planinvoiceamount:null,planinvoicenum:null,pretaxamount:null,status:null,taxamount:null,ticketno:"",lastinvoicedate:"",verifyamount:0},outputInvoiceItems:[]},m={postoutstoredate:null,customer:"",customername:"",contractNo:null,ticketNo:null},f=[],v={name:"newoutputinvoice",components:{CompanyChoice:l.a,Sticky:s.a},data:function(){return{outputInvoiceform:i()({},p),searchForm:i()({},m),addServicerShow:!1,fetchSuccess:!0,invoicetype:c.b,loading:!1,rules:{outputInvoice:{invoicetype:[{required:!0,message:"请选择发票类型",trigger:"change"}]}},multipleSelection:f,searchLoading:!1,searchRules:{customer:[{required:!0,message:"请选择客户",trigger:"change"}]},planinvoiceamount:null,invoiceamount:null,pretaxamount:null,taxamount:null,planinvoicenum:null}},computed:r()({contentShortLength:function(){return this.outputInvoiceform.outputInvoice.memos.length}},Object(d.b)({company:"company",companyId:"companyId",userInfo:"userInfo",visitedViews:"visitedViews",revstoreList:"storeList",gridData:"gysList"})),watch:{multipleSelection:function(e,t){var a=this;this.outputInvoiceform.outputInvoiceItems.map(function(e){e.edit=!1,e.invoicenum=0}),e.map(function(e){a.outputInvoiceform.outputInvoiceItems.map(function(t){e.index===t.index&&(t.edit=!0)})}),this.reflashData()}},created:function(){var e=this;this.reflashData(),this.$nextTick(function(){e.multipleSelection.map(function(t){e.$refs.outputInvoiceTable.toggleRowSelection(t,!0)})})},methods:{parseTime:c.h,checkSelectable:function(e){return e.planinvoicenum>0},reflashData:function(){var e=this;this.$nextTick(function(){e.getPlaninvoiceamount(),e.getInvoiceamount(),e.getPretaxamount(),e.getTaxamount(),e.getPlaninvoicenum()})},getPlaninvoiceamount:function(){var e=0;this.multipleSelection.map(function(t){e+=t.invoicenum*t.price}),this.planinvoiceamount=e.toFixed(2)},getTaxamount:function(){var e=0;this.outputInvoiceform.outputInvoiceItems.map(function(t){e=e+t.invoicenum*t.price-t.invoicenum*t.price/(1+t.taxrate/100)}),this.taxamount=e.toFixed(2)},getPretaxamount:function(){var e=0;this.outputInvoiceform.outputInvoiceItems.map(function(t){e+=t.invoicenum*t.price/(1+t.taxrate/100)}),this.pretaxamount=e.toFixed(2)},getPlaninvoicenum:function(){var e=0;this.outputInvoiceform.outputInvoiceItems.map(function(t){e+=t.invoicenum}),this.planinvoicenum=e},getInvoiceamount:function(){var e=0;this.outputInvoiceform.outputInvoiceItems.map(function(t){e+=t.invoicenum*t.price}),this.invoiceamount=e.toFixed(2)},handleSelectionChange:function(e){this.multipleSelection=e},addServicer:function(){this.addServicerShow=!0},diClose:function(){this.addServicerShow=!1},subCompany:function(e){this.searchForm.customer=e.requestid,this.searchForm.customername=e.name},onSubmit:function(){var e=this;this.$refs.searchForm.validate(function(t){if(t){e.searchLoading=!0;var a={customer:e.searchForm.customer?e.searchForm.customer:null,contractNo:e.searchForm.contractNo?e.searchForm.contractNo:null,ticketNo:e.searchForm.ticketNo?e.searchForm.ticketNo:null,begindate:e.searchForm.postoutstoredate?Object(c.h)(e.searchForm.postoutstoredate[0]):null,enddate:e.searchForm.postoutstoredate?Object(c.h)(e.searchForm.postoutstoredate[1]):null};Object(u.e)(a).then(function(t){console.log(t),e.searchLoading=!1,t.data.length?(t.data.map(function(e,t){e.index=t}),e.outputInvoiceform.outputInvoiceItems=t.data):(e.$message({message:"未查询到相关出库单",type:"warning"}),e.outputInvoiceform.outputInvoiceItems=[])}).catch(function(t){console.log(t),e.searchLoading=!1})}})},onCancel:function(){m={postoutstoredate:[],customer:"",customername:"",contractNo:null,ticketNo:null},this.searchForm=i()({},m)},submitForm:function(){var e=this;this.$refs.postForm.validate(function(t){if(t){var a=i()({},e.outputInvoiceform),n=[];a.outputInvoice.customer=e.searchForm.customer,a.outputInvoice.customername=e.searchForm.customername,a.outputInvoice.enterprise=e.companyId,a.outputInvoice.enterprisename=e.company,a.outputInvoice.createuser=e.userInfo.truename,a.outputInvoice.lastinvoicedate=e.parseTime(a.outputInvoice.lastinvoicedate),a.outputInvoice.planinvoicenum=e.planinvoicenum,a.outputInvoice.planinvoiceamount=e.planinvoiceamount,a.outputInvoiceItems.map(function(t){e.multipleSelection.map(function(e){e.index===t.index&&(t.planinvoicenum=t.invoicenum,t.planinvoiceamount=parseFloat((t.invoicenum*t.price).toFixed(2)),n.push(t))})}),a.outputInvoiceItems=n,e.loading=!0;var r=e.visitedViews.filter(function(t){return t.path===e.$route.path});Object(u.a)({applyInvoice:a.outputInvoice,applyInvoiceItemList:a.outputInvoiceItems}).then(function(t){console.log(t),e.loading=!1,"200"===t.code&&t.data&&e.$confirm("申请销项发票成功！","提示",{confirmButtonText:"详情",cancelButtonText:"关闭",type:"success"}).then(function(a){e.$store.dispatch("delVisitedViews",r[0]).then(function(){e.$router.push({name:"outputinvoicedetail",params:{ticketno:t.data}})})}).catch(function(t){e.$store.dispatch("delVisitedViews",r[0]).then(function(){e.$router.push("/")})}),p={outputInvoice:{checkadvice:"",checkdate:"",checkuser:"",createdate:"",createuser:"",customer:"",customername:"",enterprise:"",enterprisename:"",invoiceamount:"",invoicedate:"",invoiceno:"",invoicenum:"",invoicetype:"",invoiceuser:"",isdelete:null,memos:"",planinvoiceamount:null,planinvoicenum:null,pretaxamount:null,status:null,taxamount:null,ticketno:"",verifyamount:null},outputInvoiceItems:[]},m={postoutstoredate:[],customer:null,customername:null,contractNo:null,ticketNo:null},f=[]}).catch(function(t){console.log(t),e.loading=!1})}})},draftForm:function(){p=this.outputInvoiceform,m=this.searchForm,f=this.multipleSelection}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("sticky",{staticStyle:{"margin-bottom":"20px"},attrs:{className:"sub-navbar published"}},[e.fetchSuccess?[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success",disabled:!e.multipleSelection.length},on:{click:function(t){e.submitForm()}}},[e._v("提交\r\n      ")]),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"warning"},on:{click:e.draftForm}},[e._v("保存草稿")])]:[a("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),a("el-row",[a("el-steps",{attrs:{active:-1,simple:""}},[a("el-step",{attrs:{title:"查询相应出库单"}}),e._v(" "),a("el-step",{attrs:{title:"勾选开票相应单据"}}),e._v(" "),a("el-step",{attrs:{title:"核对金额填写剩余信息"}})],1),e._v(" "),a("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"20px"}},[a("el-form",{ref:"searchForm",attrs:{model:e.searchForm,rules:e.searchRules,"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户",prop:"customer"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请选择客户"},on:{focus:e.addServicer},model:{value:e.searchForm.customername,callback:function(t){e.$set(e.searchForm,"customername",t)},expression:"searchForm.customername"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"销售单号"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入销售单号"},model:{value:e.searchForm.ticketNo,callback:function(t){e.$set(e.searchForm,"ticketNo",t)},expression:"searchForm.ticketNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"合同编号"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入合同编号"},model:{value:e.searchForm.contractNo,callback:function(t){e.$set(e.searchForm,"contractNo",t)},expression:"searchForm.contractNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出库日期"}},[a("el-date-picker",{attrs:{type:"datetimerange",editable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchForm.postoutstoredate,callback:function(t){e.$set(e.searchForm,"postoutstoredate",t)},expression:"searchForm.postoutstoredate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.searchLoading,expression:"searchLoading"}],attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.onCancel}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"createPost-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.outputInvoiceform.outputInvoiceItems.length,expression:"!outputInvoiceform.outputInvoiceItems.length"}],staticClass:"noresult"},[a("i",{staticClass:"el-icon-search"}),e._v("没有对应的出库单...\r\n      ")]),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.outputInvoiceform.outputInvoiceItems.length,expression:"outputInvoiceform.outputInvoiceItems.length"}],ref:"postForm",staticClass:"form-container",attrs:{model:e.outputInvoiceform,rules:e.rules}},[a("div",{staticClass:"createPost-main-container"},[a("el-row",[a("el-col",{attrs:{span:21}},[a("div",{staticClass:"postInfo-container"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"发票种类:",prop:"outputInvoice.invoicetype"}},[a("el-select",{staticStyle:{"min-width":"220px"},attrs:{filterable:"",clearable:"",placeholder:"请选择发票种类","prefix-icon":"el-icon-search"},model:{value:e.outputInvoiceform.outputInvoice.invoicetype,callback:function(t){e.$set(e.outputInvoiceform.outputInvoice,"invoicetype",t)},expression:"outputInvoiceform.outputInvoice.invoicetype"}},e._l(e.invoicetype,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"计划开票金额:"}},[a("el-input",{staticStyle:{"min-width":"220px"},attrs:{type:"text",value:e.planinvoiceamount,placeholder:"计划开票金额",disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"130px",label:"计划开票数量:"}},[a("el-input",{staticStyle:{"min-width":"200px"},attrs:{placeholder:"计划开票数量",value:e.planinvoicenum,disabled:""}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"110px",label:"折扣金额合计:"}},[a("el-input",{staticStyle:{"min-width":"220px"},attrs:{type:"number",placeholder:"请输入折扣金额合计"},model:{value:e.outputInvoiceform.outputInvoice.discountamount,callback:function(t){e.$set(e.outputInvoiceform.outputInvoice,"discountamount",t)},expression:"outputInvoiceform.outputInvoice.discountamount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"postInfo-container-item",attrs:{"label-width":"120px",label:"最迟开票日期:"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:e.outputInvoiceform.outputInvoice.lastinvoicedate,callback:function(t){e.$set(e.outputInvoiceform.outputInvoice,"lastinvoicedate",t)},expression:"outputInvoiceform.outputInvoice.lastinvoicedate"}})],1)],1)],1)],1)])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"45px",label:"备注:"}},[a("el-input",{staticClass:"article-textarea",attrs:{type:"textarea",rows:1,autosize:"",placeholder:"请输入内容"},model:{value:e.outputInvoiceform.outputInvoice.memos,callback:function(t){e.$set(e.outputInvoiceform.outputInvoice,"memos",t)},expression:"outputInvoiceform.outputInvoice.memos"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.contentShortLength,expression:"contentShortLength"}],staticClass:"word-counter"},[e._v(e._s(e.contentShortLength)+"字")])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"40px"},attrs:{"label-width":"0"}},[a("el-table",{ref:"outputInvoiceTable",staticStyle:{width:"100%"},attrs:{data:e.outputInvoiceform.outputInvoiceItems,border:"","max-height":"600"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",selectable:e.checkSelectable,width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"出库单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售订单号",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.saleorder))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"销售合同号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contractno))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料规格",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.materialrule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderunit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"含税金额",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoiceamount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"税率",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.taxrate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"120",label:"可申请开票数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.planinvoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"本次申请开票数量",fixed:"right",width:"175"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input-number",{staticStyle:{"max-width":"150px"},attrs:{min:1,max:t.row.planinvoicenum},on:{change:e.reflashData},model:{value:t.row.invoicenum,callback:function(a){e.$set(t.row,"invoicenum",a)},expression:"scope.row.invoicenum"}})]:a("span",[e._v(e._s(t.row.invoicenum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"申请开票金额",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.invoicenum*t.row.price).toFixed(2)))])]}}])})],1)],1)],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:"选择客户",visible:e.addServicerShow,center:"",width:"80%"},on:{"update:visible":function(t){e.addServicerShow=t}}},[a("CompanyChoice",{on:{subCompany:e.subCompany,diClose:e.diClose}})],1)],1)},staticRenderFns:[]};var b=a("VU/8")(v,h,!1,function(e){a("hiNR")},"data-v-5889584f",null);t.default=b.exports},zmj6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-quotation",use:"icon-quotation-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-quotation"><defs><style type="text/css"></style></defs><path d="M654.88118838 62.00023379a262.28564648 262.28564648 0 0 0-251.64928476 189.58436631 236.45448369 236.45448369 0 0 0-8.99999825 47.45453291 219.1557876 219.1557876 0 0 0-1.28571328 24.89609795 263.45447666 263.45447666 0 0 0 58.44154307 165.03891767 265.79213877 265.79213877 0 0 0 50.37661054 47.45453291 259.48045195 259.48045195 0 0 0 98.99997364 43.83115752 256.20772588 256.20772588 0 0 0 53.88310283 5.61038818h4.20779179a253.16876513 253.16876513 0 0 0 47.45453292-5.02597265A261.93499717 261.93499717 0 0 0 654.88118838 62.00023379z m51.6623247 485.06480947a219.74020224 219.74020224 0 0 1-47.4545329 5.84415352h-4.2077918a229.67526533 229.67526533 0 0 1-46.05193565-4.67532334 228.27266807 228.27266807 0 0 1-112.441529-59.37660791 227.45448633 227.45448633 0 0 1-70.12985185-165.03891767 219.03890449 219.03890449 0 0 1 1.40259638-24.89609796 227.10383701 227.10383701 0 0 1 10.28571153-47.4545329l1.28571415-3.74025851a226.51942148 226.51942148 0 0 1 16.94804766-37.05193828A229.0908498 229.0908498 0 1 1 706.54351308 547.06504326z" p-id="5291" /><path d="M659.08898018 552.90919677v361.40250411H154.15404628V299.039133h60.42855587v17.99999562a23.37661758 23.37661758 0 0 0 47.45453291 0v-17.99999561h64.63634678v17.99999561a23.37661758 23.37661758 0 0 0 47.4545329 0v-17.99999561h53.0649211a227.10383701 227.10383701 0 0 1 10.28571153-47.45453291h-63.35063263v-17.99999561a23.37661758 23.37661758 0 1 0-47.4545329 0v17.99999561h-64.63634678v-17.99999561a23.37661758 23.37661758 0 1 0-47.45453291 0v17.99999561H130.07613008a23.37661758 23.37661758 0 0 0-23.37661758 23.37661758V938.62338242a23.37661758 23.37661758 0 0 0 23.37661758 23.37661758h552.74011611a23.37661758 23.37661758 0 0 0 23.37661758-23.37661758V547.06504326a219.74020224 219.74020224 0 0 1-47.10388359 5.84415351zM438.76436153 233.58460449v14.25973711a226.51942148 226.51942148 0 0 1 16.94804765-37.05193828 23.37661758 23.37661758 0 0 0-16.94804765 22.79220117z" p-id="5292" /><path d="M496.27084062 488.97414863h-271.16876074a23.37661758 23.37661758 0 0 1 1e-8-47.4545329h233.18175761a228.9739667 228.9739667 0 0 0 37.98700312 47.45453291zM611.9850957 560.15594844a23.37661758 23.37661758 0 0 1-23.37661669 23.37661758h-363.50639912a23.37661758 23.37661758 0 0 1 0-47.57141602h344.22068935a225.58435664 225.58435664 0 0 0 39.38960039 11.68830791 23.37661758 23.37661758 0 0 1 3.27272607 12.50649053zM588.25782969 678.90916426H225.10207989a23.37661758 23.37661758 0 0 1-1e-8-47.45453291H588.25782969a23.37661758 23.37661758 0 0 1 0 47.4545329zM402.41372187 773.93511406H225.10207989a23.37661758 23.37661758 0 0 1-1e-8-47.57141689H402.41372187a23.37661758 23.37661758 0 0 1 0 47.57141689zM818.51750967 165.79241474L698.71234589 335.50665664h94.44153429v37.63635381h-109.98698468V424.33780185h109.98698468v37.98700313h-109.98698468v75.27270762h-56.57141337v-74.8051752h-113.96100937V424.33780185h113.96100937v-51.1947914h-113.96100937V335.50665664h97.24672792L491.24486797 165.79241474h63.81816504Q638.16690693 292.25991464 656.05001943 326.15600908h1.16883106a516.85700888 516.85700888 0 0 1 33.19479668-56.22076406l67.79218975-104.14283028z" p-id="5293" /></symbol>'});i.a.add(l);t.default=l},znPN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Wc9H"),r=a.n(n),o=a("IaZV"),i=a.n(o),l=new r.a({id:"icon-company",use:"icon-company-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" id="icon-company"><defs><style type="text/css"></style></defs><path d="M342.845 764.581H295.73c-8.173 0-14.841 6.663-14.841 14.841v47.104c0 8.178 6.668 14.851 14.841 14.851h47.114c8.173 0 14.841-6.673 14.841-14.851v-47.104c0.001-8.178-6.667-14.841-14.84-14.841m0-355.375H295.73c-8.173 0-14.841 6.678-14.841 14.84v47.115c0 8.173 6.668 14.851 14.841 14.851h47.114c8.173 0 14.841-6.678 14.841-14.851v-47.115c0.001-8.163-6.667-14.84-14.84-14.84m0 118.529H295.73c-8.173 0-14.841 6.678-14.841 14.846v46.901c0 8.162 6.668 14.83 14.841 14.83h47.114c8.173 0 14.841-6.668 14.841-14.83v-47.109c0.001-8.179-6.667-14.638-14.84-14.638m0 118.317H295.73c-8.173 0-14.841 6.662-14.841 14.841v47.119c0 8.168 6.668 14.83 14.841 14.83h47.114c8.173 0 14.841-6.662 14.841-14.83v-47.119c0.001-8.179-6.667-14.841-14.84-14.841m0-355.366H295.73c-8.173 0-14.841 6.663-14.841 14.83v47.11c0 8.188 6.668 14.856 14.841 14.856h47.114c8.173 0 14.841-6.667 14.841-14.856v-47.11c0.001-8.167-6.667-14.83-14.84-14.83M906.006 918.6h-793.12c-8.188 0-14.856-6.673-14.856-14.851v-48.173c0-8.178 6.667-14.851 14.856-14.851h44.526V239.971c0-16.789 9.897-31.842 25.383-38.515L445.446 49.375c12.907-5.594 27.748-4.303 39.583 3.438 11.83 7.746 18.716 20.872 18.716 34.848v752.851h47.537V155.363c0-15.049 7.955-28.821 20.862-36.13 12.918-7.532 29.04-7.323 41.958 0.208L840.827 251.52c12.908 7.532 20.659 21.304 20.659 36.145v553.274h44.745c8.157 0 14.84 6.662 14.84 14.851v47.959c-0.215 8.178-6.887 14.851-15.065 14.851M728.532 532.308h-47.104c-8.179 0-14.841 6.667-14.841 14.845v46.892c0 8.179 6.662 14.841 14.841 14.841h47.104c8.178 0 14.851-6.662 14.851-14.841v-47.11c0-8.168-6.673-14.627-14.851-14.627m0-237.06h-47.104c-8.179 0-14.841 6.667-14.841 14.84v47.11c0 8.178 6.662 14.846 14.841 14.846h47.104c8.178 0 14.851-6.667 14.851-14.846v-47.11c0-8.172-6.673-14.84-14.851-14.84m0 355.371h-47.104c-8.179 0-14.841 6.667-14.841 14.845v47.11c0 8.178 6.662 14.84 14.841 14.84h47.104c8.178 0 14.851-6.662 14.851-14.84v-47.11c0-8.178-6.673-14.845-14.851-14.845m0 118.534h-47.104c-8.179 0-14.841 6.667-14.841 14.841v47.109c0 8.178 6.662 14.851 14.841 14.851h47.104c8.178 0 14.851-6.673 14.851-14.851v-47.109c0-8.174-6.673-14.841-14.851-14.841m0-355.375h-47.104c-8.179 0-14.841 6.667-14.841 14.845v47.11c0 8.173 6.662 14.84 14.841 14.84h47.104c8.178 0 14.851-6.667 14.851-14.84v-47.11c0-8.178-6.673-14.845-14.851-14.845" p-id="5844" /></symbol>'});i.a.add(l);t.default=l},zuQA:function(e,t){}},["NHnr"]);